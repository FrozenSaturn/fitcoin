(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function wE(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Nd={exports:{}},Al={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay;function bS(){if(Ay)return Al;Ay=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:f,ref:o!==void 0?o:null,props:u}}return Al.Fragment=t,Al.jsx=n,Al.jsxs=n,Al}var Sy;function RS(){return Sy||(Sy=1,Nd.exports=bS()),Nd.exports}var b=RS(),Dd={exports:{}},bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wy;function IS(){if(wy)return bt;wy=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.iterator;function C(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,Q={};function X(O,Z,ut){this.props=O,this.context=Z,this.refs=Q,this.updater=ut||V}X.prototype.isReactComponent={},X.prototype.setState=function(O,Z){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Z,"setState")},X.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ct(){}ct.prototype=X.prototype;function et(O,Z,ut){this.props=O,this.context=Z,this.refs=Q,this.updater=ut||V}var nt=et.prototype=new ct;nt.constructor=et,q(nt,X.prototype),nt.isPureReactComponent=!0;var Tt=Array.isArray,vt={H:null,A:null,T:null,S:null},Dt=Object.prototype.hasOwnProperty;function P(O,Z,ut,it,st,Rt){return ut=Rt.ref,{$$typeof:s,type:O,key:Z,ref:ut!==void 0?ut:null,props:Rt}}function I(O,Z){return P(O.type,Z,void 0,void 0,void 0,O.props)}function w(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function D(O){var Z={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ut){return Z[ut]})}var k=/\/+/g;function j(O,Z){return typeof O=="object"&&O!==null&&O.key!=null?D(""+O.key):Z.toString(36)}function N(){}function Ee(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(N,N):(O.status="pending",O.then(function(Z){O.status==="pending"&&(O.status="fulfilled",O.value=Z)},function(Z){O.status==="pending"&&(O.status="rejected",O.reason=Z)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function de(O,Z,ut,it,st){var Rt=typeof O;(Rt==="undefined"||Rt==="boolean")&&(O=null);var wt=!1;if(O===null)wt=!0;else switch(Rt){case"bigint":case"string":case"number":wt=!0;break;case"object":switch(O.$$typeof){case s:case t:wt=!0;break;case E:return wt=O._init,de(wt(O._payload),Z,ut,it,st)}}if(wt)return st=st(O),wt=it===""?"."+j(O,0):it,Tt(st)?(ut="",wt!=null&&(ut=wt.replace(k,"$&/")+"/"),de(st,Z,ut,"",function(se){return se})):st!=null&&(w(st)&&(st=I(st,ut+(st.key==null||O&&O.key===st.key?"":(""+st.key).replace(k,"$&/")+"/")+wt)),Z.push(st)),1;wt=0;var me=it===""?".":it+":";if(Tt(O))for(var jt=0;jt<O.length;jt++)it=O[jt],Rt=me+j(it,jt),wt+=de(it,Z,ut,Rt,st);else if(jt=C(O),typeof jt=="function")for(O=jt.call(O),jt=0;!(it=O.next()).done;)it=it.value,Rt=me+j(it,jt++),wt+=de(it,Z,ut,Rt,st);else if(Rt==="object"){if(typeof O.then=="function")return de(Ee(O),Z,ut,it,st);throw Z=String(O),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return wt}function tt(O,Z,ut){if(O==null)return O;var it=[],st=0;return de(O,it,"","",function(Rt){return Z.call(ut,Rt,st++)}),it}function _t(O){if(O._status===-1){var Z=O._result;Z=Z(),Z.then(function(ut){(O._status===0||O._status===-1)&&(O._status=1,O._result=ut)},function(ut){(O._status===0||O._status===-1)&&(O._status=2,O._result=ut)}),O._status===-1&&(O._status=0,O._result=Z)}if(O._status===1)return O._result.default;throw O._result}var ft=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function Ht(){}return bt.Children={map:tt,forEach:function(O,Z,ut){tt(O,function(){Z.apply(this,arguments)},ut)},count:function(O){var Z=0;return tt(O,function(){Z++}),Z},toArray:function(O){return tt(O,function(Z){return Z})||[]},only:function(O){if(!w(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},bt.Component=X,bt.Fragment=n,bt.Profiler=o,bt.PureComponent=et,bt.StrictMode=r,bt.Suspense=g,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=vt,bt.act=function(){throw Error("act(...) is not supported in production builds of React.")},bt.cache=function(O){return function(){return O.apply(null,arguments)}},bt.cloneElement=function(O,Z,ut){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var it=q({},O.props),st=O.key,Rt=void 0;if(Z!=null)for(wt in Z.ref!==void 0&&(Rt=void 0),Z.key!==void 0&&(st=""+Z.key),Z)!Dt.call(Z,wt)||wt==="key"||wt==="__self"||wt==="__source"||wt==="ref"&&Z.ref===void 0||(it[wt]=Z[wt]);var wt=arguments.length-2;if(wt===1)it.children=ut;else if(1<wt){for(var me=Array(wt),jt=0;jt<wt;jt++)me[jt]=arguments[jt+2];it.children=me}return P(O.type,st,void 0,void 0,Rt,it)},bt.createContext=function(O){return O={$$typeof:f,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},bt.createElement=function(O,Z,ut){var it,st={},Rt=null;if(Z!=null)for(it in Z.key!==void 0&&(Rt=""+Z.key),Z)Dt.call(Z,it)&&it!=="key"&&it!=="__self"&&it!=="__source"&&(st[it]=Z[it]);var wt=arguments.length-2;if(wt===1)st.children=ut;else if(1<wt){for(var me=Array(wt),jt=0;jt<wt;jt++)me[jt]=arguments[jt+2];st.children=me}if(O&&O.defaultProps)for(it in wt=O.defaultProps,wt)st[it]===void 0&&(st[it]=wt[it]);return P(O,Rt,void 0,void 0,null,st)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(O){return{$$typeof:m,render:O}},bt.isValidElement=w,bt.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:_t}},bt.memo=function(O,Z){return{$$typeof:_,type:O,compare:Z===void 0?null:Z}},bt.startTransition=function(O){var Z=vt.T,ut={};vt.T=ut;try{var it=O(),st=vt.S;st!==null&&st(ut,it),typeof it=="object"&&it!==null&&typeof it.then=="function"&&it.then(Ht,ft)}catch(Rt){ft(Rt)}finally{vt.T=Z}},bt.unstable_useCacheRefresh=function(){return vt.H.useCacheRefresh()},bt.use=function(O){return vt.H.use(O)},bt.useActionState=function(O,Z,ut){return vt.H.useActionState(O,Z,ut)},bt.useCallback=function(O,Z){return vt.H.useCallback(O,Z)},bt.useContext=function(O){return vt.H.useContext(O)},bt.useDebugValue=function(){},bt.useDeferredValue=function(O,Z){return vt.H.useDeferredValue(O,Z)},bt.useEffect=function(O,Z){return vt.H.useEffect(O,Z)},bt.useId=function(){return vt.H.useId()},bt.useImperativeHandle=function(O,Z,ut){return vt.H.useImperativeHandle(O,Z,ut)},bt.useInsertionEffect=function(O,Z){return vt.H.useInsertionEffect(O,Z)},bt.useLayoutEffect=function(O,Z){return vt.H.useLayoutEffect(O,Z)},bt.useMemo=function(O,Z){return vt.H.useMemo(O,Z)},bt.useOptimistic=function(O,Z){return vt.H.useOptimistic(O,Z)},bt.useReducer=function(O,Z,ut){return vt.H.useReducer(O,Z,ut)},bt.useRef=function(O){return vt.H.useRef(O)},bt.useState=function(O){return vt.H.useState(O)},bt.useSyncExternalStore=function(O,Z,ut){return vt.H.useSyncExternalStore(O,Z,ut)},bt.useTransition=function(){return vt.H.useTransition()},bt.version="19.0.0",bt}var by;function _m(){return by||(by=1,Dd.exports=IS()),Dd.exports}var mt=_m();const CS=wE(mt);var Od={exports:{}},Sl={},Md={exports:{}},Vd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry;function NS(){return Ry||(Ry=1,function(s){function t(tt,_t){var ft=tt.length;tt.push(_t);t:for(;0<ft;){var Ht=ft-1>>>1,O=tt[Ht];if(0<o(O,_t))tt[Ht]=_t,tt[ft]=O,ft=Ht;else break t}}function n(tt){return tt.length===0?null:tt[0]}function r(tt){if(tt.length===0)return null;var _t=tt[0],ft=tt.pop();if(ft!==_t){tt[0]=ft;t:for(var Ht=0,O=tt.length,Z=O>>>1;Ht<Z;){var ut=2*(Ht+1)-1,it=tt[ut],st=ut+1,Rt=tt[st];if(0>o(it,ft))st<O&&0>o(Rt,it)?(tt[Ht]=Rt,tt[st]=ft,Ht=st):(tt[Ht]=it,tt[ut]=ft,Ht=ut);else if(st<O&&0>o(Rt,ft))tt[Ht]=Rt,tt[st]=ft,Ht=st;else break t}}return _t}function o(tt,_t){var ft=tt.sortIndex-_t.sortIndex;return ft!==0?ft:tt.id-_t.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();s.unstable_now=function(){return f.now()-m}}var g=[],_=[],E=1,S=null,C=3,V=!1,q=!1,Q=!1,X=typeof setTimeout=="function"?setTimeout:null,ct=typeof clearTimeout=="function"?clearTimeout:null,et=typeof setImmediate<"u"?setImmediate:null;function nt(tt){for(var _t=n(_);_t!==null;){if(_t.callback===null)r(_);else if(_t.startTime<=tt)r(_),_t.sortIndex=_t.expirationTime,t(g,_t);else break;_t=n(_)}}function Tt(tt){if(Q=!1,nt(tt),!q)if(n(g)!==null)q=!0,Ee();else{var _t=n(_);_t!==null&&de(Tt,_t.startTime-tt)}}var vt=!1,Dt=-1,P=5,I=-1;function w(){return!(s.unstable_now()-I<P)}function D(){if(vt){var tt=s.unstable_now();I=tt;var _t=!0;try{t:{q=!1,Q&&(Q=!1,ct(Dt),Dt=-1),V=!0;var ft=C;try{e:{for(nt(tt),S=n(g);S!==null&&!(S.expirationTime>tt&&w());){var Ht=S.callback;if(typeof Ht=="function"){S.callback=null,C=S.priorityLevel;var O=Ht(S.expirationTime<=tt);if(tt=s.unstable_now(),typeof O=="function"){S.callback=O,nt(tt),_t=!0;break e}S===n(g)&&r(g),nt(tt)}else r(g);S=n(g)}if(S!==null)_t=!0;else{var Z=n(_);Z!==null&&de(Tt,Z.startTime-tt),_t=!1}}break t}finally{S=null,C=ft,V=!1}_t=void 0}}finally{_t?k():vt=!1}}}var k;if(typeof et=="function")k=function(){et(D)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,N=j.port2;j.port1.onmessage=D,k=function(){N.postMessage(null)}}else k=function(){X(D,0)};function Ee(){vt||(vt=!0,k())}function de(tt,_t){Dt=X(function(){tt(s.unstable_now())},_t)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(tt){tt.callback=null},s.unstable_continueExecution=function(){q||V||(q=!0,Ee())},s.unstable_forceFrameRate=function(tt){0>tt||125<tt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<tt?Math.floor(1e3/tt):5},s.unstable_getCurrentPriorityLevel=function(){return C},s.unstable_getFirstCallbackNode=function(){return n(g)},s.unstable_next=function(tt){switch(C){case 1:case 2:case 3:var _t=3;break;default:_t=C}var ft=C;C=_t;try{return tt()}finally{C=ft}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(tt,_t){switch(tt){case 1:case 2:case 3:case 4:case 5:break;default:tt=3}var ft=C;C=tt;try{return _t()}finally{C=ft}},s.unstable_scheduleCallback=function(tt,_t,ft){var Ht=s.unstable_now();switch(typeof ft=="object"&&ft!==null?(ft=ft.delay,ft=typeof ft=="number"&&0<ft?Ht+ft:Ht):ft=Ht,tt){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ft+O,tt={id:E++,callback:_t,priorityLevel:tt,startTime:ft,expirationTime:O,sortIndex:-1},ft>Ht?(tt.sortIndex=ft,t(_,tt),n(g)===null&&tt===n(_)&&(Q?(ct(Dt),Dt=-1):Q=!0,de(Tt,ft-Ht))):(tt.sortIndex=O,t(g,tt),q||V||(q=!0,Ee())),tt},s.unstable_shouldYield=w,s.unstable_wrapCallback=function(tt){var _t=C;return function(){var ft=C;C=_t;try{return tt.apply(this,arguments)}finally{C=ft}}}}(Vd)),Vd}var Iy;function DS(){return Iy||(Iy=1,Md.exports=NS()),Md.exports}var xd={exports:{}},Qe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cy;function OS(){if(Cy)return Qe;Cy=1;var s=_m();function t(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)_+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,_,E){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:g,containerInfo:_,implementation:E}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Qe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Qe.createPortal=function(g,_){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return u(g,_,null,E)},Qe.flushSync=function(g){var _=f.T,E=r.p;try{if(f.T=null,r.p=2,g)return g()}finally{f.T=_,r.p=E,r.d.f()}},Qe.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(g,_))},Qe.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Qe.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var E=_.as,S=m(E,_.crossOrigin),C=typeof _.integrity=="string"?_.integrity:void 0,V=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;E==="style"?r.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:S,integrity:C,fetchPriority:V}):E==="script"&&r.d.X(g,{crossOrigin:S,integrity:C,fetchPriority:V,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Qe.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var E=m(_.as,_.crossOrigin);r.d.M(g,{crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(g)},Qe.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var E=_.as,S=m(E,_.crossOrigin);r.d.L(g,E,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Qe.preloadModule=function(g,_){if(typeof g=="string")if(_){var E=m(_.as,_.crossOrigin);r.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(g)},Qe.requestFormReset=function(g){r.d.r(g)},Qe.unstable_batchedUpdates=function(g,_){return g(_)},Qe.useFormState=function(g,_,E){return f.H.useFormState(g,_,E)},Qe.useFormStatus=function(){return f.H.useHostTransitionStatus()},Qe.version="19.0.0",Qe}var Ny;function MS(){if(Ny)return xd.exports;Ny=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),xd.exports=OS(),xd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy;function VS(){if(Dy)return Sl;Dy=1;var s=DS(),t=_m(),n=MS();function r(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var u=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),V=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),ct=Symbol.for("react.memo"),et=Symbol.for("react.lazy"),nt=Symbol.for("react.offscreen"),Tt=Symbol.for("react.memo_cache_sentinel"),vt=Symbol.iterator;function Dt(e){return e===null||typeof e!="object"?null:(e=vt&&e[vt]||e["@@iterator"],typeof e=="function"?e:null)}var P=Symbol.for("react.client.reference");function I(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===P?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case g:return"Fragment";case m:return"Portal";case E:return"Profiler";case _:return"StrictMode";case Q:return"Suspense";case X:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case V:return(e.displayName||"Context")+".Provider";case C:return(e._context.displayName||"Context")+".Consumer";case q:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ct:return i=e.displayName||null,i!==null?i:I(e.type)||"Memo";case et:i=e._payload,e=e._init;try{return I(e(i))}catch{}}return null}var w=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=Object.assign,k,j;function N(e){if(k===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);k=i&&i[1]||"",j=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+k+e+j}var Ee=!1;function de(e,i){if(!e||Ee)return"";Ee=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(F){var B=F}Reflect.construct(e,[],W)}else{try{W.call()}catch(F){B=F}e.call(W.prototype)}}else{try{throw Error()}catch(F){B=F}(W=e())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(F){if(F&&B&&typeof F.stack=="string")return[F.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],T=d[1];if(v&&T){var R=v.split(`
`),x=T.split(`
`);for(h=l=0;l<R.length&&!R[l].includes("DetermineComponentFrameRoot");)l++;for(;h<x.length&&!x[h].includes("DetermineComponentFrameRoot");)h++;if(l===R.length||h===x.length)for(l=R.length-1,h=x.length-1;1<=l&&0<=h&&R[l]!==x[h];)h--;for(;1<=l&&0<=h;l--,h--)if(R[l]!==x[h]){if(l!==1||h!==1)do if(l--,h--,0>h||R[l]!==x[h]){var G=`
`+R[l].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=l&&0<=h);break}}}finally{Ee=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?N(a):""}function tt(e){switch(e.tag){case 26:case 27:case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 15:return e=de(e.type,!1),e;case 11:return e=de(e.type.render,!1),e;case 1:return e=de(e.type,!0),e;default:return""}}function _t(e){try{var i="";do i+=tt(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function ft(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function Ht(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function O(e){if(ft(e)!==e)throw Error(r(188))}function Z(e){var i=e.alternate;if(!i){if(i=ft(e),i===null)throw Error(r(188));return i!==e?null:e}for(var a=e,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return O(h),e;if(d===l)return O(h),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,T=h.child;T;){if(T===a){v=!0,a=h,l=d;break}if(T===l){v=!0,l=h,a=d;break}T=T.sibling}if(!v){for(T=d.child;T;){if(T===a){v=!0,a=d,l=h;break}if(T===l){v=!0,l=d,a=h;break}T=T.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:i}function ut(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=ut(e),i!==null)return i;e=e.sibling}return null}var it=Array.isArray,st=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Rt={pending:!1,data:null,method:null,action:null},wt=[],me=-1;function jt(e){return{current:e}}function se(e){0>me||(e.current=wt[me],wt[me]=null,me--)}function Kt(e,i){me++,wt[me]=e.current,e.current=i}var Ze=jt(null),_i=jt(null),En=jt(null),ns=jt(null);function is(e,i){switch(Kt(En,i),Kt(_i,e),Kt(Ze,null),e=i.nodeType,e){case 9:case 11:i=(i=i.documentElement)&&(i=i.namespaceURI)?W_(i):0;break;default:if(e=e===8?i.parentNode:i,i=e.tagName,e=e.namespaceURI)e=W_(e),i=Z_(e,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}se(Ze),Kt(Ze,i)}function yi(){se(Ze),se(_i),se(En)}function _o(e){e.memoizedState!==null&&Kt(ns,e);var i=Ze.current,a=Z_(i,e.type);i!==a&&(Kt(_i,e),Kt(Ze,a))}function Jr(e){_i.current===e&&(se(Ze),se(_i)),ns.current===e&&(se(ns),_l._currentValue=Rt)}var ta=Object.prototype.hasOwnProperty,ar=s.unstable_scheduleCallback,ea=s.unstable_cancelCallback,Dh=s.unstable_shouldYield,yo=s.unstable_requestPaint,on=s.unstable_now,lu=s.unstable_getCurrentPriorityLevel,Te=s.unstable_ImmediatePriority,Ne=s.unstable_UserBlockingPriority,vi=s.unstable_NormalPriority,uu=s.unstable_LowPriority,vo=s.unstable_IdlePriority,Oh=s.log,or=s.unstable_setDisableYieldValue,ss=null,Ge=null;function Eo(e){if(Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(ss,e,void 0,(e.current.flags&128)===128)}catch{}}function Xn(e){if(typeof Oh=="function"&&or(e),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(ss,e)}catch{}}var Je=Math.clz32?Math.clz32:hu,To=Math.log,cu=Math.LN2;function hu(e){return e>>>=0,e===0?32:31-(To(e)/cu|0)|0}var Wn=128,rs=4194304;function zn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Tn(e,i){var a=e.pendingLanes;if(a===0)return 0;var l=0,h=e.suspendedLanes,d=e.pingedLanes,v=e.warmLanes;e=e.finishedLanes!==0;var T=a&134217727;return T!==0?(a=T&~h,a!==0?l=zn(a):(d&=T,d!==0?l=zn(d):e||(v=T&~v,v!==0&&(l=zn(v))))):(T=a&~h,T!==0?l=zn(T):d!==0?l=zn(d):e||(v=a&~v,v!==0&&(l=zn(v)))),l===0?0:i!==0&&i!==l&&(i&h)===0&&(h=l&-l,v=i&-i,h>=v||h===32&&(v&4194176)!==0)?i:l}function as(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function na(e,i){switch(e){case 1:case 2:case 4:case 8:return i+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ao(){var e=Wn;return Wn<<=1,(Wn&4194176)===0&&(Wn=128),e}function os(){var e=rs;return rs<<=1,(rs&62914560)===0&&(rs=4194304),e}function ia(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function ue(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function fu(e,i,a,l,h,d){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var T=e.entanglements,R=e.expirationTimes,x=e.hiddenUpdates;for(a=v&~a;0<a;){var G=31-Je(a),W=1<<G;T[G]=0,R[G]=-1;var B=x[G];if(B!==null)for(x[G]=null,G=0;G<B.length;G++){var F=B[G];F!==null&&(F.lane&=-536870913)}a&=~W}l!==0&&ls(e,l,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~i))}function ls(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-Je(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194218}function us(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var l=31-Je(a),h=1<<l;h&i|e[l]&i&&(e[l]|=i),a&=~h}}function du(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function mu(){var e=st.p;return e!==0?e:(e=window.event,e===void 0?32:gy(e.type))}function cs(e,i){var a=st.p;try{return st.p=e,i()}finally{st.p=a}}var Zn=Math.random().toString(36).slice(2),De="__reactFiber$"+Zn,Ae="__reactProps$"+Zn,Ei="__reactContainer$"+Zn,lr="__reactEvents$"+Zn,sa="__reactListeners$"+Zn,Jn="__reactHandles$"+Zn,So="__reactResources$"+Zn,hs="__reactMarker$"+Zn;function ur(e){delete e[De],delete e[Ae],delete e[lr],delete e[sa],delete e[Jn]}function Bn(e){var i=e[De];if(i)return i;for(var a=e.parentNode;a;){if(i=a[Ei]||a[De]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=ey(e);e!==null;){if(a=e[De])return a;e=ey(e)}return i}e=a,a=e.parentNode}return null}function Ti(e){if(e=e[De]||e[Ei]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function fs(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(r(33))}function ds(e){var i=e[So];return i||(i=e[So]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function te(e){e[hs]=!0}var wo=new Set,ra={};function fn(e,i){ln(e,i),ln(e+"Capture",i)}function ln(e,i){for(ra[e]=i,e=0;e<i.length;e++)wo.add(i[e])}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bo={},Ro={};function pu(e){return ta.call(Ro,e)?!0:ta.call(bo,e)?!1:Mh.test(e)?Ro[e]=!0:(bo[e]=!0,!1)}function ms(e,i,a){if(pu(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function ps(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function An(e,i,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+l)}}function tn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function gu(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Vh(e){var i=gu(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),l=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function cr(e){e._valueTracker||(e._valueTracker=Vh(e))}function Io(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return e&&(l=gu(e)?e.checked?"true":"false":e.value),e=l,e!==a?(i.setValue(e),!0):!1}function aa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ai=/[\n"\\]/g;function re(e){return e.replace(Ai,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function gs(e,i,a,l,h,d,v,T){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+tn(i)):e.value!==""+tn(i)&&(e.value=""+tn(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?oa(e,v,tn(i)):a!=null?oa(e,v,tn(a)):l!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+tn(T):e.removeAttribute("name")}function hr(e,i,a,l,h,d,v,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+tn(a):"",i=i!=null?""+tn(i):a,T||i===e.value||(e.value=i),e.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=T?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function oa(e,i,a){i==="number"&&aa(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function zt(e,i,a,l){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&l&&(e[a].defaultSelected=!0)}else{for(a=""+tn(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function fr(e,i,a){if(i!=null&&(i=""+tn(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+tn(a):""}function _s(e,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(it(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=tn(i),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function Sn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var xh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Co(e,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,a):typeof a!="number"||a===0||xh.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function _u(e,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Co(e,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Co(e,d,i[d])}function No(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ph=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ti(e){return Ph.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var wn=null;function la(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Si=null,wi=null;function bi(e){var i=Ti(e);if(i&&(e=i.stateNode)){var a=e[Ae]||null;t:switch(e=i.stateNode,i.type){case"input":if(gs(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+re(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var h=l[Ae]||null;if(!h)throw Error(r(90));gs(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===e.form&&Io(l)}break t;case"textarea":fr(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&zt(e,!!a.multiple,i,!1)}}}var Do=!1;function yu(e,i,a){if(Do)return e(i,a);Do=!0;try{var l=e(i);return l}finally{if(Do=!1,(Si!==null||wi!==null)&&(uc(),Si&&(i=Si,e=wi,wi=Si=null,bi(i),e)))for(i=0;i<e.length;i++)bi(e[i])}}function dr(e,i){var a=e.stateNode;if(a===null)return null;var l=a[Ae]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var bn=!1;if(dn)try{var mr={};Object.defineProperty(mr,"passive",{get:function(){bn=!0}}),window.addEventListener("test",mr,mr),window.removeEventListener("test",mr,mr)}catch{bn=!1}var ei=null,ys=null,Ri=null;function Oo(){if(Ri)return Ri;var e,i=ys,a=i.length,l,h="value"in ei?ei.value:ei.textContent,d=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return Ri=h.slice(e,1<l?1-l:void 0)}function ni(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function ii(){return!0}function Mo(){return!1}function Oe(e){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(a=e[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ii:Mo,this.isPropagationStopped=Mo,this}return D(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ii)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ii)},persist:function(){},isPersistent:ii}),i}var Ft={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=Oe(Ft),pr=D({},Ft,{view:0,detail:0}),vu=Oe(pr),ca,ha,si,gr=D({},pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==si&&(si&&e.type==="mousemove"?(ca=e.screenX-si.screenX,ha=e.screenY-si.screenY):ha=ca=0,si=e),ca)},movementY:function(e){return"movementY"in e?e.movementY:ha}}),Rn=Oe(gr),Eu=D({},gr,{dataTransfer:0}),Uh=Oe(Eu),_r=D({},pr,{relatedTarget:0}),fa=Oe(_r),Vo=D({},Ft,{animationName:0,elapsedTime:0,pseudoElement:0}),da=Oe(Vo),Tu=D({},Ft,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ma=Oe(Tu),Lh=D({},Ft,{data:0}),xo=Oe(Lh),yr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Au={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ko(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Su[e])?!!i[e]:!1}function vr(){return ko}var wu=D({},pr,{key:function(e){if(e.key){var i=yr[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=ni(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Au[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vr,charCode:function(e){return e.type==="keypress"?ni(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ni(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pa=Oe(wu),bu=D({},gr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Po=Oe(bu),Ii=D({},pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vr}),Ru=Oe(Ii),Iu=D({},Ft,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cu=Oe(Iu),Nu=D({},gr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ga=Oe(Nu),en=D({},Ft,{newState:0,oldState:0}),Du=Oe(en),Ou=[9,13,27,32],ri=dn&&"CompositionEvent"in window,c=null;dn&&"documentMode"in document&&(c=document.documentMode);var p=dn&&"TextEvent"in window&&!c,y=dn&&(!ri||c&&8<c&&11>=c),A=" ",L=!1;function H(e,i){switch(e){case"keyup":return Ou.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function J(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kt=!1;function Se(e,i){switch(e){case"compositionend":return J(i);case"keypress":return i.which!==32?null:(L=!0,A);case"textInput":return e=i.data,e===A&&L?null:e;default:return null}}function Pt(e,i){if(kt)return e==="compositionend"||!ri&&H(e,i)?(e=Oo(),Ri=ys=ei=null,kt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return y&&i.locale!=="ko"?null:i.data;default:return null}}var Me={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function we(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Me[e.type]:i==="textarea"}function Ci(e,i,a,l){Si?wi?wi.push(l):wi=[l]:Si=l,i=mc(i,"onChange"),0<i.length&&(a=new ua("onChange","change",null,a,l),e.push({event:a,listeners:i}))}var Ue=null,ai=null;function Uo(e){K_(e,0)}function Mu(e){var i=fs(e);if(Io(i))return e}function Tp(e,i){if(e==="change")return i}var Ap=!1;if(dn){var jh;if(dn){var zh="oninput"in document;if(!zh){var Sp=document.createElement("div");Sp.setAttribute("oninput","return;"),zh=typeof Sp.oninput=="function"}jh=zh}else jh=!1;Ap=jh&&(!document.documentMode||9<document.documentMode)}function wp(){Ue&&(Ue.detachEvent("onpropertychange",bp),ai=Ue=null)}function bp(e){if(e.propertyName==="value"&&Mu(ai)){var i=[];Ci(i,ai,e,la(e)),yu(Uo,i)}}function eA(e,i,a){e==="focusin"?(wp(),Ue=i,ai=a,Ue.attachEvent("onpropertychange",bp)):e==="focusout"&&wp()}function nA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Mu(ai)}function iA(e,i){if(e==="click")return Mu(i)}function sA(e,i){if(e==="input"||e==="change")return Mu(i)}function rA(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var mn=typeof Object.is=="function"?Object.is:rA;function Lo(e,i){if(mn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!ta.call(i,h)||!mn(e[h],i[h]))return!1}return!0}function Rp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ip(e,i){var a=Rp(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=i&&l>=i)return{node:a,offset:i-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Rp(a)}}function Cp(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Cp(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Np(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=aa(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=aa(e.document)}return i}function Bh(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function aA(e,i){var a=Np(i);i=e.focusedElem;var l=e.selectionRange;if(a!==i&&i&&i.ownerDocument&&Cp(i.ownerDocument.documentElement,i)){if(l!==null&&Bh(i)){if(e=l.start,a=l.end,a===void 0&&(a=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(a,i.value.length);else if(a=(e=i.ownerDocument||document)&&e.defaultView||window,a.getSelection){a=a.getSelection();var h=i.textContent.length,d=Math.min(l.start,h);l=l.end===void 0?d:Math.min(l.end,h),!a.extend&&d>l&&(h=l,l=d,d=h),h=Ip(i,d);var v=Ip(i,l);h&&v&&(a.rangeCount!==1||a.anchorNode!==h.node||a.anchorOffset!==h.offset||a.focusNode!==v.node||a.focusOffset!==v.offset)&&(e=e.createRange(),e.setStart(h.node,h.offset),a.removeAllRanges(),d>l?(a.addRange(e),a.extend(v.node,v.offset)):(e.setEnd(v.node,v.offset),a.addRange(e)))}}for(e=[],a=i;a=a.parentNode;)a.nodeType===1&&e.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)a=e[i],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var oA=dn&&"documentMode"in document&&11>=document.documentMode,_a=null,qh=null,jo=null,Hh=!1;function Dp(e,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Hh||_a==null||_a!==aa(l)||(l=_a,"selectionStart"in l&&Bh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),jo&&Lo(jo,l)||(jo=l,l=mc(qh,"onSelect"),0<l.length&&(i=new ua("onSelect","select",null,i,a),e.push({event:i,listeners:l}),i.target=_a)))}function Er(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var ya={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionrun:Er("Transition","TransitionRun"),transitionstart:Er("Transition","TransitionStart"),transitioncancel:Er("Transition","TransitionCancel"),transitionend:Er("Transition","TransitionEnd")},Fh={},Op={};dn&&(Op=document.createElement("div").style,"AnimationEvent"in window||(delete ya.animationend.animation,delete ya.animationiteration.animation,delete ya.animationstart.animation),"TransitionEvent"in window||delete ya.transitionend.transition);function Tr(e){if(Fh[e])return Fh[e];if(!ya[e])return e;var i=ya[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Op)return Fh[e]=i[a];return e}var Mp=Tr("animationend"),Vp=Tr("animationiteration"),xp=Tr("animationstart"),lA=Tr("transitionrun"),uA=Tr("transitionstart"),cA=Tr("transitioncancel"),kp=Tr("transitionend"),Pp=new Map,Up="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function qn(e,i){Pp.set(e,i),fn(i,[e])}var In=[],va=0,Gh=0;function Vu(){for(var e=va,i=Gh=va=0;i<e;){var a=In[i];In[i++]=null;var l=In[i];In[i++]=null;var h=In[i];In[i++]=null;var d=In[i];if(In[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&Lp(a,h,d)}}function xu(e,i,a,l){In[va++]=e,In[va++]=i,In[va++]=a,In[va++]=l,Gh|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Kh(e,i,a,l){return xu(e,i,a,l),ku(e)}function vs(e,i){return xu(e,null,null,i),ku(e)}function Lp(e,i,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;h&&i!==null&&e.tag===3&&(d=e.stateNode,h=31-Je(a),d=d.hiddenUpdates,e=d[h],e===null?d[h]=[i]:e.push(i),i.lane=a|536870912)}function ku(e){if(50<cl)throw cl=0,Jf=null,Error(r(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Ea={},jp=new WeakMap;function Cn(e,i){if(typeof e=="object"&&e!==null){var a=jp.get(e);return a!==void 0?a:(i={value:e,source:i,stack:_t(i)},jp.set(e,i),i)}return{value:e,source:i,stack:_t(i)}}var Ta=[],Aa=0,Pu=null,Uu=0,Nn=[],Dn=0,Ar=null,Ni=1,Di="";function Sr(e,i){Ta[Aa++]=Uu,Ta[Aa++]=Pu,Pu=e,Uu=i}function zp(e,i,a){Nn[Dn++]=Ni,Nn[Dn++]=Di,Nn[Dn++]=Ar,Ar=e;var l=Ni;e=Di;var h=32-Je(l)-1;l&=~(1<<h),a+=1;var d=32-Je(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Ni=1<<32-Je(i)+h|a<<h|l,Di=d+e}else Ni=1<<d|a<<h|l,Di=e}function Qh(e){e.return!==null&&(Sr(e,1),zp(e,1,0))}function Yh(e){for(;e===Pu;)Pu=Ta[--Aa],Ta[Aa]=null,Uu=Ta[--Aa],Ta[Aa]=null;for(;e===Ar;)Ar=Nn[--Dn],Nn[Dn]=null,Di=Nn[--Dn],Nn[Dn]=null,Ni=Nn[--Dn],Nn[Dn]=null}var nn=null,Le=null,Bt=!1,Hn=null,oi=!1,$h=Error(r(519));function wr(e){var i=Error(r(418,""));throw qo(Cn(i,e)),$h}function Bp(e){var i=e.stateNode,a=e.type,l=e.memoizedProps;switch(i[De]=e,i[Ae]=l,a){case"dialog":Vt("cancel",i),Vt("close",i);break;case"iframe":case"object":case"embed":Vt("load",i);break;case"video":case"audio":for(a=0;a<fl.length;a++)Vt(fl[a],i);break;case"source":Vt("error",i);break;case"img":case"image":case"link":Vt("error",i),Vt("load",i);break;case"details":Vt("toggle",i);break;case"input":Vt("invalid",i),hr(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),cr(i);break;case"select":Vt("invalid",i);break;case"textarea":Vt("invalid",i),_s(i,l.value,l.defaultValue,l.children),cr(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||X_(i.textContent,a)?(l.popover!=null&&(Vt("beforetoggle",i),Vt("toggle",i)),l.onScroll!=null&&Vt("scroll",i),l.onScrollEnd!=null&&Vt("scrollend",i),l.onClick!=null&&(i.onclick=pc),i=!0):i=!1,i||wr(e)}function qp(e){for(nn=e.return;nn;)switch(nn.tag){case 3:case 27:oi=!0;return;case 5:case 13:oi=!1;return;default:nn=nn.return}}function zo(e){if(e!==nn)return!1;if(!Bt)return qp(e),Bt=!0,!1;var i=!1,a;if((a=e.tag!==3&&e.tag!==27)&&((a=e.tag===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||gd(e.type,e.memoizedProps)),a=!a),a&&(i=!0),i&&Le&&wr(e),qp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){Le=Gn(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}Le=null}}else Le=nn?Gn(e.stateNode.nextSibling):null;return!0}function Bo(){Le=nn=null,Bt=!1}function qo(e){Hn===null?Hn=[e]:Hn.push(e)}var Ho=Error(r(460)),Hp=Error(r(474)),Xh={then:function(){}};function Fp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Lu(){}function Gp(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Lu,Lu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,e===Ho?Error(r(483)):e;default:if(typeof i.status=="string")i.then(Lu,Lu);else{if(e=Wt,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,e===Ho?Error(r(483)):e}throw Fo=i,Ho}}var Fo=null;function Kp(){if(Fo===null)throw Error(r(459));var e=Fo;return Fo=null,e}var Sa=null,Go=0;function ju(e){var i=Go;return Go+=1,Sa===null&&(Sa=[]),Gp(Sa,e,i)}function Ko(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function zu(e,i){throw i.$$typeof===u?Error(r(525)):(e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Qp(e){var i=e._init;return i(e._payload)}function Yp(e){function i(U,M){if(e){var z=U.deletions;z===null?(U.deletions=[M],U.flags|=16):z.push(M)}}function a(U,M){if(!e)return null;for(;M!==null;)i(U,M),M=M.sibling;return null}function l(U){for(var M=new Map;U!==null;)U.key!==null?M.set(U.key,U):M.set(U.index,U),U=U.sibling;return M}function h(U,M){return U=Os(U,M),U.index=0,U.sibling=null,U}function d(U,M,z){return U.index=z,e?(z=U.alternate,z!==null?(z=z.index,z<M?(U.flags|=33554434,M):z):(U.flags|=33554434,M)):(U.flags|=1048576,M)}function v(U){return e&&U.alternate===null&&(U.flags|=33554434),U}function T(U,M,z,K){return M===null||M.tag!==6?(M=Gf(z,U.mode,K),M.return=U,M):(M=h(M,z),M.return=U,M)}function R(U,M,z,K){var ot=z.type;return ot===g?G(U,M,z.props.children,K,z.key):M!==null&&(M.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===et&&Qp(ot)===M.type)?(M=h(M,z.props),Ko(M,z),M.return=U,M):(M=sc(z.type,z.key,z.props,null,U.mode,K),Ko(M,z),M.return=U,M)}function x(U,M,z,K){return M===null||M.tag!==4||M.stateNode.containerInfo!==z.containerInfo||M.stateNode.implementation!==z.implementation?(M=Kf(z,U.mode,K),M.return=U,M):(M=h(M,z.children||[]),M.return=U,M)}function G(U,M,z,K,ot){return M===null||M.tag!==7?(M=xr(z,U.mode,K,ot),M.return=U,M):(M=h(M,z),M.return=U,M)}function W(U,M,z){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Gf(""+M,U.mode,z),M.return=U,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case f:return z=sc(M.type,M.key,M.props,null,U.mode,z),Ko(z,M),z.return=U,z;case m:return M=Kf(M,U.mode,z),M.return=U,M;case et:var K=M._init;return M=K(M._payload),W(U,M,z)}if(it(M)||Dt(M))return M=xr(M,U.mode,z,null),M.return=U,M;if(typeof M.then=="function")return W(U,ju(M),z);if(M.$$typeof===V)return W(U,ec(U,M),z);zu(U,M)}return null}function B(U,M,z,K){var ot=M!==null?M.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return ot!==null?null:T(U,M,""+z,K);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case f:return z.key===ot?R(U,M,z,K):null;case m:return z.key===ot?x(U,M,z,K):null;case et:return ot=z._init,z=ot(z._payload),B(U,M,z,K)}if(it(z)||Dt(z))return ot!==null?null:G(U,M,z,K,null);if(typeof z.then=="function")return B(U,M,ju(z),K);if(z.$$typeof===V)return B(U,M,ec(U,z),K);zu(U,z)}return null}function F(U,M,z,K,ot){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return U=U.get(z)||null,T(M,U,""+K,ot);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case f:return U=U.get(K.key===null?z:K.key)||null,R(M,U,K,ot);case m:return U=U.get(K.key===null?z:K.key)||null,x(M,U,K,ot);case et:var Ct=K._init;return K=Ct(K._payload),F(U,M,z,K,ot)}if(it(K)||Dt(K))return U=U.get(z)||null,G(M,U,K,ot,null);if(typeof K.then=="function")return F(U,M,z,ju(K),ot);if(K.$$typeof===V)return F(U,M,z,ec(M,K),ot);zu(M,K)}return null}function lt(U,M,z,K){for(var ot=null,Ct=null,ht=M,pt=M=0,ke=null;ht!==null&&pt<z.length;pt++){ht.index>pt?(ke=ht,ht=null):ke=ht.sibling;var qt=B(U,ht,z[pt],K);if(qt===null){ht===null&&(ht=ke);break}e&&ht&&qt.alternate===null&&i(U,ht),M=d(qt,M,pt),Ct===null?ot=qt:Ct.sibling=qt,Ct=qt,ht=ke}if(pt===z.length)return a(U,ht),Bt&&Sr(U,pt),ot;if(ht===null){for(;pt<z.length;pt++)ht=W(U,z[pt],K),ht!==null&&(M=d(ht,M,pt),Ct===null?ot=ht:Ct.sibling=ht,Ct=ht);return Bt&&Sr(U,pt),ot}for(ht=l(ht);pt<z.length;pt++)ke=F(ht,U,pt,z[pt],K),ke!==null&&(e&&ke.alternate!==null&&ht.delete(ke.key===null?pt:ke.key),M=d(ke,M,pt),Ct===null?ot=ke:Ct.sibling=ke,Ct=ke);return e&&ht.forEach(function(Ls){return i(U,Ls)}),Bt&&Sr(U,pt),ot}function At(U,M,z,K){if(z==null)throw Error(r(151));for(var ot=null,Ct=null,ht=M,pt=M=0,ke=null,qt=z.next();ht!==null&&!qt.done;pt++,qt=z.next()){ht.index>pt?(ke=ht,ht=null):ke=ht.sibling;var Ls=B(U,ht,qt.value,K);if(Ls===null){ht===null&&(ht=ke);break}e&&ht&&Ls.alternate===null&&i(U,ht),M=d(Ls,M,pt),Ct===null?ot=Ls:Ct.sibling=Ls,Ct=Ls,ht=ke}if(qt.done)return a(U,ht),Bt&&Sr(U,pt),ot;if(ht===null){for(;!qt.done;pt++,qt=z.next())qt=W(U,qt.value,K),qt!==null&&(M=d(qt,M,pt),Ct===null?ot=qt:Ct.sibling=qt,Ct=qt);return Bt&&Sr(U,pt),ot}for(ht=l(ht);!qt.done;pt++,qt=z.next())qt=F(ht,U,pt,qt.value,K),qt!==null&&(e&&qt.alternate!==null&&ht.delete(qt.key===null?pt:qt.key),M=d(qt,M,pt),Ct===null?ot=qt:Ct.sibling=qt,Ct=qt);return e&&ht.forEach(function(wS){return i(U,wS)}),Bt&&Sr(U,pt),ot}function le(U,M,z,K){if(typeof z=="object"&&z!==null&&z.type===g&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case f:t:{for(var ot=z.key;M!==null;){if(M.key===ot){if(ot=z.type,ot===g){if(M.tag===7){a(U,M.sibling),K=h(M,z.props.children),K.return=U,U=K;break t}}else if(M.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===et&&Qp(ot)===M.type){a(U,M.sibling),K=h(M,z.props),Ko(K,z),K.return=U,U=K;break t}a(U,M);break}else i(U,M);M=M.sibling}z.type===g?(K=xr(z.props.children,U.mode,K,z.key),K.return=U,U=K):(K=sc(z.type,z.key,z.props,null,U.mode,K),Ko(K,z),K.return=U,U=K)}return v(U);case m:t:{for(ot=z.key;M!==null;){if(M.key===ot)if(M.tag===4&&M.stateNode.containerInfo===z.containerInfo&&M.stateNode.implementation===z.implementation){a(U,M.sibling),K=h(M,z.children||[]),K.return=U,U=K;break t}else{a(U,M);break}else i(U,M);M=M.sibling}K=Kf(z,U.mode,K),K.return=U,U=K}return v(U);case et:return ot=z._init,z=ot(z._payload),le(U,M,z,K)}if(it(z))return lt(U,M,z,K);if(Dt(z)){if(ot=Dt(z),typeof ot!="function")throw Error(r(150));return z=ot.call(z),At(U,M,z,K)}if(typeof z.then=="function")return le(U,M,ju(z),K);if(z.$$typeof===V)return le(U,M,ec(U,z),K);zu(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,M!==null&&M.tag===6?(a(U,M.sibling),K=h(M,z),K.return=U,U=K):(a(U,M),K=Gf(z,U.mode,K),K.return=U,U=K),v(U)):a(U,M)}return function(U,M,z,K){try{Go=0;var ot=le(U,M,z,K);return Sa=null,ot}catch(ht){if(ht===Ho)throw ht;var Ct=xn(29,ht,null,U.mode);return Ct.lanes=K,Ct.return=U,Ct}finally{}}}var br=Yp(!0),$p=Yp(!1),wa=jt(null),Bu=jt(0);function Xp(e,i){e=Bi,Kt(Bu,e),Kt(wa,i),Bi=e|i.baseLanes}function Wh(){Kt(Bu,Bi),Kt(wa,wa.current)}function Zh(){Bi=Bu.current,se(wa),se(Bu)}var On=jt(null),li=null;function Es(e){var i=e.alternate;Kt(be,be.current&1),Kt(On,e),li===null&&(i===null||wa.current!==null||i.memoizedState!==null)&&(li=e)}function Wp(e){if(e.tag===22){if(Kt(be,be.current),Kt(On,e),li===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(li=e)}}else Ts()}function Ts(){Kt(be,be.current),Kt(On,On.current)}function Oi(e){se(On),li===e&&(li=null),se(be)}var be=jt(0);function qu(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var hA=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},fA=s.unstable_scheduleCallback,dA=s.unstable_NormalPriority,Re={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jh(){return{controller:new hA,data:new Map,refCount:0}}function Qo(e){e.refCount--,e.refCount===0&&fA(dA,function(){e.controller.abort()})}var Yo=null,tf=0,ba=0,Ra=null;function mA(e,i){if(Yo===null){var a=Yo=[];tf=0,ba=od(),Ra={status:"pending",value:void 0,then:function(l){a.push(l)}}}return tf++,i.then(Zp,Zp),i}function Zp(){if(--tf===0&&Yo!==null){Ra!==null&&(Ra.status="fulfilled");var e=Yo;Yo=null,ba=0,Ra=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function pA(e,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Jp=w.S;w.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&mA(e,i),Jp!==null&&Jp(e,i)};var Rr=jt(null);function ef(){var e=Rr.current;return e!==null?e:Wt.pooledCache}function Hu(e,i){i===null?Kt(Rr,Rr.current):Kt(Rr,i.pool)}function tg(){var e=ef();return e===null?null:{parent:Re._currentValue,pool:e}}var As=0,It=null,Yt=null,pe=null,Fu=!1,Ia=!1,Ir=!1,Gu=0,$o=0,Ca=null,gA=0;function ce(){throw Error(r(321))}function nf(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!mn(e[a],i[a]))return!1;return!0}function sf(e,i,a,l,h,d){return As=d,It=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,w.H=e===null||e.memoizedState===null?Cr:Ss,Ir=!1,d=a(l,h),Ir=!1,Ia&&(d=ng(i,a,l,h)),eg(e),d}function eg(e){w.H=ui;var i=Yt!==null&&Yt.next!==null;if(As=0,pe=Yt=It=null,Fu=!1,$o=0,Ca=null,i)throw Error(r(300));e===null||Ve||(e=e.dependencies,e!==null&&tc(e)&&(Ve=!0))}function ng(e,i,a,l){It=e;var h=0;do{if(Ia&&(Ca=null),$o=0,Ia=!1,25<=h)throw Error(r(301));if(h+=1,pe=Yt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}w.H=Nr,d=i(a,l)}while(Ia);return d}function _A(){var e=w.H,i=e.useState()[0];return i=typeof i.then=="function"?Xo(i):i,e=e.useState()[0],(Yt!==null?Yt.memoizedState:null)!==e&&(It.flags|=1024),i}function rf(){var e=Gu!==0;return Gu=0,e}function af(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function of(e){if(Fu){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Fu=!1}As=0,pe=Yt=It=null,Ia=!1,$o=Gu=0,Ca=null}function un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?It.memoizedState=pe=e:pe=pe.next=e,pe}function ge(){if(Yt===null){var e=It.alternate;e=e!==null?e.memoizedState:null}else e=Yt.next;var i=pe===null?It.memoizedState:pe.next;if(i!==null)pe=i,Yt=e;else{if(e===null)throw It.alternate===null?Error(r(467)):Error(r(310));Yt=e,e={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},pe===null?It.memoizedState=pe=e:pe=pe.next=e}return pe}var Ku;Ku=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Xo(e){var i=$o;return $o+=1,Ca===null&&(Ca=[]),e=Gp(Ca,e,i),i=It,(pe===null?i.memoizedState:pe.next)===null&&(i=i.alternate,w.H=i===null||i.memoizedState===null?Cr:Ss),e}function Qu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Xo(e);if(e.$$typeof===V)return Ke(e)}throw Error(r(438,String(e)))}function lf(e){var i=null,a=It.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=It.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Ku(),It.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),l=0;l<e;l++)a[l]=Tt;return i.index++,a}function Mi(e,i){return typeof i=="function"?i(e):i}function Yu(e){var i=ge();return uf(i,Yt,e)}function uf(e,i,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=e.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{i=h.next;var T=v=null,R=null,x=i,G=!1;do{var W=x.lane&-536870913;if(W!==x.lane?(Ut&W)===W:(As&W)===W){var B=x.revertLane;if(B===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),W===ba&&(G=!0);else if((As&B)===B){x=x.next,B===ba&&(G=!0);continue}else W={lane:0,revertLane:x.revertLane,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null},R===null?(T=R=W,v=d):R=R.next=W,It.lanes|=B,Ms|=B;W=x.action,Ir&&a(d,W),d=x.hasEagerState?x.eagerState:a(d,W)}else B={lane:W,revertLane:x.revertLane,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null},R===null?(T=R=B,v=d):R=R.next=B,It.lanes|=W,Ms|=W;x=x.next}while(x!==null&&x!==i);if(R===null?v=d:R.next=T,!mn(d,e.memoizedState)&&(Ve=!0,G&&(a=Ra,a!==null)))throw a;e.memoizedState=d,e.baseState=v,e.baseQueue=R,l.lastRenderedState=d}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function cf(e){var i=ge(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=e(d,v.action),v=v.next;while(v!==h);mn(d,i.memoizedState)||(Ve=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function ig(e,i,a){var l=It,h=ge(),d=Bt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var v=!mn((Yt||h).memoizedState,a);if(v&&(h.memoizedState=a,Ve=!0),h=h.queue,df(ag.bind(null,l,h,e),[e]),h.getSnapshot!==i||v||pe!==null&&pe.memoizedState.tag&1){if(l.flags|=2048,Na(9,rg.bind(null,l,h,a,i),{destroy:void 0},null),Wt===null)throw Error(r(349));d||(As&60)!==0||sg(l,i,a)}return a}function sg(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=It.updateQueue,i===null?(i=Ku(),It.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function rg(e,i,a,l){i.value=a,i.getSnapshot=l,og(i)&&lg(e)}function ag(e,i,a){return a(function(){og(i)&&lg(e)})}function og(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!mn(e,a)}catch{return!0}}function lg(e){var i=vs(e,2);i!==null&&sn(i,e,2)}function hf(e){var i=un();if(typeof e=="function"){var a=e;if(e=a(),Ir){Xn(!0);try{a()}finally{Xn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:e},i}function ug(e,i,a,l){return e.baseState=a,uf(e,Yt,typeof l=="function"?l:Mi)}function yA(e,i,a,l,h){if(Wu(e))throw Error(r(485));if(e=i.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};w.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,cg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function cg(e,i){var a=i.action,l=i.payload,h=e.state;if(i.isTransition){var d=w.T,v={};w.T=v;try{var T=a(h,l),R=w.S;R!==null&&R(v,T),hg(e,i,T)}catch(x){ff(e,i,x)}finally{w.T=d}}else try{d=a(h,l),hg(e,i,d)}catch(x){ff(e,i,x)}}function hg(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){fg(e,i,l)},function(l){return ff(e,i,l)}):fg(e,i,a)}function fg(e,i,a){i.status="fulfilled",i.value=a,dg(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,cg(e,a)))}function ff(e,i,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,dg(i),i=i.next;while(i!==l)}e.action=null}function dg(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function mg(e,i){return i}function pg(e,i){if(Bt){var a=Wt.formState;if(a!==null){t:{var l=It;if(Bt){if(Le){e:{for(var h=Le,d=oi;h.nodeType!==8;){if(!d){h=null;break e}if(h=Gn(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){Le=Gn(h.nextSibling),l=h.data==="F!";break t}}wr(l)}l=!1}l&&(i=a[0])}}return a=un(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mg,lastRenderedState:i},a.queue=l,a=Vg.bind(null,It,l),l.dispatch=a,l=hf(!1),d=yf.bind(null,It,!1,l.queue),l=un(),h={state:i,dispatch:null,action:e,pending:null},l.queue=h,a=yA.bind(null,It,h,d,a),h.dispatch=a,l.memoizedState=e,[i,a,!1]}function gg(e){var i=ge();return _g(i,Yt,e)}function _g(e,i,a){i=uf(e,i,mg)[0],e=Yu(Mi)[0],i=typeof i=="object"&&i!==null&&typeof i.then=="function"?Xo(i):i;var l=ge(),h=l.queue,d=h.dispatch;return a!==l.memoizedState&&(It.flags|=2048,Na(9,vA.bind(null,h,a),{destroy:void 0},null)),[i,d,e]}function vA(e,i){e.action=i}function yg(e){var i=ge(),a=Yt;if(a!==null)return _g(i,a,e);ge(),i=i.memoizedState,a=ge();var l=a.queue.dispatch;return a.memoizedState=e,[i,l,!1]}function Na(e,i,a,l){return e={tag:e,create:i,inst:a,deps:l,next:null},i=It.updateQueue,i===null&&(i=Ku(),It.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,i.lastEffect=e),e}function vg(){return ge().memoizedState}function $u(e,i,a,l){var h=un();It.flags|=e,h.memoizedState=Na(1|i,a,{destroy:void 0},l===void 0?null:l)}function Xu(e,i,a,l){var h=ge();l=l===void 0?null:l;var d=h.memoizedState.inst;Yt!==null&&l!==null&&nf(l,Yt.memoizedState.deps)?h.memoizedState=Na(i,a,d,l):(It.flags|=e,h.memoizedState=Na(1|i,a,d,l))}function Eg(e,i){$u(8390656,8,e,i)}function df(e,i){Xu(2048,8,e,i)}function Tg(e,i){return Xu(4,2,e,i)}function Ag(e,i){return Xu(4,4,e,i)}function Sg(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function wg(e,i,a){a=a!=null?a.concat([e]):null,Xu(4,4,Sg.bind(null,i,e),a)}function mf(){}function bg(e,i){var a=ge();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&nf(i,l[1])?l[0]:(a.memoizedState=[e,i],e)}function Rg(e,i){var a=ge();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&nf(i,l[1]))return l[0];if(l=e(),Ir){Xn(!0);try{e()}finally{Xn(!1)}}return a.memoizedState=[l,i],l}function pf(e,i,a){return a===void 0||(As&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=C_(),It.lanes|=e,Ms|=e,a)}function Ig(e,i,a,l){return mn(a,i)?a:wa.current!==null?(e=pf(e,a,l),mn(e,i)||(Ve=!0),e):(As&42)===0?(Ve=!0,e.memoizedState=a):(e=C_(),It.lanes|=e,Ms|=e,i)}function Cg(e,i,a,l,h){var d=st.p;st.p=d!==0&&8>d?d:8;var v=w.T,T={};w.T=T,yf(e,!1,i,a);try{var R=h(),x=w.S;if(x!==null&&x(T,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var G=pA(R,l);Wo(e,i,G,yn(e))}else Wo(e,i,l,yn(e))}catch(W){Wo(e,i,{then:function(){},status:"rejected",reason:W},yn())}finally{st.p=d,w.T=v}}function EA(){}function gf(e,i,a,l){if(e.tag!==5)throw Error(r(476));var h=Ng(e).queue;Cg(e,h,i,Rt,a===null?EA:function(){return Dg(e),a(l)})}function Ng(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:Rt,baseState:Rt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:Rt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Dg(e){var i=Ng(e).next.queue;Wo(e,i,{},yn())}function _f(){return Ke(_l)}function Og(){return ge().memoizedState}function Mg(){return ge().memoizedState}function TA(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=yn();e=Rs(a);var l=Is(i,e,a);l!==null&&(sn(l,i,a),tl(l,i,a)),i={cache:Jh()},e.payload=i;return}i=i.return}}function AA(e,i,a){var l=yn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Wu(e)?xg(i,a):(a=Kh(e,i,a,l),a!==null&&(sn(a,e,l),kg(a,i,l)))}function Vg(e,i,a){var l=yn();Wo(e,i,a,l)}function Wo(e,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Wu(e))xg(i,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,T=d(v,a);if(h.hasEagerState=!0,h.eagerState=T,mn(T,v))return xu(e,i,h,0),Wt===null&&Vu(),!1}catch{}finally{}if(a=Kh(e,i,h,l),a!==null)return sn(a,e,l),kg(a,i,l),!0}return!1}function yf(e,i,a,l){if(l={lane:2,revertLane:od(),action:l,hasEagerState:!1,eagerState:null,next:null},Wu(e)){if(i)throw Error(r(479))}else i=Kh(e,a,l,2),i!==null&&sn(i,e,2)}function Wu(e){var i=e.alternate;return e===It||i!==null&&i===It}function xg(e,i){Ia=Fu=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function kg(e,i,a){if((a&4194176)!==0){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,us(e,a)}}var ui={readContext:Ke,use:Qu,useCallback:ce,useContext:ce,useEffect:ce,useImperativeHandle:ce,useLayoutEffect:ce,useInsertionEffect:ce,useMemo:ce,useReducer:ce,useRef:ce,useState:ce,useDebugValue:ce,useDeferredValue:ce,useTransition:ce,useSyncExternalStore:ce,useId:ce};ui.useCacheRefresh=ce,ui.useMemoCache=ce,ui.useHostTransitionStatus=ce,ui.useFormState=ce,ui.useActionState=ce,ui.useOptimistic=ce;var Cr={readContext:Ke,use:Qu,useCallback:function(e,i){return un().memoizedState=[e,i===void 0?null:i],e},useContext:Ke,useEffect:Eg,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,$u(4194308,4,Sg.bind(null,i,e),a)},useLayoutEffect:function(e,i){return $u(4194308,4,e,i)},useInsertionEffect:function(e,i){$u(4,2,e,i)},useMemo:function(e,i){var a=un();i=i===void 0?null:i;var l=e();if(Ir){Xn(!0);try{e()}finally{Xn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(e,i,a){var l=un();if(a!==void 0){var h=a(i);if(Ir){Xn(!0);try{a(i)}finally{Xn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=AA.bind(null,It,e),[l.memoizedState,e]},useRef:function(e){var i=un();return e={current:e},i.memoizedState=e},useState:function(e){e=hf(e);var i=e.queue,a=Vg.bind(null,It,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:mf,useDeferredValue:function(e,i){var a=un();return pf(a,e,i)},useTransition:function(){var e=hf(!1);return e=Cg.bind(null,It,e.queue,!0,!1),un().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var l=It,h=un();if(Bt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),Wt===null)throw Error(r(349));(Ut&60)!==0||sg(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,Eg(ag.bind(null,l,d,e),[e]),l.flags|=2048,Na(9,rg.bind(null,l,d,a,i),{destroy:void 0},null),a},useId:function(){var e=un(),i=Wt.identifierPrefix;if(Bt){var a=Di,l=Ni;a=(l&~(1<<32-Je(l)-1)).toString(32)+a,i=":"+i+"R"+a,a=Gu++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=gA++,i=":"+i+"r"+a.toString(32)+":";return e.memoizedState=i},useCacheRefresh:function(){return un().memoizedState=TA.bind(null,It)}};Cr.useMemoCache=lf,Cr.useHostTransitionStatus=_f,Cr.useFormState=pg,Cr.useActionState=pg,Cr.useOptimistic=function(e){var i=un();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=yf.bind(null,It,!0,a),a.dispatch=i,[e,i]};var Ss={readContext:Ke,use:Qu,useCallback:bg,useContext:Ke,useEffect:df,useImperativeHandle:wg,useInsertionEffect:Tg,useLayoutEffect:Ag,useMemo:Rg,useReducer:Yu,useRef:vg,useState:function(){return Yu(Mi)},useDebugValue:mf,useDeferredValue:function(e,i){var a=ge();return Ig(a,Yt.memoizedState,e,i)},useTransition:function(){var e=Yu(Mi)[0],i=ge().memoizedState;return[typeof e=="boolean"?e:Xo(e),i]},useSyncExternalStore:ig,useId:Og};Ss.useCacheRefresh=Mg,Ss.useMemoCache=lf,Ss.useHostTransitionStatus=_f,Ss.useFormState=gg,Ss.useActionState=gg,Ss.useOptimistic=function(e,i){var a=ge();return ug(a,Yt,e,i)};var Nr={readContext:Ke,use:Qu,useCallback:bg,useContext:Ke,useEffect:df,useImperativeHandle:wg,useInsertionEffect:Tg,useLayoutEffect:Ag,useMemo:Rg,useReducer:cf,useRef:vg,useState:function(){return cf(Mi)},useDebugValue:mf,useDeferredValue:function(e,i){var a=ge();return Yt===null?pf(a,e,i):Ig(a,Yt.memoizedState,e,i)},useTransition:function(){var e=cf(Mi)[0],i=ge().memoizedState;return[typeof e=="boolean"?e:Xo(e),i]},useSyncExternalStore:ig,useId:Og};Nr.useCacheRefresh=Mg,Nr.useMemoCache=lf,Nr.useHostTransitionStatus=_f,Nr.useFormState=yg,Nr.useActionState=yg,Nr.useOptimistic=function(e,i){var a=ge();return Yt!==null?ug(a,Yt,e,i):(a.baseState=e,[e,a.queue.dispatch])};function vf(e,i,a,l){i=e.memoizedState,a=a(l,i),a=a==null?i:D({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Ef={isMounted:function(e){return(e=e._reactInternals)?ft(e)===e:!1},enqueueSetState:function(e,i,a){e=e._reactInternals;var l=yn(),h=Rs(l);h.payload=i,a!=null&&(h.callback=a),i=Is(e,h,l),i!==null&&(sn(i,e,l),tl(i,e,l))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var l=yn(),h=Rs(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Is(e,h,l),i!==null&&(sn(i,e,l),tl(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=yn(),l=Rs(a);l.tag=2,i!=null&&(l.callback=i),i=Is(e,l,a),i!==null&&(sn(i,e,a),tl(i,e,a))}};function Pg(e,i,a,l,h,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!Lo(a,l)||!Lo(h,d):!0}function Ug(e,i,a,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==e&&Ef.enqueueReplaceState(i,i.state,null)}function Dr(e,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(e=e.defaultProps){a===i&&(a=D({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var Zu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Lg(e){Zu(e)}function jg(e){console.error(e)}function zg(e){Zu(e)}function Ju(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Bg(e,i,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Tf(e,i,a){return a=Rs(a),a.tag=3,a.payload={element:null},a.callback=function(){Ju(e,i)},a}function qg(e){return e=Rs(e),e.tag=3,e}function Hg(e,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;e.payload=function(){return h(d)},e.callback=function(){Bg(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Bg(i,a,l),typeof h!="function"&&(Vs===null?Vs=new Set([this]):Vs.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function SA(e,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Jo(i,a,h,!0),a=On.current,a!==null){switch(a.tag){case 13:return li===null?nd():a.alternate===null&&oe===0&&(oe=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Xh?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),sd(e,l,h)),!1;case 22:return a.flags|=65536,l===Xh?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),sd(e,l,h)),!1}throw Error(r(435,a.tag))}return sd(e,l,h),nd(),!1}if(Bt)return i=On.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==$h&&(e=Error(r(422),{cause:l}),qo(Cn(e,a)))):(l!==$h&&(i=Error(r(423),{cause:l}),qo(Cn(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=Cn(l,a),h=Tf(e.stateNode,l,h),Pf(e,h),oe!==4&&(oe=2)),!1;var d=Error(r(520),{cause:l});if(d=Cn(d,a),ll===null?ll=[d]:ll.push(d),oe!==4&&(oe=2),i===null)return!0;l=Cn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Tf(a.stateNode,l,e),Pf(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Vs===null||!Vs.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=qg(h),Hg(h,e,a,l),Pf(a,h),!1}a=a.return}while(a!==null);return!1}var Fg=Error(r(461)),Ve=!1;function je(e,i,a,l){i.child=e===null?$p(i,null,a,l):br(i,e.child,a,l)}function Gg(e,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var T in l)T!=="ref"&&(v[T]=l[T])}else v=l;return Mr(i),l=sf(e,i,a,v,d,h),T=rf(),e!==null&&!Ve?(af(e,i,h),Vi(e,i,h)):(Bt&&T&&Qh(i),i.flags|=1,je(e,i,l,h),i.child)}function Kg(e,i,a,l,h){if(e===null){var d=a.type;return typeof d=="function"&&!Ff(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Qg(e,i,d,l,h)):(e=sc(a.type,null,l,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!Df(e,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Lo,a(v,l)&&e.ref===i.ref)return Vi(e,i,h)}return i.flags|=1,e=Os(d,l),e.ref=i.ref,e.return=i,i.child=e}function Qg(e,i,a,l,h){if(e!==null){var d=e.memoizedProps;if(Lo(d,l)&&e.ref===i.ref)if(Ve=!1,i.pendingProps=l=d,Df(e,h))(e.flags&131072)!==0&&(Ve=!0);else return i.lanes=e.lanes,Vi(e,i,h)}return Af(e,i,a,l,h)}function Yg(e,i,a){var l=i.pendingProps,h=l.children,d=(i.stateNode._pendingVisibility&2)!==0,v=e!==null?e.memoizedState:null;if(Zo(e,i),l.mode==="hidden"||d){if((i.flags&128)!==0){if(l=v!==null?v.baseLanes|a:a,e!==null){for(h=i.child=e.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return $g(e,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Hu(i,v!==null?v.cachePool:null),v!==null?Xp(i,v):Wh(),Wp(i);else return i.lanes=i.childLanes=536870912,$g(e,i,v!==null?v.baseLanes|a:a,a)}else v!==null?(Hu(i,v.cachePool),Xp(i,v),Ts(),i.memoizedState=null):(e!==null&&Hu(i,null),Wh(),Ts());return je(e,i,h,a),i.child}function $g(e,i,a,l){var h=ef();return h=h===null?null:{parent:Re._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&Hu(i,null),Wh(),Wp(i),e!==null&&Jo(e,i,l,!0),null}function Zo(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=2097664);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(i.flags|=2097664)}}function Af(e,i,a,l,h){return Mr(i),a=sf(e,i,a,l,void 0,h),l=rf(),e!==null&&!Ve?(af(e,i,h),Vi(e,i,h)):(Bt&&l&&Qh(i),i.flags|=1,je(e,i,a,h),i.child)}function Xg(e,i,a,l,h,d){return Mr(i),i.updateQueue=null,a=ng(i,l,a,h),eg(e),l=rf(),e!==null&&!Ve?(af(e,i,d),Vi(e,i,d)):(Bt&&l&&Qh(i),i.flags|=1,je(e,i,a,d),i.child)}function Wg(e,i,a,l,h){if(Mr(i),i.stateNode===null){var d=Ea,v=a.contextType;typeof v=="object"&&v!==null&&(d=Ke(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ef,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},xf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Ke(v):Ea,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(vf(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Ef.enqueueReplaceState(d,d.state,null),nl(i,l,d,h),el(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){d=i.stateNode;var T=i.memoizedProps,R=Dr(a,T);d.props=R;var x=d.context,G=a.contextType;v=Ea,typeof G=="object"&&G!==null&&(v=Ke(G));var W=a.getDerivedStateFromProps;G=typeof W=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,G||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||x!==v)&&Ug(i,d,l,v),bs=!1;var B=i.memoizedState;d.state=B,nl(i,l,d,h),el(),x=i.memoizedState,T||B!==x||bs?(typeof W=="function"&&(vf(i,a,W,l),x=i.memoizedState),(R=bs||Pg(i,a,R,l,B,x,v))?(G||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=x),d.props=l,d.state=x,d.context=v,l=R):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,kf(e,i),v=i.memoizedProps,G=Dr(a,v),d.props=G,W=i.pendingProps,B=d.context,x=a.contextType,R=Ea,typeof x=="object"&&x!==null&&(R=Ke(x)),T=a.getDerivedStateFromProps,(x=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==W||B!==R)&&Ug(i,d,l,R),bs=!1,B=i.memoizedState,d.state=B,nl(i,l,d,h),el();var F=i.memoizedState;v!==W||B!==F||bs||e!==null&&e.dependencies!==null&&tc(e.dependencies)?(typeof T=="function"&&(vf(i,a,T,l),F=i.memoizedState),(G=bs||Pg(i,a,G,l,B,F,R)||e!==null&&e.dependencies!==null&&tc(e.dependencies))?(x||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,F,R),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,F,R)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=F),d.props=l,d.state=F,d.context=R,l=G):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=1024),l=!1)}return d=l,Zo(e,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&l?(i.child=br(i,e.child,null,h),i.child=br(i,null,a,h)):je(e,i,a,h),i.memoizedState=d.state,e=i.child):e=Vi(e,i,h),e}function Zg(e,i,a,l){return Bo(),i.flags|=256,je(e,i,a,l),i.child}var Sf={dehydrated:null,treeContext:null,retryLane:0};function wf(e){return{baseLanes:e,cachePool:tg()}}function bf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=kn),e}function Jg(e,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(be.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Bt){if(h?Es(i):Ts(),Bt){var T=Le,R;if(R=T){t:{for(R=T,T=oi;R.nodeType!==8;){if(!T){T=null;break t}if(R=Gn(R.nextSibling),R===null){T=null;break t}}T=R}T!==null?(i.memoizedState={dehydrated:T,treeContext:Ar!==null?{id:Ni,overflow:Di}:null,retryLane:536870912},R=xn(18,null,null,0),R.stateNode=T,R.return=i,i.child=R,nn=i,Le=null,R=!0):R=!1}R||wr(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return T.data==="$!"?i.lanes=16:i.lanes=536870912,null;Oi(i)}return T=l.children,l=l.fallback,h?(Ts(),h=i.mode,T=If({mode:"hidden",children:T},h),l=xr(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,h=i.child,h.memoizedState=wf(a),h.childLanes=bf(e,v,a),i.memoizedState=Sf,l):(Es(i),Rf(i,T))}if(R=e.memoizedState,R!==null&&(T=R.dehydrated,T!==null)){if(d)i.flags&256?(Es(i),i.flags&=-257,i=Cf(e,i,a)):i.memoizedState!==null?(Ts(),i.child=e.child,i.flags|=128,i=null):(Ts(),h=l.fallback,T=i.mode,l=If({mode:"visible",children:l.children},T),h=xr(h,T,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,br(i,e.child,null,a),l=i.child,l.memoizedState=wf(a),l.childLanes=bf(e,v,a),i.memoizedState=Sf,i=h);else if(Es(i),T.data==="$!"){if(v=T.nextSibling&&T.nextSibling.dataset,v)var x=v.dgst;v=x,l=Error(r(419)),l.stack="",l.digest=v,qo({value:l,source:null,stack:null}),i=Cf(e,i,a)}else if(Ve||Jo(e,i,a,!1),v=(a&e.childLanes)!==0,Ve||v){if(v=Wt,v!==null){if(l=a&-a,(l&42)!==0)l=1;else switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=64;break;case 268435456:l=134217728;break;default:l=0}if(l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==R.retryLane)throw R.retryLane=l,vs(e,l),sn(v,e,l),Fg}T.data==="$?"||nd(),i=Cf(e,i,a)}else T.data==="$?"?(i.flags|=128,i.child=e.child,i=LA.bind(null,e),T._reactRetry=i,i=null):(e=R.treeContext,Le=Gn(T.nextSibling),nn=i,Bt=!0,Hn=null,oi=!1,e!==null&&(Nn[Dn++]=Ni,Nn[Dn++]=Di,Nn[Dn++]=Ar,Ni=e.id,Di=e.overflow,Ar=i),i=Rf(i,l.children),i.flags|=4096);return i}return h?(Ts(),h=l.fallback,T=i.mode,R=e.child,x=R.sibling,l=Os(R,{mode:"hidden",children:l.children}),l.subtreeFlags=R.subtreeFlags&31457280,x!==null?h=Os(x,h):(h=xr(h,T,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,T=e.child.memoizedState,T===null?T=wf(a):(R=T.cachePool,R!==null?(x=Re._currentValue,R=R.parent!==x?{parent:x,pool:x}:R):R=tg(),T={baseLanes:T.baseLanes|a,cachePool:R}),h.memoizedState=T,h.childLanes=bf(e,v,a),i.memoizedState=Sf,l):(Es(i),a=e.child,e=a.sibling,a=Os(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function Rf(e,i){return i=If({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function If(e,i){return b_(e,i,0,null)}function Cf(e,i,a){return br(i,e.child,null,a),e=Rf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function t_(e,i,a){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),Mf(e.return,i,a)}function Nf(e,i,a,l,h){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function e_(e,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(je(e,i,l.children,a),l=be.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&t_(e,a,i);else if(e.tag===19)t_(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(Kt(be,l),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&qu(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Nf(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&qu(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Nf(i,!0,a,null,d);break;case"together":Nf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Vi(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Ms|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Jo(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,a=Os(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Os(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Df(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&tc(e)))}function wA(e,i,a){switch(i.tag){case 3:is(i,i.stateNode.containerInfo),ws(i,Re,e.memoizedState.cache),Bo();break;case 27:case 5:_o(i);break;case 4:is(i,i.stateNode.containerInfo);break;case 10:ws(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Es(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Jg(e,i,a):(Es(i),e=Vi(e,i,a),e!==null?e.sibling:null);Es(i);break;case 19:var h=(e.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Jo(e,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return e_(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Kt(be,be.current),l)break;return null;case 22:case 23:return i.lanes=0,Yg(e,i,a);case 24:ws(i,Re,e.memoizedState.cache)}return Vi(e,i,a)}function n_(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Ve=!0;else{if(!Df(e,a)&&(i.flags&128)===0)return Ve=!1,wA(e,i,a);Ve=(e.flags&131072)!==0}else Ve=!1,Bt&&(i.flags&1048576)!==0&&zp(i,Uu,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")Ff(l)?(e=Dr(l,e),i.tag=1,i=Wg(null,i,l,e,a)):(i.tag=0,i=Af(null,i,l,e,a));else{if(l!=null){if(h=l.$$typeof,h===q){i.tag=11,i=Gg(null,i,l,e,a);break t}else if(h===ct){i.tag=14,i=Kg(null,i,l,e,a);break t}}throw i=I(l)||l,Error(r(306,i,""))}}return i;case 0:return Af(e,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Dr(l,i.pendingProps),Wg(e,i,l,h,a);case 3:t:{if(is(i,i.stateNode.containerInfo),e===null)throw Error(r(387));var d=i.pendingProps;h=i.memoizedState,l=h.element,kf(e,i),nl(i,d,null,a);var v=i.memoizedState;if(d=v.cache,ws(i,Re,d),d!==h.cache&&Vf(i,[Re],a,!0),el(),d=v.element,h.isDehydrated)if(h={element:d,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=h,i.memoizedState=h,i.flags&256){i=Zg(e,i,d,a);break t}else if(d!==l){l=Cn(Error(r(424)),i),qo(l),i=Zg(e,i,d,a);break t}else for(Le=Gn(i.stateNode.containerInfo.firstChild),nn=i,Bt=!0,Hn=null,oi=!0,a=$p(i,null,d,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Bo(),d===l){i=Vi(e,i,a);break t}je(e,i,d,a)}i=i.child}return i;case 26:return Zo(e,i),e===null?(a=ry(i.type,null,i.pendingProps,null))?i.memoizedState=a:Bt||(a=i.type,e=i.pendingProps,l=gc(En.current).createElement(a),l[De]=i,l[Ae]=e,ze(l,a,e),te(l),i.stateNode=l):i.memoizedState=ry(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return _o(i),e===null&&Bt&&(l=i.stateNode=ny(i.type,i.pendingProps,En.current),nn=i,oi=!0,Le=Gn(l.firstChild)),l=i.pendingProps.children,e!==null||Bt?je(e,i,l,a):i.child=br(i,null,l,a),Zo(e,i),i.child;case 5:return e===null&&Bt&&((h=l=Le)&&(l=tS(l,i.type,i.pendingProps,oi),l!==null?(i.stateNode=l,nn=i,Le=Gn(l.firstChild),oi=!1,h=!0):h=!1),h||wr(i)),_o(i),h=i.type,d=i.pendingProps,v=e!==null?e.memoizedProps:null,l=d.children,gd(h,d)?l=null:v!==null&&gd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=sf(e,i,_A,null,null,a),_l._currentValue=h),Zo(e,i),je(e,i,l,a),i.child;case 6:return e===null&&Bt&&((e=a=Le)&&(a=eS(a,i.pendingProps,oi),a!==null?(i.stateNode=a,nn=i,Le=null,e=!0):e=!1),e||wr(i)),null;case 13:return Jg(e,i,a);case 4:return is(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=br(i,null,l,a):je(e,i,l,a),i.child;case 11:return Gg(e,i,i.type,i.pendingProps,a);case 7:return je(e,i,i.pendingProps,a),i.child;case 8:return je(e,i,i.pendingProps.children,a),i.child;case 12:return je(e,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,ws(i,i.type,l.value),je(e,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Mr(i),h=Ke(h),l=l(h),i.flags|=1,je(e,i,l,a),i.child;case 14:return Kg(e,i,i.type,i.pendingProps,a);case 15:return Qg(e,i,i.type,i.pendingProps,a);case 19:return e_(e,i,a);case 22:return Yg(e,i,a);case 24:return Mr(i),l=Ke(Re),e===null?(h=ef(),h===null&&(h=Wt,d=Jh(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},xf(i),ws(i,Re,h)):((e.lanes&a)!==0&&(kf(e,i),nl(i,null,null,a),el()),h=e.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),ws(i,Re,l)):(l=d.cache,ws(i,Re,l),l!==h.cache&&Vf(i,[Re],a,!0))),je(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}var Of=jt(null),Or=null,xi=null;function ws(e,i,a){Kt(Of,i._currentValue),i._currentValue=a}function ki(e){e._currentValue=Of.current,se(Of)}function Mf(e,i,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===a)break;e=e.return}}function Vf(e,i,a,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;t:for(;d!==null;){var T=d;d=h;for(var R=0;R<i.length;R++)if(T.context===i[R]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Mf(d.return,a,e),l||(v=null);break t}d=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Mf(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Jo(e,i,a,l){e=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var T=h.type;mn(h.pendingProps.value,v.value)||(e!==null?e.push(T):e=[T])}}else if(h===ns.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(_l):e=[_l])}h=h.return}e!==null&&Vf(i,e,a,l),i.flags|=262144}function tc(e){for(e=e.firstContext;e!==null;){if(!mn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Mr(e){Or=e,xi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ke(e){return i_(Or,e)}function ec(e,i){return Or===null&&Mr(e),i_(e,i)}function i_(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},xi===null){if(e===null)throw Error(r(308));xi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else xi=xi.next=i;return a}var bs=!1;function xf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Rs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Is(e,i,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ne&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=ku(e),Lp(e,null,a),i}return xu(e,l,i,a),ku(e)}function tl(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194176)!==0)){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,us(e,a)}}function Pf(e,i){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var Uf=!1;function el(){if(Uf){var e=Ra;if(e!==null)throw e}}function nl(e,i,a,l){Uf=!1;var h=e.updateQueue;bs=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var R=T,x=R.next;R.next=null,v===null?d=x:v.next=x,v=R;var G=e.alternate;G!==null&&(G=G.updateQueue,T=G.lastBaseUpdate,T!==v&&(T===null?G.firstBaseUpdate=x:T.next=x,G.lastBaseUpdate=R))}if(d!==null){var W=h.baseState;v=0,G=x=R=null,T=d;do{var B=T.lane&-536870913,F=B!==T.lane;if(F?(Ut&B)===B:(l&B)===B){B!==0&&B===ba&&(Uf=!0),G!==null&&(G=G.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var lt=e,At=T;B=i;var le=a;switch(At.tag){case 1:if(lt=At.payload,typeof lt=="function"){W=lt.call(le,W,B);break t}W=lt;break t;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=At.payload,B=typeof lt=="function"?lt.call(le,W,B):lt,B==null)break t;W=D({},W,B);break t;case 2:bs=!0}}B=T.callback,B!==null&&(e.flags|=64,F&&(e.flags|=8192),F=h.callbacks,F===null?h.callbacks=[B]:F.push(B))}else F={lane:B,tag:T.tag,payload:T.payload,callback:T.callback,next:null},G===null?(x=G=F,R=W):G=G.next=F,v|=B;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;F=T,T=F.next,F.next=null,h.lastBaseUpdate=F,h.shared.pending=null}}while(!0);G===null&&(R=W),h.baseState=R,h.firstBaseUpdate=x,h.lastBaseUpdate=G,d===null&&(h.shared.lanes=0),Ms|=v,e.lanes=v,e.memoizedState=W}}function s_(e,i){if(typeof e!="function")throw Error(r(191,e));e.call(i)}function r_(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)s_(a[e],i)}function il(e,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&e)===e){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(T){Xt(i,i.return,T)}}function Cs(e,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&e)===e){var v=l.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=i;var R=a;try{T()}catch(x){Xt(h,R,x)}}}l=l.next}while(l!==d)}}catch(x){Xt(i,i.return,x)}}function a_(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{r_(i,a)}catch(l){Xt(e,e.return,l)}}}function o_(e,i,a){a.props=Dr(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Xt(e,i,l)}}function Vr(e,i){try{var a=e.ref;if(a!==null){var l=e.stateNode;switch(e.tag){case 26:case 27:case 5:var h=l;break;default:h=l}typeof a=="function"?e.refCleanup=a(h):a.current=h}}catch(d){Xt(e,i,d)}}function pn(e,i){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Xt(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Xt(e,i,h)}else a.current=null}function l_(e){var i=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Xt(e,e.return,h)}}function u_(e,i,a){try{var l=e.stateNode;$A(l,e.type,a,i),l[Ae]=i}catch(h){Xt(e,e.return,h)}}function c_(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function Lf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||c_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jf(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(e,i):a.insertBefore(e,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(e,a)):(i=a,i.appendChild(e)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=pc));else if(l!==4&&l!==27&&(e=e.child,e!==null))for(jf(e,i,a),e=e.sibling;e!==null;)jf(e,i,a),e=e.sibling}function nc(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(l!==4&&l!==27&&(e=e.child,e!==null))for(nc(e,i,a),e=e.sibling;e!==null;)nc(e,i,a),e=e.sibling}var Pi=!1,ae=!1,zf=!1,h_=typeof WeakSet=="function"?WeakSet:Set,xe=null,f_=!1;function bA(e,i){if(e=e.containerInfo,md=Ac,e=Np(e),Bh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,T=-1,R=-1,x=0,G=0,W=e,B=null;e:for(;;){for(var F;W!==a||h!==0&&W.nodeType!==3||(T=v+h),W!==d||l!==0&&W.nodeType!==3||(R=v+l),W.nodeType===3&&(v+=W.nodeValue.length),(F=W.firstChild)!==null;)B=W,W=F;for(;;){if(W===e)break e;if(B===a&&++x===h&&(T=v),B===d&&++G===l&&(R=v),(F=W.nextSibling)!==null)break;W=B,B=W.parentNode}W=F}a=T===-1||R===-1?null:{start:T,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(pd={focusedElem:e,selectionRange:a},Ac=!1,xe=i;xe!==null;)if(i=xe,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,xe=e;else for(;xe!==null;){switch(i=xe,d=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var lt=Dr(a.type,h,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(lt,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(At){Xt(a,a.return,At)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)vd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":vd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=i.sibling,e!==null){e.return=i.return,xe=e;break}xe=i.return}return lt=f_,f_=!1,lt}function d_(e,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Li(e,a),l&4&&il(5,a);break;case 1:if(Li(e,a),l&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(T){Xt(a,a.return,T)}else{var h=Dr(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(T){Xt(a,a.return,T)}}l&64&&a_(a),l&512&&Vr(a,a.return);break;case 3:if(Li(e,a),l&64&&(l=a.updateQueue,l!==null)){if(e=null,a.child!==null)switch(a.child.tag){case 27:case 5:e=a.child.stateNode;break;case 1:e=a.child.stateNode}try{r_(l,e)}catch(T){Xt(a,a.return,T)}}break;case 26:Li(e,a),l&512&&Vr(a,a.return);break;case 27:case 5:Li(e,a),i===null&&l&4&&l_(a),l&512&&Vr(a,a.return);break;case 12:Li(e,a);break;case 13:Li(e,a),l&4&&g_(e,a);break;case 22:if(h=a.memoizedState!==null||Pi,!h){i=i!==null&&i.memoizedState!==null||ae;var d=Pi,v=ae;Pi=h,(ae=i)&&!v?Ns(e,a,(a.subtreeFlags&8772)!==0):Li(e,a),Pi=d,ae=v}l&512&&(a.memoizedProps.mode==="manual"?Vr(a,a.return):pn(a,a.return));break;default:Li(e,a)}}function m_(e){var i=e.alternate;i!==null&&(e.alternate=null,m_(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&ur(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var _e=null,gn=!1;function Ui(e,i,a){for(a=a.child;a!==null;)p_(e,i,a),a=a.sibling}function p_(e,i,a){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(ss,a)}catch{}switch(a.tag){case 26:ae||pn(a,i),Ui(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ae||pn(a,i);var l=_e,h=gn;for(_e=a.stateNode,Ui(e,i,a),a=a.stateNode,i=a.attributes;i.length;)a.removeAttributeNode(i[0]);ur(a),_e=l,gn=h;break;case 5:ae||pn(a,i);case 6:h=_e;var d=gn;if(_e=null,Ui(e,i,a),_e=h,gn=d,_e!==null)if(gn)try{e=_e,l=a.stateNode,e.nodeType===8?e.parentNode.removeChild(l):e.removeChild(l)}catch(v){Xt(a,i,v)}else try{_e.removeChild(a.stateNode)}catch(v){Xt(a,i,v)}break;case 18:_e!==null&&(gn?(i=_e,a=a.stateNode,i.nodeType===8?yd(i.parentNode,a):i.nodeType===1&&yd(i,a),Tl(i)):yd(_e,a.stateNode));break;case 4:l=_e,h=gn,_e=a.stateNode.containerInfo,gn=!0,Ui(e,i,a),_e=l,gn=h;break;case 0:case 11:case 14:case 15:ae||Cs(2,a,i),ae||Cs(4,a,i),Ui(e,i,a);break;case 1:ae||(pn(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&o_(a,i,l)),Ui(e,i,a);break;case 21:Ui(e,i,a);break;case 22:ae||pn(a,i),ae=(l=ae)||a.memoizedState!==null,Ui(e,i,a),ae=l;break;default:Ui(e,i,a)}}function g_(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Tl(e)}catch(a){Xt(i,i.return,a)}}function RA(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new h_),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new h_),i;default:throw Error(r(435,e.tag))}}function Bf(e,i){var a=RA(e);i.forEach(function(l){var h=jA.bind(null,e,l);a.has(l)||(a.add(l),l.then(h,h))})}function Mn(e,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=e,v=i,T=v;t:for(;T!==null;){switch(T.tag){case 27:case 5:_e=T.stateNode,gn=!1;break t;case 3:_e=T.stateNode.containerInfo,gn=!0;break t;case 4:_e=T.stateNode.containerInfo,gn=!0;break t}T=T.return}if(_e===null)throw Error(r(160));p_(d,v,h),_e=null,gn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)__(i,e),i=i.sibling}var Fn=null;function __(e,i){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Mn(i,e),Vn(e),l&4&&(Cs(3,e,e.return),il(3,e),Cs(5,e,e.return));break;case 1:Mn(i,e),Vn(e),l&512&&(ae||a===null||pn(a,a.return)),l&64&&Pi&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Fn;if(Mn(i,e),Vn(e),l&512&&(ae||a===null||pn(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[hs]||d[De]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),ze(d,l,a),d[De]=e,te(d),l=d;break t;case"link":var v=ly("link","href",h).get(l+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(d=v[T],d.getAttribute("href")===(a.href==null?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break e}}d=h.createElement(l),ze(d,l,a),h.head.appendChild(d);break;case"meta":if(v=ly("meta","content",h).get(l+(a.content||""))){for(T=0;T<v.length;T++)if(d=v[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break e}}d=h.createElement(l),ze(d,l,a),h.head.appendChild(d);break;default:throw Error(r(468,l))}d[De]=e,te(d),l=d}e.stateNode=l}else uy(h,e.type,e.stateNode);else e.stateNode=oy(h,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?uy(h,e.type,e.stateNode):oy(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&u_(e,e.memoizedProps,a.memoizedProps)}break;case 27:if(l&4&&e.alternate===null){h=e.stateNode,d=e.memoizedProps;try{for(var R=h.firstChild;R;){var x=R.nextSibling,G=R.nodeName;R[hs]||G==="HEAD"||G==="BODY"||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&R.rel.toLowerCase()==="stylesheet"||h.removeChild(R),R=x}for(var W=e.type,B=h.attributes;B.length;)h.removeAttributeNode(B[0]);ze(h,W,d),h[De]=e,h[Ae]=d}catch(lt){Xt(e,e.return,lt)}}case 5:if(Mn(i,e),Vn(e),l&512&&(ae||a===null||pn(a,a.return)),e.flags&32){h=e.stateNode;try{Sn(h,"")}catch(lt){Xt(e,e.return,lt)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,u_(e,h,a!==null?a.memoizedProps:h)),l&1024&&(zf=!0);break;case 6:if(Mn(i,e),Vn(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(lt){Xt(e,e.return,lt)}}break;case 3:if(vc=null,h=Fn,Fn=_c(i.containerInfo),Mn(i,e),Fn=h,Vn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Tl(i.containerInfo)}catch(lt){Xt(e,e.return,lt)}zf&&(zf=!1,y_(e));break;case 4:l=Fn,Fn=_c(e.stateNode.containerInfo),Mn(i,e),Vn(e),Fn=l;break;case 12:Mn(i,e),Vn(e);break;case 13:Mn(i,e),Vn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Xf=on()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Bf(e,l)));break;case 22:if(l&512&&(ae||a===null||pn(a,a.return)),R=e.memoizedState!==null,x=a!==null&&a.memoizedState!==null,G=Pi,W=ae,Pi=G||R,ae=W||x,Mn(i,e),ae=W,Pi=G,Vn(e),i=e.stateNode,i._current=e,i._visibility&=-3,i._visibility|=i._pendingVisibility&2,l&8192&&(i._visibility=R?i._visibility&-2:i._visibility|1,R&&(i=Pi||ae,a===null||x||i||Da(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))t:for(a=null,i=e;;){if(i.tag===5||i.tag===26||i.tag===27){if(a===null){x=a=i;try{if(h=x.stateNode,R)d=h.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{v=x.stateNode,T=x.memoizedProps.style;var F=T!=null&&T.hasOwnProperty("display")?T.display:null;v.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(lt){Xt(x,x.return,lt)}}}else if(i.tag===6){if(a===null){x=i;try{x.stateNode.nodeValue=R?"":x.memoizedProps}catch(lt){Xt(x,x.return,lt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Bf(e,a))));break;case 19:Mn(i,e),Vn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Bf(e,l)));break;case 21:break;default:Mn(i,e),Vn(e)}}function Vn(e){var i=e.flags;if(i&2){try{if(e.tag!==27){t:{for(var a=e.return;a!==null;){if(c_(a)){var l=a;break t}a=a.return}throw Error(r(160))}switch(l.tag){case 27:var h=l.stateNode,d=Lf(e);nc(e,d,h);break;case 5:var v=l.stateNode;l.flags&32&&(Sn(v,""),l.flags&=-33);var T=Lf(e);nc(e,T,v);break;case 3:case 4:var R=l.stateNode.containerInfo,x=Lf(e);jf(e,x,R);break;default:throw Error(r(161))}}}catch(G){Xt(e,e.return,G)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function y_(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;y_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Li(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)d_(e,i.alternate,i),i=i.sibling}function Da(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Cs(4,i,i.return),Da(i);break;case 1:pn(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&o_(i,i.return,a),Da(i);break;case 26:case 27:case 5:pn(i,i.return),Da(i);break;case 22:pn(i,i.return),i.memoizedState===null&&Da(i);break;default:Da(i)}e=e.sibling}}function Ns(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=e,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:Ns(h,d,a),il(4,d);break;case 1:if(Ns(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(x){Xt(l,l.return,x)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)s_(R[h],T)}catch(x){Xt(l,l.return,x)}}a&&v&64&&a_(d),Vr(d,d.return);break;case 26:case 27:case 5:Ns(h,d,a),a&&l===null&&v&4&&l_(d),Vr(d,d.return);break;case 12:Ns(h,d,a);break;case 13:Ns(h,d,a),a&&v&4&&g_(h,d);break;case 22:d.memoizedState===null&&Ns(h,d,a),Vr(d,d.return);break;default:Ns(h,d,a)}i=i.sibling}}function qf(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Qo(a))}function Hf(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Qo(e))}function Ds(e,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)v_(e,i,a,l),i=i.sibling}function v_(e,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Ds(e,i,a,l),h&2048&&il(9,i);break;case 3:Ds(e,i,a,l),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Qo(e)));break;case 12:if(h&2048){Ds(e,i,a,l),e=i.stateNode;try{var d=i.memoizedProps,v=d.id,T=d.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){Xt(i,i.return,R)}}else Ds(e,i,a,l);break;case 23:break;case 22:d=i.stateNode,i.memoizedState!==null?d._visibility&4?Ds(e,i,a,l):sl(e,i):d._visibility&4?Ds(e,i,a,l):(d._visibility|=4,Oa(e,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&qf(i.alternate,i);break;case 24:Ds(e,i,a,l),h&2048&&Hf(i.alternate,i);break;default:Ds(e,i,a,l)}}function Oa(e,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=e,v=i,T=a,R=l,x=v.flags;switch(v.tag){case 0:case 11:case 15:Oa(d,v,T,R,h),il(8,v);break;case 23:break;case 22:var G=v.stateNode;v.memoizedState!==null?G._visibility&4?Oa(d,v,T,R,h):sl(d,v):(G._visibility|=4,Oa(d,v,T,R,h)),h&&x&2048&&qf(v.alternate,v);break;case 24:Oa(d,v,T,R,h),h&&x&2048&&Hf(v.alternate,v);break;default:Oa(d,v,T,R,h)}i=i.sibling}}function sl(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,l=i,h=l.flags;switch(l.tag){case 22:sl(a,l),h&2048&&qf(l.alternate,l);break;case 24:sl(a,l),h&2048&&Hf(l.alternate,l);break;default:sl(a,l)}i=i.sibling}}var rl=8192;function Ma(e){if(e.subtreeFlags&rl)for(e=e.child;e!==null;)E_(e),e=e.sibling}function E_(e){switch(e.tag){case 26:Ma(e),e.flags&rl&&e.memoizedState!==null&&mS(Fn,e.memoizedState,e.memoizedProps);break;case 5:Ma(e);break;case 3:case 4:var i=Fn;Fn=_c(e.stateNode.containerInfo),Ma(e),Fn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=rl,rl=16777216,Ma(e),rl=i):Ma(e));break;default:Ma(e)}}function T_(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function al(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];xe=l,S_(l,e)}T_(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)A_(e),e=e.sibling}function A_(e){switch(e.tag){case 0:case 11:case 15:al(e),e.flags&2048&&Cs(9,e,e.return);break;case 3:al(e);break;case 12:al(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&4&&(e.return===null||e.return.tag!==13)?(i._visibility&=-5,ic(e)):al(e);break;default:al(e)}}function ic(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];xe=l,S_(l,e)}T_(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Cs(8,i,i.return),ic(i);break;case 22:a=i.stateNode,a._visibility&4&&(a._visibility&=-5,ic(i));break;default:ic(i)}e=e.sibling}}function S_(e,i){for(;xe!==null;){var a=xe;switch(a.tag){case 0:case 11:case 15:Cs(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Qo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,xe=l;else t:for(a=e;xe!==null;){l=xe;var h=l.sibling,d=l.return;if(m_(l),l===a){xe=null;break t}if(h!==null){h.return=d,xe=h;break t}xe=d}}}function IA(e,i,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(e,i,a,l){return new IA(e,i,a,l)}function Ff(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Os(e,i){var a=e.alternate;return a===null?(a=xn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&31457280,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function w_(e,i){e.flags&=31457282;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function sc(e,i,a,l,h,d){var v=0;if(l=e,typeof e=="function")Ff(e)&&(v=1);else if(typeof e=="string")v=fS(e,a,Ze.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case g:return xr(a.children,h,d,i);case _:v=8,h|=24;break;case E:return e=xn(12,a,i,h|2),e.elementType=E,e.lanes=d,e;case Q:return e=xn(13,a,i,h),e.elementType=Q,e.lanes=d,e;case X:return e=xn(19,a,i,h),e.elementType=X,e.lanes=d,e;case nt:return b_(a,h,d,i);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case S:case V:v=10;break t;case C:v=9;break t;case q:v=11;break t;case ct:v=14;break t;case et:v=16,l=null;break t}v=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return i=xn(v,a,i,h),i.elementType=e,i.type=l,i.lanes=d,i}function xr(e,i,a,l){return e=xn(7,e,l,i),e.lanes=a,e}function b_(e,i,a,l){e=xn(22,e,l,i),e.elementType=nt,e.lanes=a;var h={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var d=h._current;if(d===null)throw Error(r(456));if((h._pendingVisibility&2)===0){var v=vs(d,2);v!==null&&(h._pendingVisibility|=2,sn(v,d,2))}},attach:function(){var d=h._current;if(d===null)throw Error(r(456));if((h._pendingVisibility&2)!==0){var v=vs(d,2);v!==null&&(h._pendingVisibility&=-3,sn(v,d,2))}}};return e.stateNode=h,e}function Gf(e,i,a){return e=xn(6,e,null,i),e.lanes=a,e}function Kf(e,i,a){return i=xn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function ji(e){e.flags|=4}function R_(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!cy(i)){if(i=On.current,i!==null&&((Ut&4194176)===Ut?li!==null:(Ut&62914560)!==Ut&&(Ut&536870912)===0||i!==li))throw Fo=Xh,Hp;e.flags|=8192}}function rc(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?os():536870912,e.lanes|=i,xa|=i)}function ol(e,i){if(!Bt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function ee(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&31457280,l|=h.flags&31457280,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=a,i}function CA(e,i,a){var l=i.pendingProps;switch(Yh(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ee(i),null;case 1:return ee(i),null;case 3:return a=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ki(Re),yi(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(zo(i)?ji(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Hn!==null&&(td(Hn),Hn=null))),ee(i),null;case 26:return a=i.memoizedState,e===null?(ji(i),a!==null?(ee(i),R_(i,a)):(ee(i),i.flags&=-16777217)):a?a!==e.memoizedState?(ji(i),ee(i),R_(i,a)):(ee(i),i.flags&=-16777217):(e.memoizedProps!==l&&ji(i),ee(i),i.flags&=-16777217),null;case 27:Jr(i),a=En.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==l&&ji(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ee(i),null}e=Ze.current,zo(i)?Bp(i):(e=ny(h,l,a),i.stateNode=e,ji(i))}return ee(i),null;case 5:if(Jr(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&ji(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ee(i),null}if(e=Ze.current,zo(i))Bp(i);else{switch(h=gc(En.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}e[De]=i,e[Ae]=l;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(ze(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&ji(i)}}return ee(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&ji(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(e=En.current,zo(i)){if(e=i.stateNode,a=i.memoizedProps,l=null,h=nn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[De]=i,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||X_(e.nodeValue,a)),e||wr(i)}else e=gc(e).createTextNode(l),e[De]=i,i.stateNode=e}return ee(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=zo(i),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[De]=i}else Bo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ee(i),h=!1}else Hn!==null&&(td(Hn),Hn=null),h=!0;if(!h)return i.flags&256?(Oi(i),i):(Oi(i),null)}if(Oi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),rc(i,i.updateQueue),ee(i),null;case 4:return yi(),e===null&&hd(i.stateNode.containerInfo),ee(i),null;case 10:return ki(i.type),ee(i),null;case 19:if(se(be),h=i.memoizedState,h===null)return ee(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)ol(h,!1);else{if(oe!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=qu(e),d!==null){for(i.flags|=128,ol(h,!1),e=d.updateQueue,i.updateQueue=e,rc(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)w_(a,e),a=a.sibling;return Kt(be,be.current&1|2),i.child}e=e.sibling}h.tail!==null&&on()>ac&&(i.flags|=128,l=!0,ol(h,!1),i.lanes=4194304)}else{if(!l)if(e=qu(d),e!==null){if(i.flags|=128,l=!0,e=e.updateQueue,i.updateQueue=e,rc(i,e),ol(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Bt)return ee(i),null}else 2*on()-h.renderingStartTime>ac&&a!==536870912&&(i.flags|=128,l=!0,ol(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(e=h.last,e!==null?e.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=on(),i.sibling=null,e=be.current,Kt(be,l?e&1|2:e&1),i):(ee(i),null);case 22:case 23:return Oi(i),Zh(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ee(i),i.subtreeFlags&6&&(i.flags|=8192)):ee(i),a=i.updateQueue,a!==null&&rc(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),e!==null&&se(Rr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ki(Re),ee(i),null;case 25:return null}throw Error(r(156,i.tag))}function NA(e,i){switch(Yh(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return ki(Re),yi(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Jr(i),null;case 13:if(Oi(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Bo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return se(be),null;case 4:return yi(),null;case 10:return ki(i.type),null;case 22:case 23:return Oi(i),Zh(),e!==null&&se(Rr),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return ki(Re),null;case 25:return null;default:return null}}function I_(e,i){switch(Yh(i),i.tag){case 3:ki(Re),yi();break;case 26:case 27:case 5:Jr(i);break;case 4:yi();break;case 13:Oi(i);break;case 19:se(be);break;case 10:ki(i.type);break;case 22:case 23:Oi(i),Zh(),e!==null&&se(Rr);break;case 24:ki(Re)}}var DA={getCacheForType:function(e){var i=Ke(Re),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},OA=typeof WeakMap=="function"?WeakMap:Map,ne=0,Wt=null,Nt=null,Ut=0,Zt=0,_n=null,zi=!1,Va=!1,Qf=!1,Bi=0,oe=0,Ms=0,kr=0,Yf=0,kn=0,xa=0,ll=null,ci=null,$f=!1,Xf=0,ac=1/0,oc=null,Vs=null,lc=!1,Pr=null,ul=0,Wf=0,Zf=null,cl=0,Jf=null;function yn(){if((ne&2)!==0&&Ut!==0)return Ut&-Ut;if(w.T!==null){var e=ba;return e!==0?e:od()}return mu()}function C_(){kn===0&&(kn=(Ut&536870912)===0||Bt?Ao():536870912);var e=On.current;return e!==null&&(e.flags|=32),kn}function sn(e,i,a){(e===Wt&&Zt===2||e.cancelPendingCommit!==null)&&(ka(e,0),qi(e,Ut,kn,!1)),ue(e,a),((ne&2)===0||e!==Wt)&&(e===Wt&&((ne&2)===0&&(kr|=a),oe===4&&qi(e,Ut,kn,!1)),hi(e))}function N_(e,i,a){if((ne&6)!==0)throw Error(r(327));var l=!a&&(i&60)===0&&(i&e.expiredLanes)===0||as(e,i),h=l?xA(e,i):id(e,i,!0),d=l;do{if(h===0){Va&&!l&&qi(e,i,0,!1);break}else if(h===6)qi(e,i,0,!zi);else{if(a=e.current.alternate,d&&!MA(a)){h=id(e,i,!1),d=!1;continue}if(h===2){if(d=i,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var T=e;h=ll;var R=T.current.memoizedState.isDehydrated;if(R&&(ka(T,v).flags|=256),v=id(T,v,!1),v!==2){if(Qf&&!R){T.errorRecoveryDisabledLanes|=d,kr|=d,h=4;break t}d=ci,ci=h,d!==null&&td(d)}h=v}if(d=!1,h!==2)continue}}if(h===1){ka(e,0),qi(e,i,0,!0);break}t:{switch(l=e,h){case 0:case 1:throw Error(r(345));case 4:if((i&4194176)===i){qi(l,i,kn,!zi);break t}break;case 2:ci=null;break;case 3:case 5:break;default:throw Error(r(329))}if(l.finishedWork=a,l.finishedLanes=i,(i&62914560)===i&&(d=Xf+300-on(),10<d)){if(qi(l,i,kn,!zi),Tn(l,0)!==0)break t;l.timeoutHandle=J_(D_.bind(null,l,a,ci,oc,$f,i,kn,kr,xa,zi,2,-0,0),d);break t}D_(l,a,ci,oc,$f,i,kn,kr,xa,zi,0,-0,0)}}break}while(!0);hi(e)}function td(e){ci===null?ci=e:ci.push.apply(ci,e)}function D_(e,i,a,l,h,d,v,T,R,x,G,W,B){var F=i.subtreeFlags;if((F&8192||(F&16785408)===16785408)&&(gl={stylesheets:null,count:0,unsuspend:dS},E_(i),i=pS(),i!==null)){e.cancelPendingCommit=i(U_.bind(null,e,a,l,h,v,T,R,1,W,B)),qi(e,d,v,!x);return}U_(e,a,l,h,v,T,R,G,W,B)}function MA(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!mn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function qi(e,i,a,l){i&=~Yf,i&=~kr,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var h=i;0<h;){var d=31-Je(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&ls(e,a,i)}function uc(){return(ne&6)===0?(hl(0),!1):!0}function ed(){if(Nt!==null){if(Zt===0)var e=Nt.return;else e=Nt,xi=Or=null,of(e),Sa=null,Go=0,e=Nt;for(;e!==null;)I_(e.alternate,e),e=e.return;Nt=null}}function ka(e,i){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,WA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ed(),Wt=e,Nt=a=Os(e.current,null),Ut=i,Zt=0,_n=null,zi=!1,Va=as(e,i),Qf=!1,xa=kn=Yf=kr=Ms=oe=0,ci=ll=null,$f=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var h=31-Je(l),d=1<<h;i|=e[h],l&=~d}return Bi=i,Vu(),a}function O_(e,i){It=null,w.H=ui,i===Ho?(i=Kp(),Zt=3):i===Hp?(i=Kp(),Zt=4):Zt=i===Fg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,_n=i,Nt===null&&(oe=1,Ju(e,Cn(i,e.current)))}function M_(){var e=w.H;return w.H=ui,e===null?ui:e}function V_(){var e=w.A;return w.A=DA,e}function nd(){oe=4,zi||(Ut&4194176)!==Ut&&On.current!==null||(Va=!0),(Ms&134217727)===0&&(kr&134217727)===0||Wt===null||qi(Wt,Ut,kn,!1)}function id(e,i,a){var l=ne;ne|=2;var h=M_(),d=V_();(Wt!==e||Ut!==i)&&(oc=null,ka(e,i)),i=!1;var v=oe;t:do try{if(Zt!==0&&Nt!==null){var T=Nt,R=_n;switch(Zt){case 8:ed(),v=6;break t;case 3:case 2:case 6:On.current===null&&(i=!0);var x=Zt;if(Zt=0,_n=null,Pa(e,T,R,x),a&&Va){v=0;break t}break;default:x=Zt,Zt=0,_n=null,Pa(e,T,R,x)}}VA(),v=oe;break}catch(G){O_(e,G)}while(!0);return i&&e.shellSuspendCounter++,xi=Or=null,ne=l,w.H=h,w.A=d,Nt===null&&(Wt=null,Ut=0,Vu()),v}function VA(){for(;Nt!==null;)x_(Nt)}function xA(e,i){var a=ne;ne|=2;var l=M_(),h=V_();Wt!==e||Ut!==i?(oc=null,ac=on()+500,ka(e,i)):Va=as(e,i);t:do try{if(Zt!==0&&Nt!==null){i=Nt;var d=_n;e:switch(Zt){case 1:Zt=0,_n=null,Pa(e,i,d,1);break;case 2:if(Fp(d)){Zt=0,_n=null,k_(i);break}i=function(){Zt===2&&Wt===e&&(Zt=7),hi(e)},d.then(i,i);break t;case 3:Zt=7;break t;case 4:Zt=5;break t;case 7:Fp(d)?(Zt=0,_n=null,k_(i)):(Zt=0,_n=null,Pa(e,i,d,7));break;case 5:var v=null;switch(Nt.tag){case 26:v=Nt.memoizedState;case 5:case 27:var T=Nt;if(!v||cy(v)){Zt=0,_n=null;var R=T.sibling;if(R!==null)Nt=R;else{var x=T.return;x!==null?(Nt=x,cc(x)):Nt=null}break e}}Zt=0,_n=null,Pa(e,i,d,5);break;case 6:Zt=0,_n=null,Pa(e,i,d,6);break;case 8:ed(),oe=6;break t;default:throw Error(r(462))}}kA();break}catch(G){O_(e,G)}while(!0);return xi=Or=null,w.H=l,w.A=h,ne=a,Nt!==null?0:(Wt=null,Ut=0,Vu(),oe)}function kA(){for(;Nt!==null&&!Dh();)x_(Nt)}function x_(e){var i=n_(e.alternate,e,Bi);e.memoizedProps=e.pendingProps,i===null?cc(e):Nt=i}function k_(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=Xg(a,i,i.pendingProps,i.type,void 0,Ut);break;case 11:i=Xg(a,i,i.pendingProps,i.type.render,i.ref,Ut);break;case 5:of(i);default:I_(a,i),i=Nt=w_(i,Bi),i=n_(a,i,Bi)}e.memoizedProps=e.pendingProps,i===null?cc(e):Nt=i}function Pa(e,i,a,l){xi=Or=null,of(i),Sa=null,Go=0;var h=i.return;try{if(SA(e,h,i,a,Ut)){oe=1,Ju(e,Cn(a,e.current)),Nt=null;return}}catch(d){if(h!==null)throw Nt=h,d;oe=1,Ju(e,Cn(a,e.current)),Nt=null;return}i.flags&32768?(Bt||l===1?e=!0:Va||(Ut&536870912)!==0?e=!1:(zi=e=!0,(l===2||l===3||l===6)&&(l=On.current,l!==null&&l.tag===13&&(l.flags|=16384))),P_(i,e)):cc(i)}function cc(e){var i=e;do{if((i.flags&32768)!==0){P_(i,zi);return}e=i.return;var a=CA(i.alternate,i,Bi);if(a!==null){Nt=a;return}if(i=i.sibling,i!==null){Nt=i;return}Nt=i=e}while(i!==null);oe===0&&(oe=5)}function P_(e,i){do{var a=NA(e.alternate,e);if(a!==null){a.flags&=32767,Nt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Nt=e;return}Nt=e=a}while(e!==null);oe=6,Nt=null}function U_(e,i,a,l,h,d,v,T,R,x){var G=w.T,W=st.p;try{st.p=2,w.T=null,PA(e,i,a,l,W,h,d,v,T,R,x)}finally{w.T=G,st.p=W}}function PA(e,i,a,l,h,d,v,T){do Ua();while(Pr!==null);if((ne&6)!==0)throw Error(r(327));var R=e.finishedWork;if(l=e.finishedLanes,R===null)return null;if(e.finishedWork=null,e.finishedLanes=0,R===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var x=R.lanes|R.childLanes;if(x|=Gh,fu(e,l,x,d,v,T),e===Wt&&(Nt=Wt=null,Ut=0),(R.subtreeFlags&10256)===0&&(R.flags&10256)===0||lc||(lc=!0,Wf=x,Zf=a,zA(vi,function(){return Ua(),null})),a=(R.flags&15990)!==0,(R.subtreeFlags&15990)!==0||a?(a=w.T,w.T=null,d=st.p,st.p=2,v=ne,ne|=4,bA(e,R),__(R,e),aA(pd,e.containerInfo),Ac=!!md,pd=md=null,e.current=R,d_(e,R.alternate,R),yo(),ne=v,st.p=d,w.T=a):e.current=R,lc?(lc=!1,Pr=e,ul=l):L_(e,x),x=e.pendingLanes,x===0&&(Vs=null),Eo(R.stateNode),hi(e),i!==null)for(h=e.onRecoverableError,R=0;R<i.length;R++)x=i[R],h(x.value,{componentStack:x.stack});return(ul&3)!==0&&Ua(),x=e.pendingLanes,(l&4194218)!==0&&(x&42)!==0?e===Jf?cl++:(cl=0,Jf=e):cl=0,hl(0),null}function L_(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Qo(i)))}function Ua(){if(Pr!==null){var e=Pr,i=Wf;Wf=0;var a=du(ul),l=w.T,h=st.p;try{if(st.p=32>a?32:a,w.T=null,Pr===null)var d=!1;else{a=Zf,Zf=null;var v=Pr,T=ul;if(Pr=null,ul=0,(ne&6)!==0)throw Error(r(331));var R=ne;if(ne|=4,A_(v.current),v_(v,v.current,T,a),ne=R,hl(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(ss,v)}catch{}d=!0}return d}finally{st.p=h,w.T=l,L_(e,i)}}return!1}function j_(e,i,a){i=Cn(a,i),i=Tf(e.stateNode,i,2),e=Is(e,i,2),e!==null&&(ue(e,2),hi(e))}function Xt(e,i,a){if(e.tag===3)j_(e,e,a);else for(;i!==null;){if(i.tag===3){j_(i,e,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Vs===null||!Vs.has(l))){e=Cn(a,e),a=qg(2),l=Is(i,a,2),l!==null&&(Hg(a,l,i,e),ue(l,2),hi(l));break}}i=i.return}}function sd(e,i,a){var l=e.pingCache;if(l===null){l=e.pingCache=new OA;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Qf=!0,h.add(a),e=UA.bind(null,e,i,a),i.then(e,e))}function UA(e,i,a){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Wt===e&&(Ut&a)===a&&(oe===4||oe===3&&(Ut&62914560)===Ut&&300>on()-Xf?(ne&2)===0&&ka(e,0):Yf|=a,xa===Ut&&(xa=0)),hi(e)}function z_(e,i){i===0&&(i=os()),e=vs(e,i),e!==null&&(ue(e,i),hi(e))}function LA(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),z_(e,a)}function jA(e,i){var a=0;switch(e.tag){case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),z_(e,a)}function zA(e,i){return ar(e,i)}var hc=null,La=null,rd=!1,fc=!1,ad=!1,Ur=0;function hi(e){e!==La&&e.next===null&&(La===null?hc=La=e:La=La.next=e),fc=!0,rd||(rd=!0,qA(BA))}function hl(e,i){if(!ad&&fc){ad=!0;do for(var a=!1,l=hc;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-Je(42|e)+1)-1,d&=h&~(v&~T),d=d&201326677?d&201326677|1:d?d|2:0}d!==0&&(a=!0,H_(l,d))}else d=Ut,d=Tn(l,l===Wt?d:0),(d&3)===0||as(l,d)||(a=!0,H_(l,d));l=l.next}while(a);ad=!1}}function BA(){fc=rd=!1;var e=0;Ur!==0&&(XA()&&(e=Ur),Ur=0);for(var i=on(),a=null,l=hc;l!==null;){var h=l.next,d=B_(l,i);d===0?(l.next=null,a===null?hc=h:a.next=h,h===null&&(La=a)):(a=l,(e!==0||(d&3)!==0)&&(fc=!0)),l=h}hl(e)}function B_(e,i){for(var a=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-Je(d),T=1<<v,R=h[v];R===-1?((T&a)===0||(T&l)!==0)&&(h[v]=na(T,i)):R<=i&&(e.expiredLanes|=T),d&=~T}if(i=Wt,a=Ut,a=Tn(e,e===i?a:0),l=e.callbackNode,a===0||e===i&&Zt===2||e.cancelPendingCommit!==null)return l!==null&&l!==null&&ea(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||as(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(l!==null&&ea(l),du(a)){case 2:case 8:a=Ne;break;case 32:a=vi;break;case 268435456:a=vo;break;default:a=vi}return l=q_.bind(null,e),a=ar(a,l),e.callbackPriority=i,e.callbackNode=a,i}return l!==null&&l!==null&&ea(l),e.callbackPriority=2,e.callbackNode=null,2}function q_(e,i){var a=e.callbackNode;if(Ua()&&e.callbackNode!==a)return null;var l=Ut;return l=Tn(e,e===Wt?l:0),l===0?null:(N_(e,l,i),B_(e,on()),e.callbackNode!=null&&e.callbackNode===a?q_.bind(null,e):null)}function H_(e,i){if(Ua())return null;N_(e,i,!0)}function qA(e){ZA(function(){(ne&6)!==0?ar(Te,e):e()})}function od(){return Ur===0&&(Ur=Ao()),Ur}function F_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ti(""+e)}function G_(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function HA(e,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=F_((h[Ae]||null).action),v=l.submitter;v&&(i=(i=v[Ae]||null)?F_(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var T=new ua("action","action",null,l,h);e.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ur!==0){var R=v?G_(h,v):new FormData(h);gf(a,{pending:!0,data:R,method:h.method,action:d},null,R)}}else typeof d=="function"&&(T.preventDefault(),R=v?G_(h,v):new FormData(h),gf(a,{pending:!0,data:R,method:h.method,action:d},d,R))},currentTarget:h}]})}}for(var ld=0;ld<Up.length;ld++){var ud=Up[ld],FA=ud.toLowerCase(),GA=ud[0].toUpperCase()+ud.slice(1);qn(FA,"on"+GA)}qn(Mp,"onAnimationEnd"),qn(Vp,"onAnimationIteration"),qn(xp,"onAnimationStart"),qn("dblclick","onDoubleClick"),qn("focusin","onFocus"),qn("focusout","onBlur"),qn(lA,"onTransitionRun"),qn(uA,"onTransitionStart"),qn(cA,"onTransitionCancel"),qn(kp,"onTransitionEnd"),ln("onMouseEnter",["mouseout","mouseover"]),ln("onMouseLeave",["mouseout","mouseover"]),ln("onPointerEnter",["pointerout","pointerover"]),ln("onPointerLeave",["pointerout","pointerover"]),fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fn("onBeforeInput",["compositionend","keypress","textInput","paste"]),fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fl));function K_(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],h=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var T=l[v],R=T.instance,x=T.currentTarget;if(T=T.listener,R!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=x;try{d(h)}catch(G){Zu(G)}h.currentTarget=null,d=R}else for(v=0;v<l.length;v++){if(T=l[v],R=T.instance,x=T.currentTarget,T=T.listener,R!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=x;try{d(h)}catch(G){Zu(G)}h.currentTarget=null,d=R}}}}function Vt(e,i){var a=i[lr];a===void 0&&(a=i[lr]=new Set);var l=e+"__bubble";a.has(l)||(Q_(i,e,2,!1),a.add(l))}function cd(e,i,a){var l=0;i&&(l|=4),Q_(a,e,l,i)}var dc="_reactListening"+Math.random().toString(36).slice(2);function hd(e){if(!e[dc]){e[dc]=!0,wo.forEach(function(a){a!=="selectionchange"&&(KA.has(a)||cd(a,!1,e),cd(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[dc]||(i[dc]=!0,cd("selectionchange",!1,i))}}function Q_(e,i,a,l){switch(gy(i)){case 2:var h=yS;break;case 8:h=vS;break;default:h=wd}a=h.bind(null,i,a,e),h=void 0,!bn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function fd(e,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var T=l.stateNode.containerInfo;if(T===h||T.nodeType===8&&T.parentNode===h)break;if(v===4)for(v=l.return;v!==null;){var R=v.tag;if((R===3||R===4)&&(R=v.stateNode.containerInfo,R===h||R.nodeType===8&&R.parentNode===h))return;v=v.return}for(;T!==null;){if(v=Bn(T),v===null)return;if(R=v.tag,R===5||R===6||R===26||R===27){l=d=v;continue t}T=T.parentNode}}l=l.return}yu(function(){var x=d,G=la(a),W=[];t:{var B=Pp.get(e);if(B!==void 0){var F=ua,lt=e;switch(e){case"keypress":if(ni(a)===0)break t;case"keydown":case"keyup":F=pa;break;case"focusin":lt="focus",F=fa;break;case"focusout":lt="blur",F=fa;break;case"beforeblur":case"afterblur":F=fa;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Uh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=Ru;break;case Mp:case Vp:case xp:F=da;break;case kp:F=Cu;break;case"scroll":case"scrollend":F=vu;break;case"wheel":F=ga;break;case"copy":case"cut":case"paste":F=ma;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Po;break;case"toggle":case"beforetoggle":F=Du}var At=(i&4)!==0,le=!At&&(e==="scroll"||e==="scrollend"),U=At?B!==null?B+"Capture":null:B;At=[];for(var M=x,z;M!==null;){var K=M;if(z=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||z===null||U===null||(K=dr(M,U),K!=null&&At.push(dl(M,K,z))),le)break;M=M.return}0<At.length&&(B=new F(B,lt,null,a,G),W.push({event:B,listeners:At}))}}if((i&7)===0){t:{if(B=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",B&&a!==wn&&(lt=a.relatedTarget||a.fromElement)&&(Bn(lt)||lt[Ei]))break t;if((F||B)&&(B=G.window===G?G:(B=G.ownerDocument)?B.defaultView||B.parentWindow:window,F?(lt=a.relatedTarget||a.toElement,F=x,lt=lt?Bn(lt):null,lt!==null&&(le=ft(lt),At=lt.tag,lt!==le||At!==5&&At!==27&&At!==6)&&(lt=null)):(F=null,lt=x),F!==lt)){if(At=Rn,K="onMouseLeave",U="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(At=Po,K="onPointerLeave",U="onPointerEnter",M="pointer"),le=F==null?B:fs(F),z=lt==null?B:fs(lt),B=new At(K,M+"leave",F,a,G),B.target=le,B.relatedTarget=z,K=null,Bn(G)===x&&(At=new At(U,M+"enter",lt,a,G),At.target=z,At.relatedTarget=le,K=At),le=K,F&&lt)e:{for(At=F,U=lt,M=0,z=At;z;z=ja(z))M++;for(z=0,K=U;K;K=ja(K))z++;for(;0<M-z;)At=ja(At),M--;for(;0<z-M;)U=ja(U),z--;for(;M--;){if(At===U||U!==null&&At===U.alternate)break e;At=ja(At),U=ja(U)}At=null}else At=null;F!==null&&Y_(W,B,F,At,!1),lt!==null&&le!==null&&Y_(W,le,lt,At,!0)}}t:{if(B=x?fs(x):window,F=B.nodeName&&B.nodeName.toLowerCase(),F==="select"||F==="input"&&B.type==="file")var ot=Tp;else if(we(B))if(Ap)ot=sA;else{ot=nA;var Ct=eA}else F=B.nodeName,!F||F.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?x&&No(x.elementType)&&(ot=Tp):ot=iA;if(ot&&(ot=ot(e,x))){Ci(W,ot,a,G);break t}Ct&&Ct(e,B,x),e==="focusout"&&x&&B.type==="number"&&x.memoizedProps.value!=null&&oa(B,"number",B.value)}switch(Ct=x?fs(x):window,e){case"focusin":(we(Ct)||Ct.contentEditable==="true")&&(_a=Ct,qh=x,jo=null);break;case"focusout":jo=qh=_a=null;break;case"mousedown":Hh=!0;break;case"contextmenu":case"mouseup":case"dragend":Hh=!1,Dp(W,a,G);break;case"selectionchange":if(oA)break;case"keydown":case"keyup":Dp(W,a,G)}var ht;if(ri)t:{switch(e){case"compositionstart":var pt="onCompositionStart";break t;case"compositionend":pt="onCompositionEnd";break t;case"compositionupdate":pt="onCompositionUpdate";break t}pt=void 0}else kt?H(e,a)&&(pt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(pt="onCompositionStart");pt&&(y&&a.locale!=="ko"&&(kt||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&kt&&(ht=Oo()):(ei=G,ys="value"in ei?ei.value:ei.textContent,kt=!0)),Ct=mc(x,pt),0<Ct.length&&(pt=new xo(pt,e,null,a,G),W.push({event:pt,listeners:Ct}),ht?pt.data=ht:(ht=J(a),ht!==null&&(pt.data=ht)))),(ht=p?Se(e,a):Pt(e,a))&&(pt=mc(x,"onBeforeInput"),0<pt.length&&(Ct=new xo("onBeforeInput","beforeinput",null,a,G),W.push({event:Ct,listeners:pt}),Ct.data=ht)),HA(W,e,x,a,G)}K_(W,i)})}function dl(e,i,a){return{instance:e,listener:i,currentTarget:a}}function mc(e,i){for(var a=i+"Capture",l=[];e!==null;){var h=e,d=h.stateNode;h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=dr(e,a),h!=null&&l.unshift(dl(e,h,d)),h=dr(e,i),h!=null&&l.push(dl(e,h,d))),e=e.return}return l}function ja(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Y_(e,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var T=a,R=T.alternate,x=T.stateNode;if(T=T.tag,R!==null&&R===l)break;T!==5&&T!==26&&T!==27||x===null||(R=x,h?(x=dr(a,d),x!=null&&v.unshift(dl(a,x,R))):h||(x=dr(a,d),x!=null&&v.push(dl(a,x,R)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var QA=/\r\n?/g,YA=/\u0000|\uFFFD/g;function $_(e){return(typeof e=="string"?e:""+e).replace(QA,`
`).replace(YA,"")}function X_(e,i){return i=$_(i),$_(e)===i}function pc(){}function $t(e,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Sn(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Sn(e,""+l);break;case"className":ps(e,"class",l);break;case"tabIndex":ps(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ps(e,a,l);break;case"style":_u(e,l,d);break;case"data":if(i!=="object"){ps(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=ti(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&$t(e,i,"name",h.name,h,null),$t(e,i,"formEncType",h.formEncType,h,null),$t(e,i,"formMethod",h.formMethod,h,null),$t(e,i,"formTarget",h.formTarget,h,null)):($t(e,i,"encType",h.encType,h,null),$t(e,i,"method",h.method,h,null),$t(e,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=ti(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=pc);break;case"onScroll":l!=null&&Vt("scroll",e);break;case"onScrollEnd":l!=null&&Vt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=ti(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Vt("beforetoggle",e),Vt("toggle",e),ms(e,"popover",l);break;case"xlinkActuate":An(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":An(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":An(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":An(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":An(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":An(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":An(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":An(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":An(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ms(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=kh.get(a)||a,ms(e,a,l))}}function dd(e,i,a,l,h,d){switch(a){case"style":_u(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Sn(e,l):(typeof l=="number"||typeof l=="bigint")&&Sn(e,""+l);break;case"onScroll":l!=null&&Vt("scroll",e);break;case"onScrollEnd":l!=null&&Vt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=pc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ra.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=e[Ae]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,l,h);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):ms(e,a,l)}}}function ze(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",e),Vt("load",e);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:$t(e,i,d,v,a,null)}}h&&$t(e,i,"srcSet",a.srcSet,a,null),l&&$t(e,i,"src",a.src,a,null);return;case"input":Vt("invalid",e);var T=d=v=h=null,R=null,x=null;for(l in a)if(a.hasOwnProperty(l)){var G=a[l];if(G!=null)switch(l){case"name":h=G;break;case"type":v=G;break;case"checked":R=G;break;case"defaultChecked":x=G;break;case"value":d=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:$t(e,i,l,G,a,null)}}hr(e,d,T,R,x,v,h,!1),cr(e);return;case"select":Vt("invalid",e),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":v=T;break;case"multiple":l=T;default:$t(e,i,h,T,a,null)}i=d,a=v,e.multiple=!!l,i!=null?zt(e,!!l,i,!1):a!=null&&zt(e,!!l,a,!0);return;case"textarea":Vt("invalid",e),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:$t(e,i,v,T,a,null)}_s(e,l,h,d),cr(e);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(l=a[R],l!=null))switch(R){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:$t(e,i,R,l,a,null)}return;case"dialog":Vt("cancel",e),Vt("close",e);break;case"iframe":case"object":Vt("load",e);break;case"video":case"audio":for(l=0;l<fl.length;l++)Vt(fl[l],e);break;case"image":Vt("error",e),Vt("load",e);break;case"details":Vt("toggle",e);break;case"embed":case"source":case"link":Vt("error",e),Vt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(x in a)if(a.hasOwnProperty(x)&&(l=a[x],l!=null))switch(x){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:$t(e,i,x,l,a,null)}return;default:if(No(i)){for(G in a)a.hasOwnProperty(G)&&(l=a[G],l!==void 0&&dd(e,i,G,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&$t(e,i,T,l,a,null))}function $A(e,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,T=null,R=null,x=null,G=null;for(F in a){var W=a[F];if(a.hasOwnProperty(F)&&W!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":R=W;default:l.hasOwnProperty(F)||$t(e,i,F,null,l,W)}}for(var B in l){var F=l[B];if(W=a[B],l.hasOwnProperty(B)&&(F!=null||W!=null))switch(B){case"type":d=F;break;case"name":h=F;break;case"checked":x=F;break;case"defaultChecked":G=F;break;case"value":v=F;break;case"defaultValue":T=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,i));break;default:F!==W&&$t(e,i,B,F,l,W)}}gs(e,v,T,R,x,G,d,h);return;case"select":F=v=T=B=null;for(d in a)if(R=a[d],a.hasOwnProperty(d)&&R!=null)switch(d){case"value":break;case"multiple":F=R;default:l.hasOwnProperty(d)||$t(e,i,d,null,l,R)}for(h in l)if(d=l[h],R=a[h],l.hasOwnProperty(h)&&(d!=null||R!=null))switch(h){case"value":B=d;break;case"defaultValue":T=d;break;case"multiple":v=d;default:d!==R&&$t(e,i,h,d,l,R)}i=T,a=v,l=F,B!=null?zt(e,!!a,B,!1):!!l!=!!a&&(i!=null?zt(e,!!a,i,!0):zt(e,!!a,a?[]:"",!1));return;case"textarea":F=B=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:$t(e,i,T,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":B=h;break;case"defaultValue":F=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&$t(e,i,v,h,l,d)}fr(e,B,F);return;case"option":for(var lt in a)if(B=a[lt],a.hasOwnProperty(lt)&&B!=null&&!l.hasOwnProperty(lt))switch(lt){case"selected":e.selected=!1;break;default:$t(e,i,lt,null,l,B)}for(R in l)if(B=l[R],F=a[R],l.hasOwnProperty(R)&&B!==F&&(B!=null||F!=null))switch(R){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:$t(e,i,R,B,l,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var At in a)B=a[At],a.hasOwnProperty(At)&&B!=null&&!l.hasOwnProperty(At)&&$t(e,i,At,null,l,B);for(x in l)if(B=l[x],F=a[x],l.hasOwnProperty(x)&&B!==F&&(B!=null||F!=null))switch(x){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,i));break;default:$t(e,i,x,B,l,F)}return;default:if(No(i)){for(var le in a)B=a[le],a.hasOwnProperty(le)&&B!==void 0&&!l.hasOwnProperty(le)&&dd(e,i,le,void 0,l,B);for(G in l)B=l[G],F=a[G],!l.hasOwnProperty(G)||B===F||B===void 0&&F===void 0||dd(e,i,G,B,l,F);return}}for(var U in a)B=a[U],a.hasOwnProperty(U)&&B!=null&&!l.hasOwnProperty(U)&&$t(e,i,U,null,l,B);for(W in l)B=l[W],F=a[W],!l.hasOwnProperty(W)||B===F||B==null&&F==null||$t(e,i,W,B,l,F)}var md=null,pd=null;function gc(e){return e.nodeType===9?e:e.ownerDocument}function W_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Z_(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function gd(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var _d=null;function XA(){var e=window.event;return e&&e.type==="popstate"?e===_d?!1:(_d=e,!0):(_d=null,!1)}var J_=typeof setTimeout=="function"?setTimeout:void 0,WA=typeof clearTimeout=="function"?clearTimeout:void 0,ty=typeof Promise=="function"?Promise:void 0,ZA=typeof queueMicrotask=="function"?queueMicrotask:typeof ty<"u"?function(e){return ty.resolve(null).then(e).catch(JA)}:J_;function JA(e){setTimeout(function(){throw e})}function yd(e,i){var a=i,l=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(l===0){e.removeChild(h),Tl(i);return}l--}else a!=="$"&&a!=="$?"&&a!=="$!"||l++;a=h}while(a);Tl(i)}function vd(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":vd(a),ur(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function tS(e,i,a,l){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[hs])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Gn(e.nextSibling),e===null)break}return null}function eS(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Gn(e.nextSibling),e===null))return null;return e}function Gn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}function ey(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function ny(e,i,a){switch(i=gc(a),e){case"html":if(e=i.documentElement,!e)throw Error(r(452));return e;case"head":if(e=i.head,!e)throw Error(r(453));return e;case"body":if(e=i.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}var Pn=new Map,iy=new Set;function _c(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var Hi=st.d;st.d={f:nS,r:iS,D:sS,C:rS,L:aS,m:oS,X:uS,S:lS,M:cS};function nS(){var e=Hi.f(),i=uc();return e||i}function iS(e){var i=Ti(e);i!==null&&i.tag===5&&i.type==="form"?Dg(i):Hi.r(e)}var za=typeof document>"u"?null:document;function sy(e,i,a){var l=za;if(l&&typeof i=="string"&&i){var h=re(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),iy.has(h)||(iy.add(h),e={rel:e,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),ze(i,"link",e),te(i),l.head.appendChild(i)))}}function sS(e){Hi.D(e),sy("dns-prefetch",e,null)}function rS(e,i){Hi.C(e,i),sy("preconnect",e,i)}function aS(e,i,a){Hi.L(e,i,a);var l=za;if(l&&e&&i){var h='link[rel="preload"][as="'+re(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+re(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+re(a.imageSizes)+'"]')):h+='[href="'+re(e)+'"]';var d=h;switch(i){case"style":d=Ba(e);break;case"script":d=qa(e)}Pn.has(d)||(e=D({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Pn.set(d,e),l.querySelector(h)!==null||i==="style"&&l.querySelector(ml(d))||i==="script"&&l.querySelector(pl(d))||(i=l.createElement("link"),ze(i,"link",e),te(i),l.head.appendChild(i)))}}function oS(e,i){Hi.m(e,i);var a=za;if(a&&e){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+re(l)+'"][href="'+re(e)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=qa(e)}if(!Pn.has(d)&&(e=D({rel:"modulepreload",href:e},i),Pn.set(d,e),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(pl(d)))return}l=a.createElement("link"),ze(l,"link",e),te(l),a.head.appendChild(l)}}}function lS(e,i,a){Hi.S(e,i,a);var l=za;if(l&&e){var h=ds(l).hoistableStyles,d=Ba(e);i=i||"default";var v=h.get(d);if(!v){var T={loading:0,preload:null};if(v=l.querySelector(ml(d)))T.loading=5;else{e=D({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Pn.get(d))&&Ed(e,a);var R=v=l.createElement("link");te(R),ze(R,"link",e),R._p=new Promise(function(x,G){R.onload=x,R.onerror=G}),R.addEventListener("load",function(){T.loading|=1}),R.addEventListener("error",function(){T.loading|=2}),T.loading|=4,yc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(d,v)}}}function uS(e,i){Hi.X(e,i);var a=za;if(a&&e){var l=ds(a).hoistableScripts,h=qa(e),d=l.get(h);d||(d=a.querySelector(pl(h)),d||(e=D({src:e,async:!0},i),(i=Pn.get(h))&&Td(e,i),d=a.createElement("script"),te(d),ze(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function cS(e,i){Hi.M(e,i);var a=za;if(a&&e){var l=ds(a).hoistableScripts,h=qa(e),d=l.get(h);d||(d=a.querySelector(pl(h)),d||(e=D({src:e,async:!0,type:"module"},i),(i=Pn.get(h))&&Td(e,i),d=a.createElement("script"),te(d),ze(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function ry(e,i,a,l){var h=(h=En.current)?_c(h):null;if(!h)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ba(a.href),a=ds(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ba(a.href);var d=ds(h).hoistableStyles,v=d.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=h.querySelector(ml(e)))&&!d._p&&(v.instance=d,v.state.loading=5),Pn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Pn.set(e,a),d||hS(h,e,a,v.state))),i&&l===null)throw Error(r(528,""));return v}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=qa(a),a=ds(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Ba(e){return'href="'+re(e)+'"'}function ml(e){return'link[rel="stylesheet"]['+e+"]"}function ay(e){return D({},e,{"data-precedence":e.precedence,precedence:null})}function hS(e,i,a,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),ze(i,"link",a),te(i),e.head.appendChild(i))}function qa(e){return'[src="'+re(e)+'"]'}function pl(e){return"script[async]"+e}function oy(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+re(a.href)+'"]');if(l)return i.instance=l,te(l),l;var h=D({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),te(l),ze(l,"style",h),yc(l,a.precedence,e),i.instance=l;case"stylesheet":h=Ba(a.href);var d=e.querySelector(ml(h));if(d)return i.state.loading|=4,i.instance=d,te(d),d;l=ay(a),(h=Pn.get(h))&&Ed(l,h),d=(e.ownerDocument||e).createElement("link"),te(d);var v=d;return v._p=new Promise(function(T,R){v.onload=T,v.onerror=R}),ze(d,"link",l),i.state.loading|=4,yc(d,a.precedence,e),i.instance=d;case"script":return d=qa(a.src),(h=e.querySelector(pl(d)))?(i.instance=h,te(h),h):(l=a,(h=Pn.get(d))&&(l=D({},a),Td(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),te(h),ze(h,"link",l),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,yc(l,a.precedence,e));return i.instance}function yc(e,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var T=l[v];if(T.dataset.precedence===i)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Ed(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Td(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var vc=null;function ly(e,i,a){if(vc===null){var l=new Map,h=vc=new Map;h.set(a,l)}else h=vc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[hs]||d[De]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=e+v;var T=l.get(v);T?T.push(d):l.set(v,[d])}}return l}function uy(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function fS(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function cy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var gl=null;function dS(){}function mS(e,i,a){if(gl===null)throw Error(r(475));var l=gl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Ba(a.href),d=e.querySelector(ml(h));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Ec.bind(l),e.then(l,l)),i.state.loading|=4,i.instance=d,te(d);return}d=e.ownerDocument||e,a=ay(a),(h=Pn.get(h))&&Ed(a,h),d=d.createElement("link"),te(d);var v=d;v._p=new Promise(function(T,R){v.onload=T,v.onerror=R}),ze(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Ec.bind(l),e.addEventListener("load",i),e.addEventListener("error",i))}}function pS(){if(gl===null)throw Error(r(475));var e=gl;return e.stylesheets&&e.count===0&&Ad(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&Ad(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Ec(){if(this.count--,this.count===0){if(this.stylesheets)Ad(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Tc=null;function Ad(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Tc=new Map,i.forEach(gS,e),Tc=null,Ec.call(e))}function gS(e,i){if(!(i.state.loading&4)){var a=Tc.get(e);if(a)var l=a.get(null);else{a=new Map,Tc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=Ec.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var _l={$$typeof:V,Provider:null,Consumer:null,_currentValue:Rt,_currentValue2:Rt,_threadCount:0};function _S(e,i,a,l,h,d,v,T){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ia(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ia(0),this.hiddenUpdates=ia(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function hy(e,i,a,l,h,d,v,T,R,x,G,W){return e=new _S(e,i,a,v,T,R,x,W),i=1,d===!0&&(i|=24),d=xn(3,null,null,i),e.current=d,d.stateNode=e,i=Jh(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},xf(d),e}function fy(e){return e?(e=Ea,e):Ea}function dy(e,i,a,l,h,d){h=fy(h),l.context===null?l.context=h:l.pendingContext=h,l=Rs(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Is(e,l,i),a!==null&&(sn(a,e,i),tl(a,e,i))}function my(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Sd(e,i){my(e,i),(e=e.alternate)&&my(e,i)}function py(e){if(e.tag===13){var i=vs(e,67108864);i!==null&&sn(i,e,67108864),Sd(e,67108864)}}var Ac=!0;function yS(e,i,a,l){var h=w.T;w.T=null;var d=st.p;try{st.p=2,wd(e,i,a,l)}finally{st.p=d,w.T=h}}function vS(e,i,a,l){var h=w.T;w.T=null;var d=st.p;try{st.p=8,wd(e,i,a,l)}finally{st.p=d,w.T=h}}function wd(e,i,a,l){if(Ac){var h=bd(l);if(h===null)fd(e,i,l,Sc,a),_y(e,l);else if(TS(h,e,i,a,l))l.stopPropagation();else if(_y(e,l),i&4&&-1<ES.indexOf(e)){for(;h!==null;){var d=Ti(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=zn(d.pendingLanes);if(v!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var R=1<<31-Je(v);T.entanglements[1]|=R,v&=~R}hi(d),(ne&6)===0&&(ac=on()+500,hl(0))}}break;case 13:T=vs(d,2),T!==null&&sn(T,d,2),uc(),Sd(d,2)}if(d=bd(l),d===null&&fd(e,i,l,Sc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else fd(e,i,l,null,a)}}function bd(e){return e=la(e),Rd(e)}var Sc=null;function Rd(e){if(Sc=null,e=Bn(e),e!==null){var i=ft(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=Ht(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Sc=e,null}function gy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lu()){case Te:return 2;case Ne:return 8;case vi:case uu:return 32;case vo:return 268435456;default:return 32}default:return 32}}var Id=!1,xs=null,ks=null,Ps=null,yl=new Map,vl=new Map,Us=[],ES="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _y(e,i){switch(e){case"focusin":case"focusout":xs=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":yl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":vl.delete(i.pointerId)}}function El(e,i,a,l,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Ti(i),i!==null&&py(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function TS(e,i,a,l,h){switch(i){case"focusin":return xs=El(xs,e,i,a,l,h),!0;case"dragenter":return ks=El(ks,e,i,a,l,h),!0;case"mouseover":return Ps=El(Ps,e,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return yl.set(d,El(yl.get(d)||null,e,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,vl.set(d,El(vl.get(d)||null,e,i,a,l,h)),!0}return!1}function yy(e){var i=Bn(e.target);if(i!==null){var a=ft(i);if(a!==null){if(i=a.tag,i===13){if(i=Ht(a),i!==null){e.blockedOn=i,cs(e.priority,function(){if(a.tag===13){var l=yn(),h=vs(a,l);h!==null&&sn(h,a,l),Sd(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=bd(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);wn=l,a.target.dispatchEvent(l),wn=null}else return i=Ti(a),i!==null&&py(i),e.blockedOn=a,!1;i.shift()}return!0}function vy(e,i,a){wc(e)&&a.delete(i)}function AS(){Id=!1,xs!==null&&wc(xs)&&(xs=null),ks!==null&&wc(ks)&&(ks=null),Ps!==null&&wc(Ps)&&(Ps=null),yl.forEach(vy),vl.forEach(vy)}function bc(e,i){e.blockedOn===i&&(e.blockedOn=null,Id||(Id=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,AS)))}var Rc=null;function Ey(e){Rc!==e&&(Rc=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Rc===e&&(Rc=null);for(var i=0;i<e.length;i+=3){var a=e[i],l=e[i+1],h=e[i+2];if(typeof l!="function"){if(Rd(l||a)===null)continue;break}var d=Ti(a);d!==null&&(e.splice(i,3),i-=3,gf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Tl(e){function i(R){return bc(R,e)}xs!==null&&bc(xs,e),ks!==null&&bc(ks,e),Ps!==null&&bc(Ps,e),yl.forEach(i),vl.forEach(i);for(var a=0;a<Us.length;a++){var l=Us[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Us.length&&(a=Us[0],a.blockedOn===null);)yy(a),a.blockedOn===null&&Us.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[Ae]||null;if(typeof d=="function")v||Ey(a);else if(v){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Ae]||null)T=v.formAction;else if(Rd(h)!==null)continue}else T=v.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),Ey(a)}}}function Cd(e){this._internalRoot=e}Ic.prototype.render=Cd.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=yn();dy(a,l,e,i,null,null)},Ic.prototype.unmount=Cd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;e.tag===0&&Ua(),dy(e.current,2,null,e,null,null),uc(),i[Ei]=null}};function Ic(e){this._internalRoot=e}Ic.prototype.unstable_scheduleHydration=function(e){if(e){var i=mu();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Us.length&&i!==0&&i<Us[a].priority;a++);Us.splice(a,0,e),a===0&&yy(e)}};var Ty=t.version;if(Ty!=="19.0.0")throw Error(r(527,Ty,"19.0.0"));st.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=Z(i),e=e!==null?ut(e):null,e=e===null?null:e.stateNode,e};var SS={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:w,findFiberByHostInstance:Bn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cc.isDisabled&&Cc.supportsFiber)try{ss=Cc.inject(SS),Ge=Cc}catch{}}return Sl.createRoot=function(e,i){if(!o(e))throw Error(r(299));var a=!1,l="",h=Lg,d=jg,v=zg,T=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=hy(e,1,!1,null,null,a,l,h,d,v,T,null),e[Ei]=i.current,hd(e.nodeType===8?e.parentNode:e),new Cd(i)},Sl.hydrateRoot=function(e,i,a){if(!o(e))throw Error(r(299));var l=!1,h="",d=Lg,v=jg,T=zg,R=null,x=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(R=a.unstable_transitionCallbacks),a.formState!==void 0&&(x=a.formState)),i=hy(e,1,!0,i,a??null,l,h,d,v,T,R,x),i.context=fy(null),a=i.current,l=yn(),h=Rs(l),h.callback=null,Is(a,h,l),i.current.lanes=l,ue(i,l),hi(i),e[Ei]=i.current,hd(e),new Ic(i)},Sl.version="19.0.0",Sl}var Oy;function xS(){if(Oy)return Od.exports;Oy=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Od.exports=VS(),Od.exports}var kS=xS();const PS=wE(kS),US=({navigate:s})=>(mt.useEffect(()=>{const t=document.querySelector(".typing"),n=["Track Workouts","Collect Points","Earn Rewards"];let r=0,o=0,u=!1;function f(){if(!t)return;const et=n[r];u?(t.textContent=et.substring(0,o-1),o--):(t.textContent=et.substring(0,o+1),o++),!u&&o===et.length?(u=!0,setTimeout(f,1500)):u&&o===0?(u=!1,r=(r+1)%n.length,setTimeout(f,500)):setTimeout(f,u?50:100)}f();const m=document.querySelectorAll(".skill-progress");function g(){m.forEach(et=>{const nt=et.getAttribute("data-progress");nt&&et.setAttribute("style",`width: ${nt}%`)})}const _=new IntersectionObserver(et=>{et.forEach(nt=>{nt.isIntersecting&&(g(),_.unobserve(nt.target))})},{threshold:.5});document.querySelectorAll(".skills").forEach(et=>{_.observe(et)}),document.querySelectorAll('a[href^="#"]').forEach(et=>{et.addEventListener("click",nt=>{nt.preventDefault();const Tt=et.getAttribute("href");if(Tt){const vt=document.querySelector(Tt);vt&&vt.scrollIntoView({behavior:"smooth"})}})});const C=document.querySelector(".nav-toggle"),V=document.querySelector(".nav-links");C&&V&&C.addEventListener("click",()=>{V.classList.toggle("active")});const q=document.querySelectorAll("section"),Q=document.querySelectorAll(".nav-links a"),X=()=>{let et="";q.forEach(nt=>{const Tt=nt.offsetTop;window.scrollY>=Tt-300&&(et=nt.getAttribute("id")||"")}),Q.forEach(nt=>{nt.classList.remove("active");const Tt=nt.getAttribute("href");Tt&&Tt.slice(1)===et&&nt.classList.add("active")})};window.addEventListener("scroll",X),document.querySelectorAll(".form-group").forEach(et=>{const nt=et.querySelector("input, textarea"),Tt=et.querySelector("label");nt&&Tt&&(nt.addEventListener("focus",()=>{Tt.classList.add("active")}),nt.addEventListener("blur",()=>{nt.value===""&&Tt.classList.remove("active")}))})},[]),b.jsxs("div",{className:"landing-page",children:[b.jsxs("div",{className:"animated-background",children:[b.jsx("div",{className:"cube"}),b.jsx("div",{className:"cube"}),b.jsx("div",{className:"cube"}),b.jsx("div",{className:"cube"}),b.jsx("div",{className:"cube"})]}),b.jsxs("div",{className:"container",children:[b.jsxs("header",{className:"header",children:[b.jsx("div",{className:"logo",children:"FitCoin"}),b.jsxs("nav",{className:"nav",children:[b.jsxs("div",{className:"nav-toggle",children:[b.jsx("span",{}),b.jsx("span",{}),b.jsx("span",{})]}),b.jsxs("ul",{className:"nav-links",children:[b.jsx("li",{children:b.jsx("a",{href:"#home",className:"active",children:"Home"})}),b.jsx("li",{children:b.jsx("a",{href:"#work",children:"Work"})}),b.jsx("li",{children:b.jsx("a",{href:"#about",children:"About"})}),b.jsx("li",{children:b.jsx("a",{href:"#contact",children:"Contact"})})]})]})]}),b.jsx("section",{id:"home",className:"hero",children:b.jsxs("div",{className:"hero-content",children:[b.jsxs("div",{className:"hero-text",children:[b.jsx("h1",{className:"glitch-text","data-text":"Rewarding your Fitness",children:"Rewarding your Fitness"}),b.jsx("div",{className:"typing-container",children:b.jsx("span",{className:"typing"})}),b.jsx("p",{className:"hero-description",children:"Transform your fitness journey into a fun and rewarding experience"}),b.jsxs("div",{className:"cta-buttons",children:[b.jsx("button",{className:"btn primary",onClick:()=>s("/login"),children:"Sign In"}),b.jsx("button",{className:"btn secondary",onClick:()=>s("/signup"),children:"Sign Up"})]})]}),b.jsx("div",{className:"hero-image",children:b.jsxs("div",{className:"circle-container",children:[b.jsx("div",{className:"circle"}),b.jsx("img",{src:"https://i.imgur.com/T7Am8ag.jpeg?w=500&h=500&fit=crop",alt:"Profile",className:"profile-img"})]})})]})}),b.jsxs("section",{id:"work",className:"work",children:[b.jsx("h2",{className:"section-title",children:"Featured Work"}),b.jsxs("div",{className:"work-grid",children:[b.jsxs("div",{className:"work-card",children:[b.jsx("div",{className:"work-image",children:b.jsx("img",{src:"https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=500&h=300&fit=crop",alt:"Project 1"})}),b.jsxs("div",{className:"work-content",children:[b.jsx("h3",{children:"Project One"}),b.jsx("p",{children:"Web Development"}),b.jsx("a",{href:"#",className:"btn small",children:"View Project"})]})]}),b.jsxs("div",{className:"work-card",children:[b.jsx("div",{className:"work-image",children:b.jsx("img",{src:"https://images.unsplash.com/photo-1555099962-4199c345e5dd?w=500&h=300&fit=crop",alt:"Project 2"})}),b.jsxs("div",{className:"work-content",children:[b.jsx("h3",{children:"Project Two"}),b.jsx("p",{children:"UI/UX Design"}),b.jsx("a",{href:"#",className:"btn small",children:"View Project"})]})]}),b.jsxs("div",{className:"work-card",children:[b.jsx("div",{className:"work-image",children:b.jsx("img",{src:"https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=500&h=300&fit=crop",alt:"Project 3"})}),b.jsxs("div",{className:"work-content",children:[b.jsx("h3",{children:"Project Three"}),b.jsx("p",{children:"App Development"}),b.jsx("a",{href:"#",className:"btn small",children:"View Project"})]})]})]})]}),b.jsxs("section",{id:"about",className:"about",children:[b.jsx("h2",{className:"section-title",children:"About Us"}),b.jsx("div",{className:"about-content",children:b.jsxs("div",{className:"skills",children:[b.jsxs("div",{className:"skill-card",children:[b.jsx("div",{className:"skill-title",children:"Web Development"}),b.jsx("div",{className:"skill-bar",children:b.jsx("div",{className:"skill-progress","data-progress":"90"})})]}),b.jsxs("div",{className:"skill-card",children:[b.jsx("div",{className:"skill-title",children:"UI/UX Design"}),b.jsx("div",{className:"skill-bar",children:b.jsx("div",{className:"skill-progress","data-progress":"85"})})]}),b.jsxs("div",{className:"skill-card",children:[b.jsx("div",{className:"skill-title",children:"Mobile Development"}),b.jsx("div",{className:"skill-bar",children:b.jsx("div",{className:"skill-progress","data-progress":"75"})})]})]})})]}),b.jsxs("section",{id:"contact",className:"contact",children:[b.jsx("h2",{className:"section-title",children:"Get in Touch"}),b.jsx("div",{className:"contact-container",children:b.jsxs("form",{className:"contact-form",children:[b.jsxs("div",{className:"form-group",children:[b.jsx("input",{type:"text",required:!0}),b.jsx("label",{children:"Name"}),b.jsx("span",{className:"line"})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("input",{type:"email",required:!0}),b.jsx("label",{children:"Email"}),b.jsx("span",{className:"line"})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("textarea",{required:!0}),b.jsx("label",{children:"Message"}),b.jsx("span",{className:"line"})]}),b.jsx("button",{type:"submit",className:"btn primary",children:"Send Message"})]})})]})]})]})),LS=()=>{};var My={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=function(s){const t=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},jS=function(s){const t=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],f=s[n++],m=s[n++],g=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],f=s[n++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return t.join("")},RE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],f=o+1<s.length,m=f?s[o+1]:0,g=o+2<s.length,_=g?s[o+2]:0,E=u>>2,S=(u&3)<<4|m>>4;let C=(m&15)<<2|_>>6,V=_&63;g||(V=64,f||(C=64)),r.push(n[E],n[S],n[C],n[V])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(bE(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):jS(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],m=o<s.length?n[s.charAt(o)]:0;++o;const _=o<s.length?n[s.charAt(o)]:64;++o;const S=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||m==null||_==null||S==null)throw new zS;const C=u<<2|m>>4;if(r.push(C),_!==64){const V=m<<4&240|_>>2;if(r.push(V),S!==64){const q=_<<6&192|S;r.push(q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class zS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BS=function(s){const t=bE(s);return RE.encodeByteArray(t,!0)},Kc=function(s){return BS(s).replace(/\./g,"")},IE=function(s){try{return RE.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=()=>qS().__FIREBASE_DEFAULTS__,FS=()=>{if(typeof process>"u"||typeof My>"u")return;const s=My.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},GS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&IE(s[1]);return t&&JSON.parse(t)},ch=()=>{try{return LS()||HS()||FS()||GS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},CE=s=>{var t,n;return(n=(t=ch())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[s]},KS=s=>{const t=CE(s);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},NE=()=>{var s;return(s=ch())===null||s===void 0?void 0:s.config},DE=s=>{var t;return(t=ch())===null||t===void 0?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Kc(JSON.stringify(n)),Kc(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $S(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function XS(){var s;const t=(s=ch())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function JS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tw(){const s=We();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function ew(){return!XS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nw(){try{return typeof indexedDB=="object"}catch{return!1}}function iw(){return new Promise((s,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;t(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="FirebaseError";class ts extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=sw,Object.setPrototypeOf(this,ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$l.prototype.create)}}class $l{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},o=`${this.service}/${t}`,u=this.errors[t],f=u?rw(u,r):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new ts(o,m,r)}}function rw(s,t){return s.replace(aw,(n,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const aw=/\{\$([^}]+)}/g;function ow(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Br(s,t){if(s===t)return!0;const n=Object.keys(s),r=Object.keys(t);for(const o of n){if(!r.includes(o))return!1;const u=s[o],f=t[o];if(Vy(u)&&Vy(f)){if(!Br(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Vy(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(s){const t=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function wl(s){const t={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");t[decodeURIComponent(o)]=decodeURIComponent(u)}}),t}function bl(s){const t=s.indexOf("?");if(!t)return"";const n=s.indexOf("#",t);return s.substring(t,n>0?n:void 0)}function lw(s,t){const n=new uw(s,t);return n.subscribe.bind(n)}class uw{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let o;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");cw(t,["next","error","complete"])?o=t:o={next:t,error:n,complete:r},o.next===void 0&&(o.next=kd),o.error===void 0&&(o.error=kd),o.complete===void 0&&(o.complete=kd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cw(s,t){if(typeof s!="object"||s===null)return!1;for(const n of t)if(n in s&&typeof s[n]=="function")return!0;return!1}function kd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(s){return s&&s._delegate?s._delegate:s}class qr{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new QS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(dw(t))try{this.getOrInitializeService({instanceIdentifier:Lr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=Lr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Lr){return this.instances.has(t)}getOptions(t=Lr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&f.resolve(o)}return o}onInit(t,n){var r;const o=this.normalizeInstanceIdentifier(n),u=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;u.add(t),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&t(f,o),()=>{u.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fw(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Lr){return this.component?this.component.multipleInstances?t:Lr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fw(s){return s===Lr?void 0:s}function dw(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new hw(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ot||(Ot={}));const pw={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},gw=Ot.INFO,_w={[Ot.DEBUG]:"log",[Ot.VERBOSE]:"log",[Ot.INFO]:"info",[Ot.WARN]:"warn",[Ot.ERROR]:"error"},yw=(s,t,...n)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=_w[t];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ym{constructor(t){this.name=t,this._logLevel=gw,this._logHandler=yw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?pw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ot.DEBUG,...t),this._logHandler(this,Ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ot.VERBOSE,...t),this._logHandler(this,Ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ot.INFO,...t),this._logHandler(this,Ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ot.WARN,...t),this._logHandler(this,Ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ot.ERROR,...t),this._logHandler(this,Ot.ERROR,...t)}}const vw=(s,t)=>t.some(n=>s instanceof n);let xy,ky;function Ew(){return xy||(xy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Tw(){return ky||(ky=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OE=new WeakMap,Kd=new WeakMap,ME=new WeakMap,Pd=new WeakMap,vm=new WeakMap;function Aw(s){const t=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{n(Gs(s.result)),o()},f=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",f)});return t.then(n=>{n instanceof IDBCursor&&OE.set(n,s)}).catch(()=>{}),vm.set(t,s),t}function Sw(s){if(Kd.has(s))return;const t=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});Kd.set(s,t)}let Qd={get(s,t,n){if(s instanceof IDBTransaction){if(t==="done")return Kd.get(s);if(t==="objectStoreNames")return s.objectStoreNames||ME.get(s);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gs(s[t])},set(s,t,n){return s[t]=n,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function ww(s){Qd=s(Qd)}function bw(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=s.call(Ud(this),t,...n);return ME.set(r,t.sort?t.sort():[t]),Gs(r)}:Tw().includes(s)?function(...t){return s.apply(Ud(this),t),Gs(OE.get(this))}:function(...t){return Gs(s.apply(Ud(this),t))}}function Rw(s){return typeof s=="function"?bw(s):(s instanceof IDBTransaction&&Sw(s),vw(s,Ew())?new Proxy(s,Qd):s)}function Gs(s){if(s instanceof IDBRequest)return Aw(s);if(Pd.has(s))return Pd.get(s);const t=Rw(s);return t!==s&&(Pd.set(s,t),vm.set(t,s)),t}const Ud=s=>vm.get(s);function Iw(s,t,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(s,t),m=Gs(f);return r&&f.addEventListener("upgradeneeded",g=>{r(Gs(f.result),g.oldVersion,g.newVersion,Gs(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const Cw=["get","getKey","getAll","getAllKeys","count"],Nw=["put","add","delete","clear"],Ld=new Map;function Py(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Ld.get(t))return Ld.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=Nw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Cw.includes(n)))return;const u=async function(f,...m){const g=this.transaction(f,o?"readwrite":"readonly");let _=g.store;return r&&(_=_.index(m.shift())),(await Promise.all([_[n](...m),o&&g.done]))[0]};return Ld.set(t,u),u}ww(s=>({...s,get:(t,n,r)=>Py(t,n)||s.get(t,n,r),has:(t,n)=>!!Py(t,n)||s.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ow(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Ow(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Yd="@firebase/app",Uy="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new ym("@firebase/app"),Mw="@firebase/app-compat",Vw="@firebase/analytics-compat",xw="@firebase/analytics",kw="@firebase/app-check-compat",Pw="@firebase/app-check",Uw="@firebase/auth",Lw="@firebase/auth-compat",jw="@firebase/database",zw="@firebase/data-connect",Bw="@firebase/database-compat",qw="@firebase/functions",Hw="@firebase/functions-compat",Fw="@firebase/installations",Gw="@firebase/installations-compat",Kw="@firebase/messaging",Qw="@firebase/messaging-compat",Yw="@firebase/performance",$w="@firebase/performance-compat",Xw="@firebase/remote-config",Ww="@firebase/remote-config-compat",Zw="@firebase/storage",Jw="@firebase/storage-compat",tb="@firebase/firestore",eb="@firebase/vertexai",nb="@firebase/firestore-compat",ib="firebase",sb="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="[DEFAULT]",rb={[Yd]:"fire-core",[Mw]:"fire-core-compat",[xw]:"fire-analytics",[Vw]:"fire-analytics-compat",[Pw]:"fire-app-check",[kw]:"fire-app-check-compat",[Uw]:"fire-auth",[Lw]:"fire-auth-compat",[jw]:"fire-rtdb",[zw]:"fire-data-connect",[Bw]:"fire-rtdb-compat",[qw]:"fire-fn",[Hw]:"fire-fn-compat",[Fw]:"fire-iid",[Gw]:"fire-iid-compat",[Kw]:"fire-fcm",[Qw]:"fire-fcm-compat",[Yw]:"fire-perf",[$w]:"fire-perf-compat",[Xw]:"fire-rc",[Ww]:"fire-rc-compat",[Zw]:"fire-gcs",[Jw]:"fire-gcs-compat",[tb]:"fire-fst",[nb]:"fire-fst-compat",[eb]:"fire-vertex","fire-js":"fire-js",[ib]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new Map,ab=new Map,Xd=new Map;function Ly(s,t){try{s.container.addComponent(t)}catch(n){Xi.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,n)}}function Ja(s){const t=s.name;if(Xd.has(t))return Xi.debug(`There were multiple attempts to register component ${t}.`),!1;Xd.set(t,s);for(const n of Qc.values())Ly(n,s);for(const n of ab.values())Ly(n,s);return!0}function Em(s,t){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(t)}function vn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ks=new $l("app","Firebase",ob);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ks.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=sb;function VE(s,t={}){let n=s;typeof t!="object"&&(t={name:t});const r=Object.assign({name:$d,automaticDataCollectionEnabled:!1},t),o=r.name;if(typeof o!="string"||!o)throw Ks.create("bad-app-name",{appName:String(o)});if(n||(n=NE()),!n)throw Ks.create("no-options");const u=Qc.get(o);if(u){if(Br(n,u.options)&&Br(r,u.config))return u;throw Ks.create("duplicate-app",{appName:o})}const f=new mw(o);for(const g of Xd.values())f.addComponent(g);const m=new lb(n,r,f);return Qc.set(o,m),m}function xE(s=$d){const t=Qc.get(s);if(!t&&s===$d&&NE())return VE();if(!t)throw Ks.create("no-app",{appName:s});return t}function Qs(s,t,n){var r;let o=(r=rb[s])!==null&&r!==void 0?r:s;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=t.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${t}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Xi.warn(m.join(" "));return}Ja(new qr(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="firebase-heartbeat-database",cb=1,Pl="firebase-heartbeat-store";let jd=null;function kE(){return jd||(jd=Iw(ub,cb,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Pl)}catch(n){console.warn(n)}}}}).catch(s=>{throw Ks.create("idb-open",{originalErrorMessage:s.message})})),jd}async function hb(s){try{const n=(await kE()).transaction(Pl),r=await n.objectStore(Pl).get(PE(s));return await n.done,r}catch(t){if(t instanceof ts)Xi.warn(t.message);else{const n=Ks.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Xi.warn(n.message)}}}async function jy(s,t){try{const r=(await kE()).transaction(Pl,"readwrite");await r.objectStore(Pl).put(t,PE(s)),await r.done}catch(n){if(n instanceof ts)Xi.warn(n.message);else{const r=Ks.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xi.warn(r.message)}}}function PE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=1024,db=30;class mb{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=zy();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>db){const f=_b(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Xi.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zy(),{heartbeatsToSend:r,unsentEntries:o}=pb(this._heartbeatsCache.heartbeats),u=Kc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Xi.warn(n),""}}}function zy(){return new Date().toISOString().substring(0,10)}function pb(s,t=fb){const n=[];let r=s.slice();for(const o of s){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),By(n)>t){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),By(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class gb{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nw()?iw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return jy(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return jy(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function By(s){return Kc(JSON.stringify({version:2,heartbeats:s})).length}function _b(s){if(s.length===0)return-1;let t=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(s){Ja(new qr("platform-logger",t=>new Dw(t),"PRIVATE")),Ja(new qr("heartbeat",t=>new mb(t),"PRIVATE")),Qs(Yd,Uy,s),Qs(Yd,Uy,"esm2017"),Qs("fire-js","")}yb("");var vb="firebase",Eb="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qs(vb,Eb,"app");function Tm(s,t){var n={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t.indexOf(r)<0&&(n[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(s);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(s,r[o])&&(n[r[o]]=s[r[o]]);return n}function UE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Tb=UE,LE=new $l("auth","Firebase",UE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new ym("@firebase/auth");function Ab(s,...t){Yc.logLevel<=Ot.WARN&&Yc.warn(`Auth (${lo}): ${s}`,...t)}function kc(s,...t){Yc.logLevel<=Ot.ERROR&&Yc.error(`Auth (${lo}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(s,...t){throw Sm(s,...t)}function Qn(s,...t){return Sm(s,...t)}function Am(s,t,n){const r=Object.assign(Object.assign({},Tb()),{[t]:n});return new $l("auth","Firebase",r).create(t,{appName:s.name})}function Yi(s){return Am(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sb(s,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&jn(s,"argument-error"),Am(s,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sm(s,...t){if(typeof s!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return LE.create(s,...t)}function gt(s,t,...n){if(!s)throw Sm(t,...n)}function Gi(s){const t="INTERNAL ASSERTION FAILED: "+s;throw kc(t),new Error(t)}function Wi(s,t){s||Gi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function wb(){return qy()==="http:"||qy()==="https:"}function qy(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wb()||ZS()||"connection"in navigator)?navigator.onLine:!0}function Rb(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(t,n){this.shortDelay=t,this.longDelay=n,Wi(n>t,"Short delay should be less than long delay!"),this.isMobile=$S()||JS()}get(){return bb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(s,t){Wi(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=new Wl(3e4,6e4);function sr(s,t){return s.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:s.tenantId}):t}async function es(s,t,n,r,o={}){return zE(s,o,async()=>{let u={},f={};r&&(t==="GET"?f=r:u={body:JSON.stringify(r)});const m=Xl(Object.assign({key:s.config.apiKey},f)).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const _=Object.assign({method:t,headers:g},u);return WS()||(_.referrerPolicy="no-referrer"),jE.fetch()(BE(s,s.config.apiHost,n,m),_)})}async function zE(s,t,n){s._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ib),t);try{const o=new Db(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Nc(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nc(s,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw Nc(s,"email-already-in-use",f);if(g==="USER_DISABLED")throw Nc(s,"user-disabled",f);const E=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw Am(s,E,_);jn(s,E)}}catch(o){if(o instanceof ts)throw o;jn(s,"network-request-failed",{message:String(o)})}}async function Zl(s,t,n,r,o={}){const u=await es(s,t,n,r,o);return"mfaPendingCredential"in u&&jn(s,"multi-factor-auth-required",{_serverResponse:u}),u}function BE(s,t,n,r){const o=`${t}${n}?${r}`;return s.config.emulator?wm(s.config,o):`${s.config.apiScheme}://${o}`}function Nb(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Db{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qn(this.auth,"network-request-failed")),Cb.get())})}}function Nc(s,t,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Qn(s,t,r);return o.customData._tokenResponse=n,o}function Hy(s){return s!==void 0&&s.enterprise!==void 0}class Ob{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return Nb(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Mb(s,t){return es(s,"GET","/v2/recaptchaConfig",sr(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(s,t){return es(s,"POST","/v1/accounts:delete",t)}async function qE(s,t){return es(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function xb(s,t=!1){const n=an(s),r=await n.getIdToken(t),o=bm(r);gt(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:Dl(zd(o.auth_time)),issuedAtTime:Dl(zd(o.iat)),expirationTime:Dl(zd(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function zd(s){return Number(s)*1e3}function bm(s){const[t,n,r]=s.split(".");if(t===void 0||n===void 0||r===void 0)return kc("JWT malformed, contained fewer than 3 sections"),null;try{const o=IE(n);return o?JSON.parse(o):(kc("Failed to decode base64 JWT payload"),null)}catch(o){return kc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Fy(s){const t=bm(s);return gt(t,"internal-error"),gt(typeof t.exp<"u","internal-error"),gt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function to(s,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof ts&&kb(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function kb({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(s){var t;const n=s.auth,r=await s.getIdToken(),o=await to(s,qE(n,{idToken:r}));gt(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];s._notifyReloadListener(u);const f=!((t=u.providerUserInfo)===null||t===void 0)&&t.length?HE(u.providerUserInfo):[],m=Lb(s.providerData,f),g=s.isAnonymous,_=!(s.email&&u.passwordHash)&&!(m!=null&&m.length),E=g?_:!1,S={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new Zd(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(s,S)}async function Ub(s){const t=an(s);await $c(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Lb(s,t){return[...s.filter(r=>!t.some(o=>o.providerId===r.providerId)),...t]}function HE(s){return s.map(t=>{var{providerId:n}=t,r=Tm(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(s,t){const n=await zE(s,{},async()=>{const r=Xl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,f=BE(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",jE.fetch()(f,{method:"POST",headers:m,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zb(s,t){return es(s,"POST","/v2/accounts:revokeToken",sr(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){gt(t.idToken,"internal-error"),gt(typeof t.idToken<"u","internal-error"),gt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Fy(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){gt(t.length!==0,"internal-error");const n=Fy(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(gt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:o,expiresIn:u}=await jb(t,n);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:o,expirationTime:u}=n,f=new Ya;return r&&(gt(typeof r=="string","internal-error",{appName:t}),f.refreshToken=r),o&&(gt(typeof o=="string","internal-error",{appName:t}),f.accessToken=o),u&&(gt(typeof u=="number","internal-error",{appName:t}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ya,this.toJSON())}_performRefresh(){return Gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(s,t){gt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class Ki{constructor(t){var{uid:n,auth:r,stsTokenManager:o}=t,u=Tm(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Zd(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(t){const n=await to(this,this.stsTokenManager.getToken(this.auth,t));return gt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return xb(this,t)}reload(){return Ub(this)}_assign(t){this!==t&&(gt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Ki(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await $c(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(Yi(this.auth));const t=await this.getIdToken();return await to(this,Vb(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,o,u,f,m,g,_,E;const S=(r=n.displayName)!==null&&r!==void 0?r:void 0,C=(o=n.email)!==null&&o!==void 0?o:void 0,V=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,q=(f=n.photoURL)!==null&&f!==void 0?f:void 0,Q=(m=n.tenantId)!==null&&m!==void 0?m:void 0,X=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,ct=(_=n.createdAt)!==null&&_!==void 0?_:void 0,et=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:nt,emailVerified:Tt,isAnonymous:vt,providerData:Dt,stsTokenManager:P}=n;gt(nt&&P,t,"internal-error");const I=Ya.fromJSON(this.name,P);gt(typeof nt=="string",t,"internal-error"),js(S,t.name),js(C,t.name),gt(typeof Tt=="boolean",t,"internal-error"),gt(typeof vt=="boolean",t,"internal-error"),js(V,t.name),js(q,t.name),js(Q,t.name),js(X,t.name),js(ct,t.name),js(et,t.name);const w=new Ki({uid:nt,auth:t,email:C,emailVerified:Tt,displayName:S,isAnonymous:vt,photoURL:q,phoneNumber:V,tenantId:Q,stsTokenManager:I,createdAt:ct,lastLoginAt:et});return Dt&&Array.isArray(Dt)&&(w.providerData=Dt.map(D=>Object.assign({},D))),X&&(w._redirectEventId=X),w}static async _fromIdTokenResponse(t,n,r=!1){const o=new Ya;o.updateFromServerResponse(n);const u=new Ki({uid:n.localId,auth:t,stsTokenManager:o,isAnonymous:r});return await $c(u),u}static async _fromGetAccountInfoResponse(t,n,r){const o=n.users[0];gt(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?HE(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new Ya;m.updateFromIdToken(r);const g=new Ki({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:f}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Zd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=new Map;function Qi(s){Wi(s instanceof Function,"Expected a class definition");let t=Gy.get(s);return t?(Wi(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,Gy.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}FE.type="NONE";const Ky=FE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(s,t,n){return`firebase:${s}:${t}:${n}`}class $a{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Pc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Pc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Ki._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new $a(Qi(Ky),t,r);const o=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=o[0]||Qi(Ky);const f=Pc(r,t.config.apiKey,t.name);let m=null;for(const _ of n)try{const E=await _._get(f);if(E){const S=Ki._fromJSON(t,E);_!==u&&(m=S),u=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new $a(u,t,r):(u=g[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async _=>{if(_!==u)try{await _._remove(f)}catch{}})),new $a(u,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(YE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(GE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(XE(t))return"Blackberry";if(WE(t))return"Webos";if(KE(t))return"Safari";if((t.includes("chrome/")||QE(t))&&!t.includes("edge/"))return"Chrome";if($E(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function GE(s=We()){return/firefox\//i.test(s)}function KE(s=We()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function QE(s=We()){return/crios\//i.test(s)}function YE(s=We()){return/iemobile/i.test(s)}function $E(s=We()){return/android/i.test(s)}function XE(s=We()){return/blackberry/i.test(s)}function WE(s=We()){return/webos/i.test(s)}function Rm(s=We()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function Bb(s=We()){var t;return Rm(s)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function qb(){return tw()&&document.documentMode===10}function ZE(s=We()){return Rm(s)||$E(s)||WE(s)||XE(s)||/windows phone/i.test(s)||YE(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(s,t=[]){let n;switch(s){case"Browser":n=Qy(We());break;case"Worker":n=`${Qy(We())}-${s}`;break;default:n=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${lo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=u=>new Promise((f,m)=>{try{const g=t(u);f(g)}catch(g){m(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fb(s,t={}){return es(s,"GET","/v2/passwordPolicy",sr(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=6;class Kb{constructor(t){var n,r,o,u;const f=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:Gb,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=t.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,o,u,f,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,g),this.validatePasswordCharacterOptions(t,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(u=g.containsUppercaseLetter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(f=g.containsNumericCharacter)!==null&&f!==void 0?f:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),o&&(n.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<t.length;o++)r=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(t,n,r,o){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yy(this),this.idTokenSubscription=new Yy(this),this.beforeStateQueue=new Hb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Qi(n)),this._initializationPromise=this.queue(async()=>{var r,o;if(!this._deleted&&(this.persistenceManager=await $a.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await qE(this,{idToken:t}),r=await Ki._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(vn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,u=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(t);(!f||f===m)&&(g!=null&&g.user)&&(o=g.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await $c(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Rb()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(vn(this.app))return Promise.reject(Yi(this));const n=t?an(t):null;return n&&gt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&gt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(Yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return vn(this.app)?Promise.reject(Yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Fb(this),n=new Kb(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new $l("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await zb(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Qi(t)||this._popupRedirectResolver;gt(n,this,"argument-error"),this.redirectPersistenceManager=await $a.create(this,[Qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(gt(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,r,o);return()=>{f=!0,g()}}else{const g=t.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=JE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var t;if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Ab(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function rr(s){return an(s)}class Yy{constructor(t){this.auth=t,this.observer=null,this.addObserver=lw(n=>this.observer=n)}get next(){return gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Yb(s){hh=s}function tT(s){return hh.loadJS(s)}function $b(){return hh.recaptchaEnterpriseScript}function Xb(){return hh.gapiScript}function Wb(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class Zb{constructor(){this.enterprise=new Jb}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class Jb{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const tR="recaptcha-enterprise",eT="NO_RECAPTCHA";class eR{constructor(t){this.type=tR,this.auth=rr(t)}async verify(t="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{Mb(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new Ob(g);return u.tenantId==null?u._agentRecaptchaConfig=_:u._tenantRecaptchaConfigs[u.tenantId]=_,f(_.siteKey)}}).catch(g=>{m(g)})})}function o(u,f,m){const g=window.grecaptcha;Hy(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:t}).then(_=>{f(_)}).catch(()=>{f(eT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Zb().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(m=>{if(!n&&Hy(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=$b();g.length!==0&&(g+=m),tT(g).then(()=>{o(m,u,f)}).catch(_=>{f(_)})}}).catch(m=>{f(m)})})}}async function $y(s,t,n,r=!1,o=!1){const u=new eR(s);let f;if(o)f=eT;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Jd(s,t,n,r,o){var u;if(!((u=s._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await $y(s,t,n,n==="getOobCode");return r(s,f)}else return r(s,t).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await $y(s,t,n,n==="getOobCode");return r(s,m)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(s,t){const n=Em(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Br(u,t??{}))return o;jn(o,"already-initialized")}return n.initialize({options:t})}function iR(s,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qi);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function sR(s,t,n){const r=rr(s);gt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!1,u=nT(t),{host:f,port:m}=rR(t),g=m===null?"":`:${m}`,_={url:`${u}//${f}${g}/`},E=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){gt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),gt(Br(_,r.config.emulator)&&Br(E,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=_,r.emulatorConfig=E,r.settings.appVerificationDisabledForTesting=!0,aR()}function nT(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function rR(s){const t=nT(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:Xy(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:Xy(f)}}}function Xy(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function aR(){function s(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Gi("not implemented")}_getIdTokenResponse(t){return Gi("not implemented")}_linkToIdToken(t,n){return Gi("not implemented")}_getReauthenticationResolver(t){return Gi("not implemented")}}async function oR(s,t){return es(s,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(s,t){return Zl(s,"POST","/v1/accounts:signInWithPassword",sr(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(s,t){return Zl(s,"POST","/v1/accounts:signInWithEmailLink",sr(s,t))}async function cR(s,t){return Zl(s,"POST","/v1/accounts:signInWithEmailLink",sr(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul extends Im{constructor(t,n,r,o=null){super("password",r),this._email=t,this._password=n,this._tenantId=o}static _fromEmailAndPassword(t,n){return new Ul(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new Ul(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jd(t,n,"signInWithPassword",lR);case"emailLink":return uR(t,{email:this._email,oobCode:this._password});default:jn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jd(t,r,"signUpPassword",oR);case"emailLink":return cR(t,{idToken:n,email:this._email,oobCode:this._password});default:jn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(s,t){return Zl(s,"POST","/v1/accounts:signInWithIdp",sr(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="http://localhost";class Hr extends Im{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Hr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:o}=n,u=Tm(n,["providerId","signInMethod"]);if(!r||!o)return null;const f=new Hr(r,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(t){const n=this.buildRequest();return Xa(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Xa(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Xa(t,n)}buildRequest(){const t={requestUri:hR,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Xl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dR(s){const t=wl(bl(s)).link,n=t?wl(bl(t)).deep_link_id:null,r=wl(bl(s)).deep_link_id;return(r?wl(bl(r)).link:null)||r||n||t||s}class Cm{constructor(t){var n,r,o,u,f,m;const g=wl(bl(t)),_=(n=g.apiKey)!==null&&n!==void 0?n:null,E=(r=g.oobCode)!==null&&r!==void 0?r:null,S=fR((o=g.mode)!==null&&o!==void 0?o:null);gt(_&&E&&S,"argument-error"),this.apiKey=_,this.operation=S,this.code=E,this.continueUrl=(u=g.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(f=g.languageCode)!==null&&f!==void 0?f:null,this.tenantId=(m=g.tenantId)!==null&&m!==void 0?m:null}static parseLink(t){const n=dR(t);try{return new Cm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(){this.providerId=uo.PROVIDER_ID}static credential(t,n){return Ul._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const r=Cm.parseLink(n);return gt(r,"argument-error"),Ul._fromEmailAndCode(t,r.code,r.tenantId)}}uo.PROVIDER_ID="password";uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends Nm{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends Jl{constructor(){super("facebook.com")}static credential(t){return Hr._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Bs.credentialFromTaggedObject(t)}static credentialFromError(t){return Bs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Bs.credential(t.oauthAccessToken)}catch{return null}}}Bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Jl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Hr._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Fi.credentialFromTaggedObject(t)}static credentialFromError(t){return Fi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Fi.credential(n,r)}catch{return null}}}Fi.GOOGLE_SIGN_IN_METHOD="google.com";Fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends Jl{constructor(){super("github.com")}static credential(t){return Hr._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qs.credentialFromTaggedObject(t)}static credentialFromError(t){return qs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qs.credential(t.oauthAccessToken)}catch{return null}}}qs.GITHUB_SIGN_IN_METHOD="github.com";qs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends Jl{constructor(){super("twitter.com")}static credential(t,n){return Hr._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Hs.credentialFromTaggedObject(t)}static credentialFromError(t){return Hs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Hs.credential(n,r)}catch{return null}}}Hs.TWITTER_SIGN_IN_METHOD="twitter.com";Hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mR(s,t){return Zl(s,"POST","/v1/accounts:signUp",sr(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,o=!1){const u=await Ki._fromIdTokenResponse(t,r,o),f=Wy(r);return new Fr({user:u,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const o=Wy(r);return new Fr({user:t,providerId:o,_tokenResponse:r,operationType:n})}}function Wy(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends ts{constructor(t,n,r,o){var u;super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Xc.prototype),this.customData={appName:t.name,tenantId:(u=t.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,o){return new Xc(t,n,r,o)}}function iT(s,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Xc._fromErrorAndOperation(s,u,t,r):u})}async function pR(s,t,n=!1){const r=await to(s,t._linkToIdToken(s.auth,await s.getIdToken()),n);return Fr._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(s,t,n=!1){const{auth:r}=s;if(vn(r.app))return Promise.reject(Yi(r));const o="reauthenticate";try{const u=await to(s,iT(r,o,t,s),n);gt(u.idToken,r,"internal-error");const f=bm(u.idToken);gt(f,r,"internal-error");const{sub:m}=f;return gt(s.uid===m,r,"user-mismatch"),Fr._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&jn(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sT(s,t,n=!1){if(vn(s.app))return Promise.reject(Yi(s));const r="signIn",o=await iT(s,r,t),u=await Fr._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(u.user),u}async function _R(s,t){return sT(rr(s),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rT(s){const t=rr(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function yR(s,t,n){if(vn(s.app))return Promise.reject(Yi(s));const r=rr(s),f=await Jd(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mR).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&rT(s),g}),m=await Fr._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(m.user),m}function vR(s,t,n){return vn(s.app)?Promise.reject(Yi(s)):_R(an(s),uo.credential(t,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&rT(s),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER(s,t){return es(s,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(s,{displayName:t,photoURL:n}){if(t===void 0&&n===void 0)return;const r=an(s),u={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},f=await to(r,ER(r.auth,u));r.displayName=f.displayName||null,r.photoURL=f.photoUrl||null;const m=r.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=r.displayName,m.photoURL=r.photoURL),await r._updateTokensIfNecessary(f)}function AR(s,t,n,r){return an(s).onIdTokenChanged(t,n,r)}function SR(s,t,n){return an(s).beforeAuthStateChanged(t,n)}const Wc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wc,"1"),this.storage.removeItem(Wc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=1e3,bR=10;class oT extends aT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ZE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&t(n,o,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((f,m,g)=>{this.notifyListeners(f,g)});return}const r=t.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);qb()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,bR):o()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},wR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}oT.type="LOCAL";const RR=oT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT extends aT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}lT.type="SESSION";const uT=lT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(o=>o.isListeningto(t));if(n)return n;const r=new fh(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(f).map(async _=>_(n.origin,u)),g=await IR(m);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(s="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,g)=>{const _=Dm("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(S){const C=S;if(C.data.eventId===_)switch(C.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(C.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:_,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(){return window}function NR(s){di().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(){return typeof di().WorkerGlobalScope<"u"&&typeof di().importScripts=="function"}async function DR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OR(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function MR(){return cT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="firebaseLocalStorageDb",VR=1,Zc="firebaseLocalStorage",fT="fbase_key";class tu{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dh(s,t){return s.transaction([Zc],t?"readwrite":"readonly").objectStore(Zc)}function xR(){const s=indexedDB.deleteDatabase(hT);return new tu(s).toPromise()}function tm(){const s=indexedDB.open(hT,VR);return new Promise((t,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Zc,{keyPath:fT})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Zc)?t(r):(r.close(),await xR(),t(await tm()))})})}async function Zy(s,t,n){const r=dh(s,!0).put({[fT]:t,value:n});return new tu(r).toPromise()}async function kR(s,t){const n=dh(s,!1).get(t),r=await new tu(n).toPromise();return r===void 0?null:r.value}function Jy(s,t){const n=dh(s,!0).delete(t);return new tu(n).toPromise()}const PR=800,UR=3;class dT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tm(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>UR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fh._getInstance(MR()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await DR(),!this.activeServiceWorker)return;this.sender=new CR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||OR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await tm();return await Zy(t,Wc,"1"),await Jy(t,Wc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Zy(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>kR(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Jy(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=dh(o,!1).getAll();return new tu(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dT.type="LOCAL";const LR=dT;new Wl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(s,t){return t?Qi(t):(gt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om extends Im{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Xa(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Xa(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Xa(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function jR(s){return sT(s.auth,new Om(s),s.bypassAuthState)}function zR(s){const{auth:t,user:n}=s;return gt(n,t,"internal-error"),gR(n,new Om(s),s.bypassAuthState)}async function BR(s){const{auth:t,user:n}=s;return gt(n,t,"internal-error"),pR(n,new Om(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(t,n,r,o,u=!1){this.auth=t,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:o,tenantId:u,error:f,type:m}=t;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return jR;case"linkViaPopup":case"linkViaRedirect":return BR;case"reauthViaPopup":case"reauthViaRedirect":return zR;default:jn(this.auth,"internal-error")}}resolve(t){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=new Wl(2e3,1e4);async function HR(s,t,n){if(vn(s.app))return Promise.reject(Qn(s,"operation-not-supported-in-this-environment"));const r=rr(s);Sb(s,t,Nm);const o=mT(r,n);return new jr(r,"signInViaPopup",t,o).executeNotNull()}class jr extends pT{constructor(t,n,r,o,u){super(t,n,o,u),this.provider=r,this.authWindow=null,this.pollId=null,jr.currentPopupAction&&jr.currentPopupAction.cancel(),jr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return gt(t,this.auth,"internal-error"),t}async onExecution(){Wi(this.filter.length===1,"Popup operations only handle one event");const t=Dm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jr.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,qR.get())};t()}}jr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR="pendingRedirect",Uc=new Map;class GR extends pT{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=Uc.get(this.auth._key());if(!t){try{const r=await KR(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}Uc.set(this.auth._key(),t)}return this.bypassAuthState||Uc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KR(s,t){const n=$R(t),r=YR(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function QR(s,t){Uc.set(s._key(),t)}function YR(s){return Qi(s._redirectPersistence)}function $R(s){return Pc(FR,s.config.apiKey,s.name)}async function XR(s,t,n=!1){if(vn(s.app))return Promise.reject(Yi(s));const r=rr(s),o=mT(r,t),f=await new GR(r,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,t)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=10*60*1e3;class ZR{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!JR(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!gT(t)){const o=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Qn(this.auth,o))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=WR&&this.cachedEventUids.clear(),this.cachedEventUids.has(tv(t))}saveEventToCache(t){this.cachedEventUids.add(tv(t)),this.lastProcessedEventTime=Date.now()}}function tv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function gT({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function JR(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gT(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(s,t={}){return es(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nI=/^https?/;async function iI(s){if(s.config.emulator)return;const{authorizedDomains:t}=await tI(s);for(const n of t)try{if(sI(n))return}catch{}jn(s,"unauthorized-domain")}function sI(s){const t=Wd(),{protocol:n,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!nI.test(n))return!1;if(eI.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new Wl(3e4,6e4);function ev(){const s=di().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function aI(s){return new Promise((t,n)=>{var r,o,u;function f(){ev(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ev(),n(Qn(s,"network-request-failed"))},timeout:rI.get()})}if(!((o=(r=di().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)t(gapi.iframes.getContext());else if(!((u=di().gapi)===null||u===void 0)&&u.load)f();else{const m=Wb("iframefcb");return di()[m]=()=>{gapi.load?f():n(Qn(s,"network-request-failed"))},tT(`${Xb()}?onload=${m}`).catch(g=>n(g))}}).catch(t=>{throw Lc=null,t})}let Lc=null;function oI(s){return Lc=Lc||aI(s),Lc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=new Wl(5e3,15e3),uI="__/auth/iframe",cI="emulator/auth/iframe",hI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dI(s){const t=s.config;gt(t.authDomain,s,"auth-domain-config-required");const n=t.emulator?wm(t,cI):`https://${s.config.authDomain}/${uI}`,r={apiKey:t.apiKey,appName:s.name,v:lo},o=fI.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${Xl(r).slice(1)}`}async function mI(s){const t=await oI(s),n=di().gapi;return gt(n,s,"internal-error"),t.open({where:document.body,url:dI(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hI,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const f=Qn(s,"network-request-failed"),m=di().setTimeout(()=>{u(f)},lI.get());function g(){di().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gI=500,_I=600,yI="_blank",vI="http://localhost";class nv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EI(s,t,n,r=gI,o=_I){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g=Object.assign(Object.assign({},pI),{width:r.toString(),height:o.toString(),top:u,left:f}),_=We().toLowerCase();n&&(m=QE(_)?yI:n),GE(_)&&(t=t||vI,g.scrollbars="yes");const E=Object.entries(g).reduce((C,[V,q])=>`${C}${V}=${q},`,"");if(Bb(_)&&m!=="_self")return TI(t||"",m),new nv(null);const S=window.open(t||"",m,E);gt(S,s,"popup-blocked");try{S.focus()}catch{}return new nv(S)}function TI(s,t){const n=document.createElement("a");n.href=s,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="__/auth/handler",SI="emulator/auth/handler",wI=encodeURIComponent("fac");async function iv(s,t,n,r,o,u){gt(s.config.authDomain,s,"auth-domain-config-required"),gt(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:lo,eventId:o};if(t instanceof Nm){t.setDefaultLanguage(s.languageCode),f.providerId=t.providerId||"",ow(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[E,S]of Object.entries({}))f[E]=S}if(t instanceof Jl){const E=t.getScopes().filter(S=>S!=="");E.length>0&&(f.scopes=E.join(","))}s.tenantId&&(f.tid=s.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await s._getAppCheckToken(),_=g?`#${wI}=${encodeURIComponent(g)}`:"";return`${bI(s)}?${Xl(m).slice(1)}${_}`}function bI({config:s}){return s.emulator?wm(s,SI):`https://${s.authDomain}/${AI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="webStorageSupport";class RI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uT,this._completeRedirectFn=XR,this._overrideRedirectResult=QR}async _openPopup(t,n,r,o){var u;Wi((u=this.eventManagers[t._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await iv(t,n,r,Wd(),o);return EI(t,f,Dm())}async _openRedirect(t,n,r,o){await this._originValidation(t);const u=await iv(t,n,r,Wd(),o);return NR(u),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Wi(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await mI(t),r=new ZR(t);return n.register("authEvent",o=>(gt(o==null?void 0:o.authEvent,t,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Bd,{type:Bd},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Bd];f!==void 0&&n(!!f),jn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iI(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZE()||KE()||Rm()}}const II=RI;var sv="@firebase/auth",rv="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DI(s){Ja(new qr("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=r.options;gt(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:f,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JE(s)},_=new Qb(r,o,u,g);return iR(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Ja(new qr("auth-internal",t=>{const n=rr(t.getProvider("auth").getImmediate());return(r=>new CI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qs(sv,rv,NI(s)),Qs(sv,rv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=5*60,MI=DE("authIdTokenMaxAge")||OI;let av=null;const VI=s=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>MI)return;const o=n==null?void 0:n.token;av!==o&&(av=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function xI(s=xE()){const t=Em(s,"auth");if(t.isInitialized())return t.getImmediate();const n=nR(s,{popupRedirectResolver:II,persistence:[LR,RR,uT]}),r=DE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=VI(u.toString());SR(n,f,()=>f(n.currentUser)),AR(n,m=>f(m))}}const o=CE("auth");return o&&sR(n,`http://${o}`),n}function kI(){var s,t;return(t=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&t!==void 0?t:document}Yb({loadJS(s){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=o=>{const u=Qn("internal-error");u.customData=o,n(u)},r.type="text/javascript",r.charset="UTF-8",kI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DI("Browser");var ov=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ys,_T;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(P,I){function w(){}w.prototype=I.prototype,P.D=I.prototype,P.prototype=new w,P.prototype.constructor=P,P.C=function(D,k,j){for(var N=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)N[Ee-2]=arguments[Ee];return I.prototype[k].apply(D,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,I,w){w||(w=0);var D=Array(16);if(typeof I=="string")for(var k=0;16>k;++k)D[k]=I.charCodeAt(w++)|I.charCodeAt(w++)<<8|I.charCodeAt(w++)<<16|I.charCodeAt(w++)<<24;else for(k=0;16>k;++k)D[k]=I[w++]|I[w++]<<8|I[w++]<<16|I[w++]<<24;I=P.g[0],w=P.g[1],k=P.g[2];var j=P.g[3],N=I+(j^w&(k^j))+D[0]+3614090360&4294967295;I=w+(N<<7&4294967295|N>>>25),N=j+(k^I&(w^k))+D[1]+3905402710&4294967295,j=I+(N<<12&4294967295|N>>>20),N=k+(w^j&(I^w))+D[2]+606105819&4294967295,k=j+(N<<17&4294967295|N>>>15),N=w+(I^k&(j^I))+D[3]+3250441966&4294967295,w=k+(N<<22&4294967295|N>>>10),N=I+(j^w&(k^j))+D[4]+4118548399&4294967295,I=w+(N<<7&4294967295|N>>>25),N=j+(k^I&(w^k))+D[5]+1200080426&4294967295,j=I+(N<<12&4294967295|N>>>20),N=k+(w^j&(I^w))+D[6]+2821735955&4294967295,k=j+(N<<17&4294967295|N>>>15),N=w+(I^k&(j^I))+D[7]+4249261313&4294967295,w=k+(N<<22&4294967295|N>>>10),N=I+(j^w&(k^j))+D[8]+1770035416&4294967295,I=w+(N<<7&4294967295|N>>>25),N=j+(k^I&(w^k))+D[9]+2336552879&4294967295,j=I+(N<<12&4294967295|N>>>20),N=k+(w^j&(I^w))+D[10]+4294925233&4294967295,k=j+(N<<17&4294967295|N>>>15),N=w+(I^k&(j^I))+D[11]+2304563134&4294967295,w=k+(N<<22&4294967295|N>>>10),N=I+(j^w&(k^j))+D[12]+1804603682&4294967295,I=w+(N<<7&4294967295|N>>>25),N=j+(k^I&(w^k))+D[13]+4254626195&4294967295,j=I+(N<<12&4294967295|N>>>20),N=k+(w^j&(I^w))+D[14]+2792965006&4294967295,k=j+(N<<17&4294967295|N>>>15),N=w+(I^k&(j^I))+D[15]+1236535329&4294967295,w=k+(N<<22&4294967295|N>>>10),N=I+(k^j&(w^k))+D[1]+4129170786&4294967295,I=w+(N<<5&4294967295|N>>>27),N=j+(w^k&(I^w))+D[6]+3225465664&4294967295,j=I+(N<<9&4294967295|N>>>23),N=k+(I^w&(j^I))+D[11]+643717713&4294967295,k=j+(N<<14&4294967295|N>>>18),N=w+(j^I&(k^j))+D[0]+3921069994&4294967295,w=k+(N<<20&4294967295|N>>>12),N=I+(k^j&(w^k))+D[5]+3593408605&4294967295,I=w+(N<<5&4294967295|N>>>27),N=j+(w^k&(I^w))+D[10]+38016083&4294967295,j=I+(N<<9&4294967295|N>>>23),N=k+(I^w&(j^I))+D[15]+3634488961&4294967295,k=j+(N<<14&4294967295|N>>>18),N=w+(j^I&(k^j))+D[4]+3889429448&4294967295,w=k+(N<<20&4294967295|N>>>12),N=I+(k^j&(w^k))+D[9]+568446438&4294967295,I=w+(N<<5&4294967295|N>>>27),N=j+(w^k&(I^w))+D[14]+3275163606&4294967295,j=I+(N<<9&4294967295|N>>>23),N=k+(I^w&(j^I))+D[3]+4107603335&4294967295,k=j+(N<<14&4294967295|N>>>18),N=w+(j^I&(k^j))+D[8]+1163531501&4294967295,w=k+(N<<20&4294967295|N>>>12),N=I+(k^j&(w^k))+D[13]+2850285829&4294967295,I=w+(N<<5&4294967295|N>>>27),N=j+(w^k&(I^w))+D[2]+4243563512&4294967295,j=I+(N<<9&4294967295|N>>>23),N=k+(I^w&(j^I))+D[7]+1735328473&4294967295,k=j+(N<<14&4294967295|N>>>18),N=w+(j^I&(k^j))+D[12]+2368359562&4294967295,w=k+(N<<20&4294967295|N>>>12),N=I+(w^k^j)+D[5]+4294588738&4294967295,I=w+(N<<4&4294967295|N>>>28),N=j+(I^w^k)+D[8]+2272392833&4294967295,j=I+(N<<11&4294967295|N>>>21),N=k+(j^I^w)+D[11]+1839030562&4294967295,k=j+(N<<16&4294967295|N>>>16),N=w+(k^j^I)+D[14]+4259657740&4294967295,w=k+(N<<23&4294967295|N>>>9),N=I+(w^k^j)+D[1]+2763975236&4294967295,I=w+(N<<4&4294967295|N>>>28),N=j+(I^w^k)+D[4]+1272893353&4294967295,j=I+(N<<11&4294967295|N>>>21),N=k+(j^I^w)+D[7]+4139469664&4294967295,k=j+(N<<16&4294967295|N>>>16),N=w+(k^j^I)+D[10]+3200236656&4294967295,w=k+(N<<23&4294967295|N>>>9),N=I+(w^k^j)+D[13]+681279174&4294967295,I=w+(N<<4&4294967295|N>>>28),N=j+(I^w^k)+D[0]+3936430074&4294967295,j=I+(N<<11&4294967295|N>>>21),N=k+(j^I^w)+D[3]+3572445317&4294967295,k=j+(N<<16&4294967295|N>>>16),N=w+(k^j^I)+D[6]+76029189&4294967295,w=k+(N<<23&4294967295|N>>>9),N=I+(w^k^j)+D[9]+3654602809&4294967295,I=w+(N<<4&4294967295|N>>>28),N=j+(I^w^k)+D[12]+3873151461&4294967295,j=I+(N<<11&4294967295|N>>>21),N=k+(j^I^w)+D[15]+530742520&4294967295,k=j+(N<<16&4294967295|N>>>16),N=w+(k^j^I)+D[2]+3299628645&4294967295,w=k+(N<<23&4294967295|N>>>9),N=I+(k^(w|~j))+D[0]+4096336452&4294967295,I=w+(N<<6&4294967295|N>>>26),N=j+(w^(I|~k))+D[7]+1126891415&4294967295,j=I+(N<<10&4294967295|N>>>22),N=k+(I^(j|~w))+D[14]+2878612391&4294967295,k=j+(N<<15&4294967295|N>>>17),N=w+(j^(k|~I))+D[5]+4237533241&4294967295,w=k+(N<<21&4294967295|N>>>11),N=I+(k^(w|~j))+D[12]+1700485571&4294967295,I=w+(N<<6&4294967295|N>>>26),N=j+(w^(I|~k))+D[3]+2399980690&4294967295,j=I+(N<<10&4294967295|N>>>22),N=k+(I^(j|~w))+D[10]+4293915773&4294967295,k=j+(N<<15&4294967295|N>>>17),N=w+(j^(k|~I))+D[1]+2240044497&4294967295,w=k+(N<<21&4294967295|N>>>11),N=I+(k^(w|~j))+D[8]+1873313359&4294967295,I=w+(N<<6&4294967295|N>>>26),N=j+(w^(I|~k))+D[15]+4264355552&4294967295,j=I+(N<<10&4294967295|N>>>22),N=k+(I^(j|~w))+D[6]+2734768916&4294967295,k=j+(N<<15&4294967295|N>>>17),N=w+(j^(k|~I))+D[13]+1309151649&4294967295,w=k+(N<<21&4294967295|N>>>11),N=I+(k^(w|~j))+D[4]+4149444226&4294967295,I=w+(N<<6&4294967295|N>>>26),N=j+(w^(I|~k))+D[11]+3174756917&4294967295,j=I+(N<<10&4294967295|N>>>22),N=k+(I^(j|~w))+D[2]+718787259&4294967295,k=j+(N<<15&4294967295|N>>>17),N=w+(j^(k|~I))+D[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,P.g[2]=P.g[2]+k&4294967295,P.g[3]=P.g[3]+j&4294967295}r.prototype.u=function(P,I){I===void 0&&(I=P.length);for(var w=I-this.blockSize,D=this.B,k=this.h,j=0;j<I;){if(k==0)for(;j<=w;)o(this,P,j),j+=this.blockSize;if(typeof P=="string"){for(;j<I;)if(D[k++]=P.charCodeAt(j++),k==this.blockSize){o(this,D),k=0;break}}else for(;j<I;)if(D[k++]=P[j++],k==this.blockSize){o(this,D),k=0;break}}this.h=k,this.o+=I},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;var w=8*this.o;for(I=P.length-8;I<P.length;++I)P[I]=w&255,w/=256;for(this.u(P),P=Array(16),I=w=0;4>I;++I)for(var D=0;32>D;D+=8)P[w++]=this.g[I]>>>D&255;return P};function u(P,I){var w=m;return Object.prototype.hasOwnProperty.call(w,P)?w[P]:w[P]=I(P)}function f(P,I){this.h=I;for(var w=[],D=!0,k=P.length-1;0<=k;k--){var j=P[k]|0;D&&j==I||(w[k]=j,D=!1)}this.g=w}var m={};function g(P){return-128<=P&&128>P?u(P,function(I){return new f([I|0],0>I?-1:0)}):new f([P|0],0>P?-1:0)}function _(P){if(isNaN(P)||!isFinite(P))return S;if(0>P)return X(_(-P));for(var I=[],w=1,D=0;P>=w;D++)I[D]=P/w|0,w*=4294967296;return new f(I,0)}function E(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return X(E(P.substring(1),I));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=_(Math.pow(I,8)),D=S,k=0;k<P.length;k+=8){var j=Math.min(8,P.length-k),N=parseInt(P.substring(k,k+j),I);8>j?(j=_(Math.pow(I,j)),D=D.j(j).add(_(N))):(D=D.j(w),D=D.add(_(N)))}return D}var S=g(0),C=g(1),V=g(16777216);s=f.prototype,s.m=function(){if(Q(this))return-X(this).m();for(var P=0,I=1,w=0;w<this.g.length;w++){var D=this.i(w);P+=(0<=D?D:4294967296+D)*I,I*=4294967296}return P},s.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(q(this))return"0";if(Q(this))return"-"+X(this).toString(P);for(var I=_(Math.pow(P,6)),w=this,D="";;){var k=Tt(w,I).g;w=ct(w,k.j(I));var j=((0<w.g.length?w.g[0]:w.h)>>>0).toString(P);if(w=k,q(w))return j+D;for(;6>j.length;)j="0"+j;D=j+D}},s.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function q(P){if(P.h!=0)return!1;for(var I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function Q(P){return P.h==-1}s.l=function(P){return P=ct(this,P),Q(P)?-1:q(P)?0:1};function X(P){for(var I=P.g.length,w=[],D=0;D<I;D++)w[D]=~P.g[D];return new f(w,~P.h).add(C)}s.abs=function(){return Q(this)?X(this):this},s.add=function(P){for(var I=Math.max(this.g.length,P.g.length),w=[],D=0,k=0;k<=I;k++){var j=D+(this.i(k)&65535)+(P.i(k)&65535),N=(j>>>16)+(this.i(k)>>>16)+(P.i(k)>>>16);D=N>>>16,j&=65535,N&=65535,w[k]=N<<16|j}return new f(w,w[w.length-1]&-2147483648?-1:0)};function ct(P,I){return P.add(X(I))}s.j=function(P){if(q(this)||q(P))return S;if(Q(this))return Q(P)?X(this).j(X(P)):X(X(this).j(P));if(Q(P))return X(this.j(X(P)));if(0>this.l(V)&&0>P.l(V))return _(this.m()*P.m());for(var I=this.g.length+P.g.length,w=[],D=0;D<2*I;D++)w[D]=0;for(D=0;D<this.g.length;D++)for(var k=0;k<P.g.length;k++){var j=this.i(D)>>>16,N=this.i(D)&65535,Ee=P.i(k)>>>16,de=P.i(k)&65535;w[2*D+2*k]+=N*de,et(w,2*D+2*k),w[2*D+2*k+1]+=j*de,et(w,2*D+2*k+1),w[2*D+2*k+1]+=N*Ee,et(w,2*D+2*k+1),w[2*D+2*k+2]+=j*Ee,et(w,2*D+2*k+2)}for(D=0;D<I;D++)w[D]=w[2*D+1]<<16|w[2*D];for(D=I;D<2*I;D++)w[D]=0;return new f(w,0)};function et(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function nt(P,I){this.g=P,this.h=I}function Tt(P,I){if(q(I))throw Error("division by zero");if(q(P))return new nt(S,S);if(Q(P))return I=Tt(X(P),I),new nt(X(I.g),X(I.h));if(Q(I))return I=Tt(P,X(I)),new nt(X(I.g),I.h);if(30<P.g.length){if(Q(P)||Q(I))throw Error("slowDivide_ only works with positive integers.");for(var w=C,D=I;0>=D.l(P);)w=vt(w),D=vt(D);var k=Dt(w,1),j=Dt(D,1);for(D=Dt(D,2),w=Dt(w,2);!q(D);){var N=j.add(D);0>=N.l(P)&&(k=k.add(w),j=N),D=Dt(D,1),w=Dt(w,1)}return I=ct(P,k.j(I)),new nt(k,I)}for(k=S;0<=P.l(I);){for(w=Math.max(1,Math.floor(P.m()/I.m())),D=Math.ceil(Math.log(w)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),j=_(w),N=j.j(I);Q(N)||0<N.l(P);)w-=D,j=_(w),N=j.j(I);q(j)&&(j=C),k=k.add(j),P=ct(P,N)}return new nt(k,P)}s.A=function(P){return Tt(this,P).h},s.and=function(P){for(var I=Math.max(this.g.length,P.g.length),w=[],D=0;D<I;D++)w[D]=this.i(D)&P.i(D);return new f(w,this.h&P.h)},s.or=function(P){for(var I=Math.max(this.g.length,P.g.length),w=[],D=0;D<I;D++)w[D]=this.i(D)|P.i(D);return new f(w,this.h|P.h)},s.xor=function(P){for(var I=Math.max(this.g.length,P.g.length),w=[],D=0;D<I;D++)w[D]=this.i(D)^P.i(D);return new f(w,this.h^P.h)};function vt(P){for(var I=P.g.length+1,w=[],D=0;D<I;D++)w[D]=P.i(D)<<1|P.i(D-1)>>>31;return new f(w,P.h)}function Dt(P,I){var w=I>>5;I%=32;for(var D=P.g.length-w,k=[],j=0;j<D;j++)k[j]=0<I?P.i(j+w)>>>I|P.i(j+w+1)<<32-I:P.i(j+w);return new f(k,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_T=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=E,Ys=f}).apply(typeof ov<"u"?ov:typeof self<"u"?self:typeof window<"u"?window:{});var Dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yT,Rl,vT,jc,em,ET,TT,AT;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,y){return c==Array.prototype||c==Object.prototype||(c[p]=y.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dc=="object"&&Dc];for(var p=0;p<c.length;++p){var y=c[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function o(c,p){if(p)t:{var y=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var L=c[A];if(!(L in y))break t;y=y[L]}c=c[c.length-1],A=y[c],p=p(A),p!=A&&p!=null&&t(y,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var y=0,A=!1,L={next:function(){if(!A&&y<c.length){var H=y++;return{value:p(H,c[H]),done:!1}}return A=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function g(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function _(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function E(c,p,y){return c.call.apply(c.bind,arguments)}function S(c,p,y){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,A),c.apply(p,L)}}return function(){return c.apply(p,arguments)}}function C(c,p,y){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:S,C.apply(null,arguments)}function V(c,p){var y=Array.prototype.slice.call(arguments,1);return function(){var A=y.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function q(c,p){function y(){}y.prototype=p.prototype,c.aa=p.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(A,L,H){for(var J=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)J[kt-2]=arguments[kt];return p.prototype[L].apply(A,J)}}function Q(c){const p=c.length;if(0<p){const y=Array(p);for(let A=0;A<p;A++)y[A]=c[A];return y}return[]}function X(c,p){for(let y=1;y<arguments.length;y++){const A=arguments[y];if(g(A)){const L=c.length||0,H=A.length||0;c.length=L+H;for(let J=0;J<H;J++)c[L+J]=A[J]}else c.push(A)}}class ct{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function et(c){return/^[\s\xa0]*$/.test(c)}function nt(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function Tt(c){return Tt[" "](c),c}Tt[" "]=function(){};var vt=nt().indexOf("Gecko")!=-1&&!(nt().toLowerCase().indexOf("webkit")!=-1&&nt().indexOf("Edge")==-1)&&!(nt().indexOf("Trident")!=-1||nt().indexOf("MSIE")!=-1)&&nt().indexOf("Edge")==-1;function Dt(c,p,y){for(const A in c)p.call(y,c[A],A,c)}function P(c,p){for(const y in c)p.call(void 0,c[y],y,c)}function I(c){const p={};for(const y in c)p[y]=c[y];return p}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,p){let y,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(y in A)c[y]=A[y];for(let H=0;H<w.length;H++)y=w[H],Object.prototype.hasOwnProperty.call(A,y)&&(c[y]=A[y])}}function k(c){var p=1;c=c.split(":");const y=[];for(;0<p&&c.length;)y.push(c.shift()),p--;return c.length&&y.push(c.join(":")),y}function j(c){m.setTimeout(()=>{throw c},0)}function N(){var c=Ht;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class Ee{constructor(){this.h=this.g=null}add(p,y){const A=de.get();A.set(p,y),this.h?this.h.next=A:this.g=A,this.h=A}}var de=new ct(()=>new tt,c=>c.reset());class tt{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let _t,ft=!1,Ht=new Ee,O=()=>{const c=m.Promise.resolve(void 0);_t=()=>{c.then(Z)}};var Z=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(y){j(y)}var p=de;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}ft=!1};function ut(){this.s=this.s,this.C=this.C}ut.prototype.s=!1,ut.prototype.ma=function(){this.s||(this.s=!0,this.N())},ut.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function it(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}it.prototype.h=function(){this.defaultPrevented=!0};var st=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};m.addEventListener("test",y,p),m.removeEventListener("test",y,p)}catch{}return c}();function Rt(c,p){if(it.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(vt){t:{try{Tt(p.nodeName);var L=!0;break t}catch{}L=!1}L||(p=null)}}else y=="mouseover"?p=c.fromElement:y=="mouseout"&&(p=c.toElement);this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:wt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Rt.aa.h.call(this)}}q(Rt,it);var wt={2:"touch",3:"pen",4:"mouse"};Rt.prototype.h=function(){Rt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),jt=0;function se(c,p,y,A,L){this.listener=c,this.proxy=null,this.src=p,this.type=y,this.capture=!!A,this.ha=L,this.key=++jt,this.da=this.fa=!1}function Kt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ze(c){this.src=c,this.g={},this.h=0}Ze.prototype.add=function(c,p,y,A,L){var H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);var J=En(c,p,A,L);return-1<J?(p=c[J],y||(p.fa=!1)):(p=new se(p,this.src,H,!!A,L),p.fa=y,c.push(p)),p};function _i(c,p){var y=p.type;if(y in c.g){var A=c.g[y],L=Array.prototype.indexOf.call(A,p,void 0),H;(H=0<=L)&&Array.prototype.splice.call(A,L,1),H&&(Kt(p),c.g[y].length==0&&(delete c.g[y],c.h--))}}function En(c,p,y,A){for(var L=0;L<c.length;++L){var H=c[L];if(!H.da&&H.listener==p&&H.capture==!!y&&H.ha==A)return L}return-1}var ns="closure_lm_"+(1e6*Math.random()|0),is={};function yi(c,p,y,A,L){if(Array.isArray(p)){for(var H=0;H<p.length;H++)yi(c,p[H],y,A,L);return null}return y=lu(y),c&&c[me]?c.K(p,y,_(A)?!!A.capture:!1,L):_o(c,p,y,!1,A,L)}function _o(c,p,y,A,L,H){if(!p)throw Error("Invalid event type");var J=_(L)?!!L.capture:!!L,kt=yo(c);if(kt||(c[ns]=kt=new Ze(c)),y=kt.add(p,y,A,J,H),y.proxy)return y;if(A=Jr(),y.proxy=A,A.src=c,A.listener=y,c.addEventListener)st||(L=J),L===void 0&&(L=!1),c.addEventListener(p.toString(),A,L);else if(c.attachEvent)c.attachEvent(ea(p.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Jr(){function c(y){return p.call(c.src,c.listener,y)}const p=Dh;return c}function ta(c,p,y,A,L){if(Array.isArray(p))for(var H=0;H<p.length;H++)ta(c,p[H],y,A,L);else A=_(A)?!!A.capture:!!A,y=lu(y),c&&c[me]?(c=c.i,p=String(p).toString(),p in c.g&&(H=c.g[p],y=En(H,y,A,L),-1<y&&(Kt(H[y]),Array.prototype.splice.call(H,y,1),H.length==0&&(delete c.g[p],c.h--)))):c&&(c=yo(c))&&(p=c.g[p.toString()],c=-1,p&&(c=En(p,y,A,L)),(y=-1<c?p[c]:null)&&ar(y))}function ar(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[me])_i(p.i,c);else{var y=c.type,A=c.proxy;p.removeEventListener?p.removeEventListener(y,A,c.capture):p.detachEvent?p.detachEvent(ea(y),A):p.addListener&&p.removeListener&&p.removeListener(A),(y=yo(p))?(_i(y,c),y.h==0&&(y.src=null,p[ns]=null)):Kt(c)}}}function ea(c){return c in is?is[c]:is[c]="on"+c}function Dh(c,p){if(c.da)c=!0;else{p=new Rt(p,this);var y=c.listener,A=c.ha||c.src;c.fa&&ar(c),c=y.call(A,p)}return c}function yo(c){return c=c[ns],c instanceof Ze?c:null}var on="__closure_events_fn_"+(1e9*Math.random()>>>0);function lu(c){return typeof c=="function"?c:(c[on]||(c[on]=function(p){return c.handleEvent(p)}),c[on])}function Te(){ut.call(this),this.i=new Ze(this),this.M=this,this.F=null}q(Te,ut),Te.prototype[me]=!0,Te.prototype.removeEventListener=function(c,p,y,A){ta(this,c,p,y,A)};function Ne(c,p){var y,A=c.F;if(A)for(y=[];A;A=A.F)y.push(A);if(c=c.M,A=p.type||p,typeof p=="string")p=new it(p,c);else if(p instanceof it)p.target=p.target||c;else{var L=p;p=new it(A,c),D(p,L)}if(L=!0,y)for(var H=y.length-1;0<=H;H--){var J=p.g=y[H];L=vi(J,A,!0,p)&&L}if(J=p.g=c,L=vi(J,A,!0,p)&&L,L=vi(J,A,!1,p)&&L,y)for(H=0;H<y.length;H++)J=p.g=y[H],L=vi(J,A,!1,p)&&L}Te.prototype.N=function(){if(Te.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var y=c.g[p],A=0;A<y.length;A++)Kt(y[A]);delete c.g[p],c.h--}}this.F=null},Te.prototype.K=function(c,p,y,A){return this.i.add(String(c),p,!1,y,A)},Te.prototype.L=function(c,p,y,A){return this.i.add(String(c),p,!0,y,A)};function vi(c,p,y,A){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,H=0;H<p.length;++H){var J=p[H];if(J&&!J.da&&J.capture==y){var kt=J.listener,Se=J.ha||J.src;J.fa&&_i(c.i,J),L=kt.call(Se,A)!==!1&&L}}return L&&!A.defaultPrevented}function uu(c,p,y){if(typeof c=="function")y&&(c=C(c,y));else if(c&&typeof c.handleEvent=="function")c=C(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function vo(c){c.g=uu(()=>{c.g=null,c.i&&(c.i=!1,vo(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class Oh extends ut{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:vo(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function or(c){ut.call(this),this.h=c,this.g={}}q(or,ut);var ss=[];function Ge(c){Dt(c.g,function(p,y){this.g.hasOwnProperty(y)&&ar(p)},c),c.g={}}or.prototype.N=function(){or.aa.N.call(this),Ge(this)},or.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Eo=m.JSON.stringify,Xn=m.JSON.parse,Je=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function To(){}To.prototype.h=null;function cu(c){return c.h||(c.h=c.i())}function hu(){}var Wn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rs(){it.call(this,"d")}q(rs,it);function zn(){it.call(this,"c")}q(zn,it);var Tn={},as=null;function na(){return as=as||new Te}Tn.La="serverreachability";function Ao(c){it.call(this,Tn.La,c)}q(Ao,it);function os(c){const p=na();Ne(p,new Ao(p))}Tn.STAT_EVENT="statevent";function ia(c,p){it.call(this,Tn.STAT_EVENT,c),this.stat=p}q(ia,it);function ue(c){const p=na();Ne(p,new ia(p,c))}Tn.Ma="timingevent";function fu(c,p){it.call(this,Tn.Ma,c),this.size=p}q(fu,it);function ls(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function us(){this.g=!0}us.prototype.xa=function(){this.g=!1};function du(c,p,y,A,L,H){c.info(function(){if(c.g)if(H)for(var J="",kt=H.split("&"),Se=0;Se<kt.length;Se++){var Pt=kt[Se].split("=");if(1<Pt.length){var Me=Pt[0];Pt=Pt[1];var we=Me.split("_");J=2<=we.length&&we[1]=="type"?J+(Me+"="+Pt+"&"):J+(Me+"=redacted&")}}else J=null;else J=H;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+p+`
`+y+`
`+J})}function mu(c,p,y,A,L,H,J){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+p+`
`+y+`
`+H+" "+J})}function cs(c,p,y,A){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+De(c,y)+(A?" "+A:"")})}function Zn(c,p){c.info(function(){return"TIMEOUT: "+p})}us.prototype.info=function(){};function De(c,p){if(!c.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var A=y[c];if(!(2>A.length)){var L=A[1];if(Array.isArray(L)&&!(1>L.length)){var H=L[0];if(H!="noop"&&H!="stop"&&H!="close")for(var J=1;J<L.length;J++)L[J]=""}}}}return Eo(y)}catch{return p}}var Ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ei={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lr;function sa(){}q(sa,To),sa.prototype.g=function(){return new XMLHttpRequest},sa.prototype.i=function(){return{}},lr=new sa;function Jn(c,p,y,A){this.j=c,this.i=p,this.l=y,this.R=A||1,this.U=new or(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new So}function So(){this.i=null,this.g="",this.h=!1}var hs={},ur={};function Bn(c,p,y){c.L=1,c.v=fr(re(p)),c.m=y,c.P=!0,Ti(c,null)}function Ti(c,p){c.F=Date.now(),te(c),c.A=re(c.v);var y=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),wi(y.i,"t",A),c.C=0,y=c.j.J,c.h=new So,c.g=Cu(c.j,y?p:null,!c.m),0<c.O&&(c.M=new Oh(C(c.Y,c,c.g),c.O)),p=c.U,y=c.g,A=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(ss[0]=L.toString()),L=ss);for(var H=0;H<L.length;H++){var J=yi(y,L[H],A||p.handleEvent,!1,p.h||p);if(!J)break;p.g[J.key]=J}p=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),os(),du(c.i,c.u,c.A,c.l,c.R,c.m)}Jn.prototype.ca=function(c){c=c.target;const p=this.M;p&&Rn(c)==3?p.j():this.Y(c)},Jn.prototype.Y=function(c){try{if(c==this.g)t:{const we=Rn(this.g);var p=this.g.Ba();const Ci=this.g.Z();if(!(3>we)&&(we!=3||this.g&&(this.h.h||this.g.oa()||Eu(this.g)))){this.J||we!=4||p==7||(p==8||0>=Ci?os(3):os(2)),ra(this);var y=this.g.Z();this.X=y;e:if(fs(this)){var A=Eu(this.g);c="";var L=A.length,H=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),fn(this);var J="";break e}this.h.i=new m.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,c+=this.h.i.decode(A[p],{stream:!(H&&p==L-1)});A.length=0,this.h.g+=c,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=y==200,mu(this.i,this.u,this.A,this.l,this.R,we,y),this.o){if(this.T&&!this.K){e:{if(this.g){var kt,Se=this.g;if((kt=Se.g?Se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!et(kt)){var Pt=kt;break e}}Pt=null}if(y=Pt)cs(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dn(this,y);else{this.o=!1,this.s=3,ue(12),ln(this),fn(this);break t}}if(this.P){y=!0;let Ue;for(;!this.J&&this.C<J.length;)if(Ue=ds(this,J),Ue==ur){we==4&&(this.s=4,ue(14),y=!1),cs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ue==hs){this.s=4,ue(15),cs(this.i,this.l,J,"[Invalid Chunk]"),y=!1;break}else cs(this.i,this.l,Ue,null),dn(this,Ue);if(fs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||J.length!=0||this.h.h||(this.s=1,ue(16),y=!1),this.o=this.o&&y,!y)cs(this.i,this.l,J,"[Invalid Chunked Response]"),ln(this),fn(this);else if(0<J.length&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.ba&&!Me.M&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),vr(Me),Me.M=!0,ue(11))}}else cs(this.i,this.l,J,null),dn(this,J);we==4&&ln(this),this.o&&!this.J&&(we==4?bu(this.j,this):(this.o=!1,te(this)))}else Uh(this.g),y==400&&0<J.indexOf("Unknown SID")?(this.s=3,ue(12)):(this.s=0,ue(13)),ln(this),fn(this)}}}catch{}finally{}};function fs(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ds(c,p){var y=c.C,A=p.indexOf(`
`,y);return A==-1?ur:(y=Number(p.substring(y,A)),isNaN(y)?hs:(A+=1,A+y>p.length?ur:(p=p.slice(A,A+y),c.C=A+y,p)))}Jn.prototype.cancel=function(){this.J=!0,ln(this)};function te(c){c.S=Date.now()+c.I,wo(c,c.I)}function wo(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ls(C(c.ba,c),p)}function ra(c){c.B&&(m.clearTimeout(c.B),c.B=null)}Jn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Zn(this.i,this.A),this.L!=2&&(os(),ue(17)),ln(this),this.s=2,fn(this)):wo(this,this.S-c)};function fn(c){c.j.G==0||c.J||bu(c.j,c)}function ln(c){ra(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,Ge(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function dn(c,p){try{var y=c.j;if(y.G!=0&&(y.g==c||ms(y.h,c))){if(!c.K&&ms(y.h,c)&&y.G==3){try{var A=y.Da.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)pa(y),da(y);else break t;ko(y),ue(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=ls(C(y.Za,y),6e3));if(1>=pu(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Ii(y,11)}else if((c.K||y.g==c)&&pa(y),!et(p))for(L=y.Da.g.parse(p),p=0;p<L.length;p++){let Pt=L[p];if(y.T=Pt[0],Pt=Pt[1],y.G==2)if(Pt[0]=="c"){y.K=Pt[1],y.ia=Pt[2];const Me=Pt[3];Me!=null&&(y.la=Me,y.j.info("VER="+y.la));const we=Pt[4];we!=null&&(y.Aa=we,y.j.info("SVER="+y.Aa));const Ci=Pt[5];Ci!=null&&typeof Ci=="number"&&0<Ci&&(A=1.5*Ci,y.L=A,y.j.info("backChannelRequestTimeoutMs_="+A)),A=y;const Ue=c.g;if(Ue){const ai=Ue.g?Ue.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ai){var H=A.h;H.g||ai.indexOf("spdy")==-1&&ai.indexOf("quic")==-1&&ai.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(ps(H,H.h),H.h=null))}if(A.D){const Uo=Ue.g?Ue.g.getResponseHeader("X-HTTP-Session-Id"):null;Uo&&(A.ya=Uo,zt(A.I,A.D,Uo))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),A=y;var J=c;if(A.qa=Iu(A,A.J?A.ia:null,A.W),J.K){An(A.h,J);var kt=J,Se=A.L;Se&&(kt.I=Se),kt.B&&(ra(kt),te(kt)),A.g=J}else Su(A);0<y.i.length&&ma(y)}else Pt[0]!="stop"&&Pt[0]!="close"||Ii(y,7);else y.G==3&&(Pt[0]=="stop"||Pt[0]=="close"?Pt[0]=="stop"?Ii(y,7):Vo(y):Pt[0]!="noop"&&y.l&&y.l.ta(Pt),y.v=0)}}os(4)}catch{}}var Mh=class{constructor(c,p){this.g=c,this.map=p}};function bo(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ro(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function pu(c){return c.h?1:c.g?c.g.size:0}function ms(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function ps(c,p){c.g?c.g.add(p):c.h=p}function An(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}bo.prototype.cancel=function(){if(this.i=tn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function tn(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const y of c.g.values())p=p.concat(y.D);return p}return Q(c.i)}function gu(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(g(c)){for(var p=[],y=c.length,A=0;A<y;A++)p.push(c[A]);return p}p=[],y=0;for(A in c)p[y++]=c[A];return p}function Vh(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(g(c)||typeof c=="string"){var p=[];c=c.length;for(var y=0;y<c;y++)p.push(y);return p}p=[],y=0;for(const A in c)p[y++]=A;return p}}}function cr(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(g(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var y=Vh(c),A=gu(c),L=A.length,H=0;H<L;H++)p.call(void 0,A[H],y&&y[H],c)}var Io=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aa(c,p){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var A=c[y].indexOf("="),L=null;if(0<=A){var H=c[y].substring(0,A);L=c[y].substring(A+1)}else H=c[y];p(H,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Ai(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ai){this.h=c.h,gs(this,c.j),this.o=c.o,this.g=c.g,hr(this,c.s),this.l=c.l;var p=c.i,y=new ti;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),oa(this,y),this.m=c.m}else c&&(p=String(c).match(Io))?(this.h=!1,gs(this,p[1]||"",!0),this.o=_s(p[2]||""),this.g=_s(p[3]||"",!0),hr(this,p[4]),this.l=_s(p[5]||"",!0),oa(this,p[6]||"",!0),this.m=_s(p[7]||"")):(this.h=!1,this.i=new ti(null,this.h))}Ai.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Sn(p,Co,!0),":");var y=this.g;return(y||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Sn(p,Co,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(Sn(y,y.charAt(0)=="/"?No:_u,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",Sn(y,Ph)),c.join("")};function re(c){return new Ai(c)}function gs(c,p,y){c.j=y?_s(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function hr(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function oa(c,p,y){p instanceof ti?(c.i=p,Do(c.i,c.h)):(y||(p=Sn(p,kh)),c.i=new ti(p,c.h))}function zt(c,p,y){c.i.set(p,y)}function fr(c){return zt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function _s(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Sn(c,p,y){return typeof c=="string"?(c=encodeURI(c).replace(p,xh),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function xh(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Co=/[#\/\?@]/g,_u=/[#\?:]/g,No=/[#\?]/g,kh=/[#\?@]/g,Ph=/#/g;function ti(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function wn(c){c.g||(c.g=new Map,c.h=0,c.i&&aa(c.i,function(p,y){c.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}s=ti.prototype,s.add=function(c,p){wn(this),this.i=null,c=bi(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(p),this.h+=1,this};function la(c,p){wn(c),p=bi(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Si(c,p){return wn(c),p=bi(c,p),c.g.has(p)}s.forEach=function(c,p){wn(this),this.g.forEach(function(y,A){y.forEach(function(L){c.call(p,L,A,this)},this)},this)},s.na=function(){wn(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let A=0;A<p.length;A++){const L=c[A];for(let H=0;H<L.length;H++)y.push(p[A])}return y},s.V=function(c){wn(this);let p=[];if(typeof c=="string")Si(this,c)&&(p=p.concat(this.g.get(bi(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)p=p.concat(c[y])}return p},s.set=function(c,p){return wn(this),this.i=null,c=bi(this,c),Si(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},s.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function wi(c,p,y){la(c,p),0<y.length&&(c.i=null,c.g.set(bi(c,p),Q(y)),c.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var A=p[y];const H=encodeURIComponent(String(A)),J=this.V(A);for(A=0;A<J.length;A++){var L=H;J[A]!==""&&(L+="="+encodeURIComponent(String(J[A]))),c.push(L)}}return this.i=c.join("&")};function bi(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Do(c,p){p&&!c.j&&(wn(c),c.i=null,c.g.forEach(function(y,A){var L=A.toLowerCase();A!=L&&(la(this,A),wi(this,L,y))},c)),c.j=p}function yu(c,p){const y=new us;if(m.Image){const A=new Image;A.onload=V(bn,y,"TestLoadImage: loaded",!0,p,A),A.onerror=V(bn,y,"TestLoadImage: error",!1,p,A),A.onabort=V(bn,y,"TestLoadImage: abort",!1,p,A),A.ontimeout=V(bn,y,"TestLoadImage: timeout",!1,p,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else p(!1)}function dr(c,p){const y=new us,A=new AbortController,L=setTimeout(()=>{A.abort(),bn(y,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:A.signal}).then(H=>{clearTimeout(L),H.ok?bn(y,"TestPingServer: ok",!0,p):bn(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),bn(y,"TestPingServer: error",!1,p)})}function bn(c,p,y,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(y)}catch{}}function mr(){this.g=new Je}function ei(c,p,y){const A=y||"";try{cr(c,function(L,H){let J=L;_(L)&&(J=Eo(L)),p.push(A+H+"="+encodeURIComponent(J))})}catch(L){throw p.push(A+"type="+encodeURIComponent("_badmap")),L}}function ys(c){this.l=c.Ub||null,this.j=c.eb||!1}q(ys,To),ys.prototype.g=function(){return new Ri(this.l,this.j)},ys.prototype.i=function(c){return function(){return c}}({});function Ri(c,p){Te.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(Ri,Te),s=Ri.prototype,s.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,ii(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ni(this)),this.readyState=0},s.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Oo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Oo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}s.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?ni(this):ii(this),this.readyState==3&&Oo(this)}},s.Ra=function(c){this.g&&(this.response=this.responseText=c,ni(this))},s.Qa=function(c){this.g&&(this.response=c,ni(this))},s.ga=function(){this.g&&ni(this)};function ni(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ii(c)}s.setRequestHeader=function(c,p){this.u.append(c,p)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=p.next();return c.join(`\r
`)};function ii(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ri.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Mo(c){let p="";return Dt(c,function(y,A){p+=A,p+=":",p+=y,p+=`\r
`}),p}function Oe(c,p,y){t:{for(A in y){var A=!1;break t}A=!0}A||(y=Mo(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):zt(c,p,y))}function Ft(c){Te.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(Ft,Te);var ua=/^https?$/i,pr=["POST","PUT"];s=Ft.prototype,s.Ha=function(c){this.J=c},s.ea=function(c,p,y,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lr.g(),this.v=this.o?cu(this.o):cu(lr),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(H){vu(this,H);return}if(c=y||"",y=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)y.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const H of A.keys())y.set(H,A.get(H));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(y.keys()).find(H=>H.toLowerCase()=="content-type"),L=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(pr,p,void 0))||A||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,J]of y)this.g.setRequestHeader(H,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gr(this),this.u=!0,this.g.send(c),this.u=!1}catch(H){vu(this,H)}};function vu(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,ca(c),si(c)}function ca(c){c.A||(c.A=!0,Ne(c,"complete"),Ne(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ne(this,"complete"),Ne(this,"abort"),si(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),si(this,!0)),Ft.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?ha(this):this.bb())},s.bb=function(){ha(this)};function ha(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Rn(c)!=4||c.Z()!=2)){if(c.u&&Rn(c)==4)uu(c.Ea,0,c);else if(Ne(c,"readystatechange"),Rn(c)==4){c.h=!1;try{const J=c.Z();t:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var y;if(!(y=p)){var A;if(A=J===0){var L=String(c.D).match(Io)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),A=!ua.test(L?L.toLowerCase():"")}y=A}if(y)Ne(c,"complete"),Ne(c,"success");else{c.m=6;try{var H=2<Rn(c)?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.Z()+"]",ca(c)}}finally{si(c)}}}}function si(c,p){if(c.g){gr(c);const y=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Ne(c,"ready");try{y.onreadystatechange=A}catch{}}}function gr(c){c.I&&(m.clearTimeout(c.I),c.I=null)}s.isActive=function(){return!!this.g};function Rn(c){return c.g?c.g.readyState:0}s.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),Xn(p)}};function Eu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Uh(c){const p={};c=(c.g&&2<=Rn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(et(c[A]))continue;var y=k(c[A]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const H=p[L]||[];p[L]=H,H.push(y)}P(p,function(A){return A.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _r(c,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||p}function fa(c){this.Aa=0,this.i=[],this.j=new us,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_r("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_r("baseRetryDelayMs",5e3,c),this.cb=_r("retryDelaySeedMs",1e4,c),this.Wa=_r("forwardChannelMaxRetries",2,c),this.wa=_r("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new bo(c&&c.concurrentRequestLimit),this.Da=new mr,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=fa.prototype,s.la=8,s.G=1,s.connect=function(c,p,y,A){ue(0),this.W=c,this.H=p||{},y&&A!==void 0&&(this.H.OSID=y,this.H.OAID=A),this.F=this.X,this.I=Iu(this,null,this.W),ma(this)};function Vo(c){if(Tu(c),c.G==3){var p=c.U++,y=re(c.I);if(zt(y,"SID",c.K),zt(y,"RID",p),zt(y,"TYPE","terminate"),yr(c,y),p=new Jn(c,c.j,p),p.L=2,p.v=fr(re(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=p.v,y=!0),y||(p.g=Cu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),te(p)}Ru(c)}function da(c){c.g&&(vr(c),c.g.cancel(),c.g=null)}function Tu(c){da(c),c.u&&(m.clearTimeout(c.u),c.u=null),pa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function ma(c){if(!Ro(c.h)&&!c.s){c.s=!0;var p=c.Ga;_t||O(),ft||(_t(),ft=!0),Ht.add(p,c),c.B=0}}function Lh(c,p){return pu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ls(C(c.Ga,c,p),Po(c,c.B)),c.B++,!0)}s.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new Jn(this,this.j,c);let H=this.o;if(this.S&&(H?(H=I(H),D(H,this.S)):H=this.S),this.m!==null||this.O||(L.H=H,H=null),this.P)t:{for(var p=0,y=0;y<this.i.length;y++){e:{var A=this.i[y];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(p+=A,4096<p){p=y;break t}if(p===4096||y===this.i.length-1){p=y+1;break t}}p=1e3}else p=1e3;p=Au(this,L,p),y=re(this.I),zt(y,"RID",c),zt(y,"CVER",22),this.D&&zt(y,"X-HTTP-Session-Id",this.D),yr(this,y),H&&(this.O?p="headers="+encodeURIComponent(String(Mo(H)))+"&"+p:this.m&&Oe(y,this.m,H)),ps(this.h,L),this.Ua&&zt(y,"TYPE","init"),this.P?(zt(y,"$req",p),zt(y,"SID","null"),L.T=!0,Bn(L,y,null)):Bn(L,y,p),this.G=2}}else this.G==3&&(c?xo(this,c):this.i.length==0||Ro(this.h)||xo(this))};function xo(c,p){var y;p?y=p.l:y=c.U++;const A=re(c.I);zt(A,"SID",c.K),zt(A,"RID",y),zt(A,"AID",c.T),yr(c,A),c.m&&c.o&&Oe(A,c.m,c.o),y=new Jn(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Au(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ps(c.h,y),Bn(y,A,p)}function yr(c,p){c.H&&Dt(c.H,function(y,A){zt(p,A,y)}),c.l&&cr({},function(y,A){zt(p,A,y)})}function Au(c,p,y){y=Math.min(c.i.length,y);var A=c.l?C(c.l.Na,c.l,c):null;t:{var L=c.i;let H=-1;for(;;){const J=["count="+y];H==-1?0<y?(H=L[0].g,J.push("ofs="+H)):H=0:J.push("ofs="+H);let kt=!0;for(let Se=0;Se<y;Se++){let Pt=L[Se].g;const Me=L[Se].map;if(Pt-=H,0>Pt)H=Math.max(0,L[Se].g-100),kt=!1;else try{ei(Me,J,"req"+Pt+"_")}catch{A&&A(Me)}}if(kt){A=J.join("&");break t}}}return c=c.i.splice(0,y),p.D=c,A}function Su(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;_t||O(),ft||(_t(),ft=!0),Ht.add(p,c),c.v=0}}function ko(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ls(C(c.Fa,c),Po(c,c.v)),c.v++,!0)}s.Fa=function(){if(this.u=null,wu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ls(C(this.ab,this),c)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ue(10),da(this),wu(this))};function vr(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function wu(c){c.g=new Jn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=re(c.qa);zt(p,"RID","rpc"),zt(p,"SID",c.K),zt(p,"AID",c.T),zt(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&zt(p,"TO",c.ja),zt(p,"TYPE","xmlhttp"),yr(c,p),c.m&&c.o&&Oe(p,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=fr(re(p)),y.m=null,y.P=!0,Ti(y,c)}s.Za=function(){this.C!=null&&(this.C=null,da(this),ko(this),ue(19))};function pa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function bu(c,p){var y=null;if(c.g==p){pa(c),vr(c),c.g=null;var A=2}else if(ms(c.h,p))y=p.D,An(c.h,p),A=1;else return;if(c.G!=0){if(p.o)if(A==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var L=c.B;A=na(),Ne(A,new fu(A,y)),ma(c)}else Su(c);else if(L=p.s,L==3||L==0&&0<p.X||!(A==1&&Lh(c,p)||A==2&&ko(c)))switch(y&&0<y.length&&(p=c.h,p.i=p.i.concat(y)),L){case 1:Ii(c,5);break;case 4:Ii(c,10);break;case 3:Ii(c,6);break;default:Ii(c,2)}}}function Po(c,p){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*p}function Ii(c,p){if(c.j.info("Error code "+p),p==2){var y=C(c.fb,c),A=c.Xa;const L=!A;A=new Ai(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||gs(A,"https"),fr(A),L?yu(A.toString(),y):dr(A.toString(),y)}else ue(2);c.G=0,c.l&&c.l.sa(p),Ru(c),Tu(c)}s.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ue(2)):(this.j.info("Failed to ping google.com"),ue(1))};function Ru(c){if(c.G=0,c.ka=[],c.l){const p=tn(c.h);(p.length!=0||c.i.length!=0)&&(X(c.ka,p),X(c.ka,c.i),c.h.i.length=0,Q(c.i),c.i.length=0),c.l.ra()}}function Iu(c,p,y){var A=y instanceof Ai?re(y):new Ai(y);if(A.g!="")p&&(A.g=p+"."+A.g),hr(A,A.s);else{var L=m.location;A=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var H=new Ai(null);A&&gs(H,A),p&&(H.g=p),L&&hr(H,L),y&&(H.l=y),A=H}return y=c.D,p=c.ya,y&&p&&zt(A,y,p),zt(A,"VER",c.la),yr(c,A),A}function Cu(c,p,y){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Ft(new ys({eb:y})):new Ft(c.pa),p.Ha(c.J),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nu(){}s=Nu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function ga(){}ga.prototype.g=function(c,p){return new en(c,p)};function en(c,p){Te.call(this),this.g=new fa(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!et(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!et(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new ri(this)}q(en,Te),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){Vo(this.g)},en.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=Eo(c),c=y);p.i.push(new Mh(p.Ya++,c)),p.G==3&&ma(p)},en.prototype.N=function(){this.g.l=null,delete this.j,Vo(this.g),delete this.g,en.aa.N.call(this)};function Du(c){rs.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const y in p){c=y;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}q(Du,rs);function Ou(){zn.call(this),this.status=1}q(Ou,zn);function ri(c){this.g=c}q(ri,Nu),ri.prototype.ua=function(){Ne(this.g,"a")},ri.prototype.ta=function(c){Ne(this.g,new Du(c))},ri.prototype.sa=function(c){Ne(this.g,new Ou)},ri.prototype.ra=function(){Ne(this.g,"b")},ga.prototype.createWebChannel=ga.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,AT=function(){return new ga},TT=function(){return na()},ET=Tn,em={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,jc=Ae,Ei.COMPLETE="complete",vT=Ei,hu.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",Te.prototype.listen=Te.prototype.K,Rl=hu,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,yT=Ft}).apply(typeof Dc<"u"?Dc:typeof self<"u"?self:typeof window<"u"?window:{});const lv="@firebase/firestore",uv="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}$e.UNAUTHENTICATED=new $e(null),$e.GOOGLE_CREDENTIALS=new $e("google-credentials-uid"),$e.FIRST_PARTY=new $e("first-party-uid"),$e.MOCK_USER=new $e("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new ym("@firebase/firestore");function Fa(){return Gr.logLevel}function rt(s,...t){if(Gr.logLevel<=Ot.DEBUG){const n=t.map(Mm);Gr.debug(`Firestore (${co}): ${s}`,...n)}}function Zi(s,...t){if(Gr.logLevel<=Ot.ERROR){const n=t.map(Mm);Gr.error(`Firestore (${co}): ${s}`,...n)}}function eo(s,...t){if(Gr.logLevel<=Ot.WARN){const n=t.map(Mm);Gr.warn(`Firestore (${co}): ${s}`,...n)}}function Mm(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(s="Unexpected state"){const t=`FIRESTORE (${co}) INTERNAL ASSERTION FAILED: `+s;throw Zi(t),new Error(t)}function Gt(s,t){s||yt()}function St(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class at extends ts{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class PI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n($e.UNAUTHENTICATED))}shutdown(){}}class UI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class LI{constructor(t){this.t=t,this.currentUser=$e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Gt(this.o===void 0);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let u=new $i;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new $i,t.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const g=u;t.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new $i)}},0),f()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Gt(typeof r.accessToken=="string"),new ST(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Gt(t===null||typeof t=="string"),new $e(t)}}class jI{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=$e.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class zI{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new jI(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n($e.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BI{constructor(t,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,vn(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,n){Gt(this.o===void 0);const r=u=>{u.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.R;return this.R=u.token,rt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable(()=>r(u))};const o=u=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new cv(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Gt(typeof n.token=="string"),this.R=n.token,new cv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=qI(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=t.charAt(o[u]%62))}return r}}function xt(s,t){return s<t?-1:s>t?1:0}function no(s,t,n){return s.length===t.length&&s.every((r,o)=>n(r,t[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=-62135596800,fv=1e6;class Ie{static now(){return Ie.fromMillis(Date.now())}static fromDate(t){return Ie.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*fv);return new Ie(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new at($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new at($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<hv)throw new at($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new at($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fv}_compareTo(t){return this.seconds===t.seconds?xt(this.nanoseconds,t.nanoseconds):xt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-hv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{static fromTimestamp(t){return new Et(t)}static min(){return new Et(new Ie(0,0))}static max(){return new Et(new Ie(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="__name__";class fi{constructor(t,n,r){n===void 0?n=0:n>t.length&&yt(),r===void 0?r=t.length-n:r>t.length-n&&yt(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return fi.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof fi?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let o=0;o<r;o++){const u=fi.compareSegments(t.get(o),n.get(o));if(u!==0)return u}return Math.sign(t.length-n.length)}static compareSegments(t,n){const r=fi.isNumericId(t),o=fi.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?fi.extractNumericId(t).compare(fi.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ys.fromString(t.substring(4,t.length-2))}}class Jt extends fi{construct(t,n,r){return new Jt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new at($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new Jt(n)}static emptyPath(){return new Jt([])}}const HI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qe extends fi{construct(t,n,r){return new qe(t,n,r)}static isValidIdentifier(t){return HI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dv}static keyField(){return new qe([dv])}static fromServerFormat(t){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new at($.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new at($.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new at($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(r+=m,o++):(u(),o++)}if(u(),f)throw new at($.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new qe(n)}static emptyPath(){return new qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.path=t}static fromPath(t){return new dt(Jt.fromString(t))}static fromName(t){return new dt(Jt.fromString(t).popFirst(5))}static empty(){return new dt(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Jt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Jt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new dt(new Jt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=-1;function FI(s,t){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Et.fromTimestamp(r===1e9?new Ie(n+1,0):new Ie(n,r));return new Ws(o,dt.empty(),t)}function GI(s){return new Ws(s.readTime,s.key,Ll)}class Ws{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Ws(Et.min(),dt.empty(),Ll)}static max(){return new Ws(Et.max(),dt.empty(),Ll)}}function KI(s,t){let n=s.readTime.compareTo(t.readTime);return n!==0?n:(n=dt.comparator(s.documentKey,t.documentKey),n!==0?n:xt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ho(s){if(s.code!==$.FAILED_PRECONDITION||s.message!==QI)throw s;rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Y((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Y.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Y.reject(n)}static resolve(t){return new Y((n,r)=>{n(t)})}static reject(t){return new Y((n,r)=>{r(t)})}static waitFor(t){return new Y((n,r)=>{let o=0,u=0,f=!1;t.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},g=>r(g))}),f=!0,u===o&&n()})}static or(t){let n=Y.resolve(!1);for(const r of t)n=n.next(o=>o?Y.resolve(o):r());return n}static forEach(t,n){const r=[];return t.forEach((o,u)=>{r.push(n.call(this,o,u))}),this.waitFor(r)}static mapArray(t,n){return new Y((r,o)=>{const u=t.length,f=new Array(u);let m=0;for(let g=0;g<u;g++){const _=g;n(t[_]).next(E=>{f[_]=E,++m,m===u&&r(f)},E=>o(E))}})}static doWhile(t,n){return new Y((r,o)=>{const u=()=>{t()===!0?n().next(()=>{u()},o):r()};u()})}}function $I(s){const t=s.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}mh.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=-1;function ph(s){return s==null}function Jc(s){return s===0&&1/s==-1/0}function XI(s){return typeof s=="number"&&Number.isInteger(s)&&!Jc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="";function WI(s){let t="";for(let n=0;n<s.length;n++)t.length>0&&(t=mv(t)),t=ZI(s.get(n),t);return mv(t)}function ZI(s,t){let n=t;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case bT:n+="";break;default:n+=u}}return n}function mv(s){return s+bT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(s){let t=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t++;return t}function Yr(s,t){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t(n,s[n])}function RT(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t,n){this.comparator=t,this.root=n||Be.EMPTY}insert(t,n){return new ie(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Be.BLACK,null,null))}remove(t){return new ie(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Be.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Oc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Oc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Oc(this.root,t,this.comparator,!0)}}class Oc{constructor(t,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?r(t.key,n):1,n&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Be{constructor(t,n,r,o,u){this.key=t,this.value=n,this.color=r??Be.RED,this.left=o??Be.EMPTY,this.right=u??Be.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,o,u){return new Be(t??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Be.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return Be.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Be.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw yt();const t=this.left.check();if(t!==this.right.check())throw yt();return t+(this.isRed()?0:1)}}Be.EMPTY=null,Be.RED=!0,Be.BLACK=!1;Be.EMPTY=new class{constructor(){this.size=0}get key(){throw yt()}get value(){throw yt()}get color(){throw yt()}get left(){throw yt()}get right(){throw yt()}copy(t,n,r,o,u){return this}insert(t,n,r){return new Be(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.comparator=t,this.data=new ie(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new gv(this.data.getIterator())}getIteratorFrom(t){return new gv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Ce)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ce(this.comparator);return n.data=t,n}}class gv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(t){this.fields=t,t.sort(qe.comparator)}static empty(){return new Kn([])}unionWith(t){let n=new Ce(qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Kn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return no(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new IT("Invalid base64 string: "+u):u}}(t);return new Fe(n)}static fromUint8Array(t){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(t);return new Fe(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return xt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Fe.EMPTY_BYTE_STRING=new Fe("");const JI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zs(s){if(Gt(!!s),typeof s=="string"){let t=0;const n=JI.exec(s);if(Gt(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:he(s.seconds),nanos:he(s.nanos)}}function he(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Js(s){return typeof s=="string"?Fe.fromBase64String(s):Fe.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="server_timestamp",NT="__type__",DT="__previous_value__",OT="__local_write_time__";function xm(s){var t,n;return((n=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[NT])===null||n===void 0?void 0:n.stringValue)===CT}function gh(s){const t=s.mapValue.fields[DT];return xm(t)?gh(t):t}function jl(s){const t=Zs(s.mapValue.fields[OT].timestampValue);return new Ie(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(t,n,r,o,u,f,m,g,_){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_}}const th="(default)";class zl{constructor(t,n){this.projectId=t,this.database=n||th}static empty(){return new zl("","")}get isDefaultDatabase(){return this.database===th}isEqual(t){return t instanceof zl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="__type__",eC="__max__",Mc={mapValue:{}},VT="__vector__",eh="value";function tr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?xm(s)?4:iC(s)?9007199254740991:nC(s)?10:11:yt()}function gi(s,t){if(s===t)return!0;const n=tr(s);if(n!==tr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return jl(s).isEqual(jl(t));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Zs(o.timestampValue),m=Zs(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(o,u){return Js(o.bytesValue).isEqual(Js(u.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(o,u){return he(o.geoPointValue.latitude)===he(u.geoPointValue.latitude)&&he(o.geoPointValue.longitude)===he(u.geoPointValue.longitude)}(s,t);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return he(o.integerValue)===he(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=he(o.doubleValue),m=he(u.doubleValue);return f===m?Jc(f)===Jc(m):isNaN(f)&&isNaN(m)}return!1}(s,t);case 9:return no(s.arrayValue.values||[],t.arrayValue.values||[],gi);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(pv(f)!==pv(m))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(m[g]===void 0||!gi(f[g],m[g])))return!1;return!0}(s,t);default:return yt()}}function Bl(s,t){return(s.values||[]).find(n=>gi(n,t))!==void 0}function io(s,t){if(s===t)return 0;const n=tr(s),r=tr(t);if(n!==r)return xt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xt(s.booleanValue,t.booleanValue);case 2:return function(u,f){const m=he(u.integerValue||u.doubleValue),g=he(f.integerValue||f.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(s,t);case 3:return _v(s.timestampValue,t.timestampValue);case 4:return _v(jl(s),jl(t));case 5:return xt(s.stringValue,t.stringValue);case 6:return function(u,f){const m=Js(u),g=Js(f);return m.compareTo(g)}(s.bytesValue,t.bytesValue);case 7:return function(u,f){const m=u.split("/"),g=f.split("/");for(let _=0;_<m.length&&_<g.length;_++){const E=xt(m[_],g[_]);if(E!==0)return E}return xt(m.length,g.length)}(s.referenceValue,t.referenceValue);case 8:return function(u,f){const m=xt(he(u.latitude),he(f.latitude));return m!==0?m:xt(he(u.longitude),he(f.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return yv(s.arrayValue,t.arrayValue);case 10:return function(u,f){var m,g,_,E;const S=u.fields||{},C=f.fields||{},V=(m=S[eh])===null||m===void 0?void 0:m.arrayValue,q=(g=C[eh])===null||g===void 0?void 0:g.arrayValue,Q=xt(((_=V==null?void 0:V.values)===null||_===void 0?void 0:_.length)||0,((E=q==null?void 0:q.values)===null||E===void 0?void 0:E.length)||0);return Q!==0?Q:yv(V,q)}(s.mapValue,t.mapValue);case 11:return function(u,f){if(u===Mc.mapValue&&f===Mc.mapValue)return 0;if(u===Mc.mapValue)return 1;if(f===Mc.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),_=f.fields||{},E=Object.keys(_);g.sort(),E.sort();for(let S=0;S<g.length&&S<E.length;++S){const C=xt(g[S],E[S]);if(C!==0)return C;const V=io(m[g[S]],_[E[S]]);if(V!==0)return V}return xt(g.length,E.length)}(s.mapValue,t.mapValue);default:throw yt()}}function _v(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return xt(s,t);const n=Zs(s),r=Zs(t),o=xt(n.seconds,r.seconds);return o!==0?o:xt(n.nanos,r.nanos)}function yv(s,t){const n=s.values||[],r=t.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=io(n[o],r[o]);if(u)return u}return xt(n.length,r.length)}function so(s){return nm(s)}function nm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(n){const r=Zs(n);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(n){return Js(n).toBase64()}(s.bytesValue):"referenceValue"in s?function(n){return dt.fromName(n).toString()}(s.referenceValue):"geoPointValue"in s?function(n){return`geo(${n.latitude},${n.longitude})`}(s.geoPointValue):"arrayValue"in s?function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=nm(u);return r+"]"}(s.arrayValue):"mapValue"in s?function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${nm(n.fields[f])}`;return o+"}"}(s.mapValue):yt()}function zc(s){switch(tr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=gh(s);return t?16+zc(t):16;case 5:return 2*s.stringValue.length;case 6:return Js(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,u)=>o+zc(u),0)}(s.arrayValue);case 10:case 11:return function(r){let o=0;return Yr(r.fields,(u,f)=>{o+=u.length+zc(f)}),o}(s.mapValue);default:throw yt()}}function vv(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function im(s){return!!s&&"integerValue"in s}function km(s){return!!s&&"arrayValue"in s}function Ev(s){return!!s&&"nullValue"in s}function Tv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Bc(s){return!!s&&"mapValue"in s}function nC(s){var t,n;return((n=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[MT])===null||n===void 0?void 0:n.stringValue)===VT}function Ol(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const t={mapValue:{fields:{}}};return Yr(s.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Ol(r)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ol(s.arrayValue.values[n]);return t}return Object.assign({},s)}function iC(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===eC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(t){this.value=t}static empty(){return new Un({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Bc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ol(n)}setAll(t){let n=qe.emptyPath(),r={},o=[];t.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=m.popLast()}f?r[m.lastSegment()]=Ol(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(t){const n=this.field(t.popLast());Bc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return gi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=n.mapValue.fields[t.get(r)];Bc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,r){Yr(n,(o,u)=>t[o]=u);for(const o of r)delete t[o]}clone(){return new Un(Ol(this.value))}}function xT(s){const t=[];return Yr(s.fields,(n,r)=>{const o=new qe([n]);if(Bc(r)){const u=xT(r.mapValue).fields;if(u.length===0)t.push(o);else for(const f of u)t.push(o.child(f))}else t.push(o)}),new Kn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t,n,r,o,u,f,m){this.key=t,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(t){return new Xe(t,0,Et.min(),Et.min(),Et.min(),Un.empty(),0)}static newFoundDocument(t,n,r,o){return new Xe(t,1,n,Et.min(),r,o,0)}static newNoDocument(t,n){return new Xe(t,2,n,Et.min(),Et.min(),Un.empty(),0)}static newUnknownDocument(t,n){return new Xe(t,3,n,Et.min(),Et.min(),Un.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Xe&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Xe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t,n){this.position=t,this.inclusive=n}}function Av(s,t,n){let r=0;for(let o=0;o<s.position.length;o++){const u=t[o],f=s.position[o];if(u.field.isKeyField()?r=dt.comparator(dt.fromName(f.referenceValue),n.key):r=io(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Sv(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!gi(s.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(t,n="asc"){this.field=t,this.dir=n}}function sC(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{}class ve extends kT{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new aC(t,n,r):n==="array-contains"?new uC(t,r):n==="in"?new cC(t,r):n==="not-in"?new hC(t,r):n==="array-contains-any"?new fC(t,r):new ve(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new oC(t,r):new lC(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(io(n,this.value)):n!==null&&tr(this.value)===tr(n)&&this.matchesComparison(io(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return yt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends kT{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new $n(t,n)}matches(t){return PT(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function PT(s){return s.op==="and"}function UT(s){return rC(s)&&PT(s)}function rC(s){for(const t of s.filters)if(t instanceof $n)return!1;return!0}function sm(s){if(s instanceof ve)return s.field.canonicalString()+s.op.toString()+so(s.value);if(UT(s))return s.filters.map(t=>sm(t)).join(",");{const t=s.filters.map(n=>sm(n)).join(",");return`${s.op}(${t})`}}function LT(s,t){return s instanceof ve?function(r,o){return o instanceof ve&&r.op===o.op&&r.field.isEqual(o.field)&&gi(r.value,o.value)}(s,t):s instanceof $n?function(r,o){return o instanceof $n&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((u,f,m)=>u&&LT(f,o.filters[m]),!0):!1}(s,t):void yt()}function jT(s){return s instanceof ve?function(n){return`${n.field.canonicalString()} ${n.op} ${so(n.value)}`}(s):s instanceof $n?function(n){return n.op.toString()+" {"+n.getFilters().map(jT).join(" ,")+"}"}(s):"Filter"}class aC extends ve{constructor(t,n,r){super(t,n,r),this.key=dt.fromName(r.referenceValue)}matches(t){const n=dt.comparator(t.key,this.key);return this.matchesComparison(n)}}class oC extends ve{constructor(t,n){super(t,"in",n),this.keys=zT("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class lC extends ve{constructor(t,n){super(t,"not-in",n),this.keys=zT("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function zT(s,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>dt.fromName(r.referenceValue))}class uC extends ve{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return km(n)&&Bl(n.arrayValue,this.value)}}class cC extends ve{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Bl(this.value.arrayValue,n)}}class hC extends ve{constructor(t,n){super(t,"not-in",n)}matches(t){if(Bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Bl(this.value.arrayValue,n)}}class fC extends ve{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!km(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t,n=null,r=[],o=[],u=null,f=null,m=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.le=null}}function wv(s,t=null,n=[],r=[],o=null,u=null,f=null){return new dC(s,t,n,r,o,u,f)}function Pm(s){const t=St(s);if(t.le===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>sm(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),ph(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>so(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>so(r)).join(",")),t.le=n}return t.le}function Um(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!sC(s.orderBy[n],t.orderBy[n]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!LT(s.filters[n],t.filters[n]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!Sv(s.startAt,t.startAt)&&Sv(s.endAt,t.endAt)}function rm(s){return dt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(t,n=null,r=[],o=[],u=null,f="F",m=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=g,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function mC(s,t,n,r,o,u,f,m){return new eu(s,t,n,r,o,u,f,m)}function _h(s){return new eu(s)}function bv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function BT(s){return s.collectionGroup!==null}function Ml(s){const t=St(s);if(t.he===null){t.he=[];const n=new Set;for(const u of t.explicitOrderBy)t.he.push(u),n.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Ce(qe.comparator);return f.filters.forEach(g=>{g.getFlattenedFilters().forEach(_=>{_.isInequality()&&(m=m.add(_.field))})}),m})(t).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||t.he.push(new ih(u,r))}),n.has(qe.keyField().canonicalString())||t.he.push(new ih(qe.keyField(),r))}return t.he}function mi(s){const t=St(s);return t.Pe||(t.Pe=pC(t,Ml(s))),t.Pe}function pC(s,t){if(s.limitType==="F")return wv(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new ih(o.field,u)});const n=s.endAt?new nh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new nh(s.startAt.position,s.startAt.inclusive):null;return wv(s.path,s.collectionGroup,t,s.filters,s.limit,n,r)}}function am(s,t){const n=s.filters.concat([t]);return new eu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function om(s,t,n){return new eu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,n,s.startAt,s.endAt)}function yh(s,t){return Um(mi(s),mi(t))&&s.limitType===t.limitType}function qT(s){return`${Pm(mi(s))}|lt:${s.limitType}`}function Ga(s){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(o=>jT(o)).join(", ")}]`),ph(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(o=>so(o)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(o=>so(o)).join(",")),`Target(${r})`}(mi(s))}; limitType=${s.limitType})`}function vh(s,t){return t.isFoundDocument()&&function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):dt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(s,t)&&function(r,o){for(const u of Ml(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(s,t)&&function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0}(s,t)&&function(r,o){return!(r.startAt&&!function(f,m,g){const _=Av(f,m,g);return f.inclusive?_<=0:_<0}(r.startAt,Ml(r),o)||r.endAt&&!function(f,m,g){const _=Av(f,m,g);return f.inclusive?_>=0:_>0}(r.endAt,Ml(r),o))}(s,t)}function gC(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function HT(s){return(t,n)=>{let r=!1;for(const o of Ml(s)){const u=_C(o,t,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function _C(s,t,n){const r=s.field.isKeyField()?dt.comparator(t.key,n.key):function(u,f,m){const g=f.data.field(u),_=m.data.field(u);return g!==null&&_!==null?io(g,_):yt()}(s.field,t,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return yt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Yr(this.inner,(n,r)=>{for(const[o,u]of r)t(o,u)})}isEmpty(){return RT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=new ie(dt.comparator);function Ji(){return yC}const FT=new ie(dt.comparator);function Il(...s){let t=FT;for(const n of s)t=t.insert(n.key,n);return t}function GT(s){let t=FT;return s.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function zr(){return Vl()}function KT(){return Vl()}function Vl(){return new $r(s=>s.toString(),(s,t)=>s.isEqual(t))}const vC=new ie(dt.comparator),EC=new Ce(dt.comparator);function Mt(...s){let t=EC;for(const n of s)t=t.add(n);return t}const TC=new Ce(xt);function AC(){return TC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jc(t)?"-0":t}}function QT(s){return{integerValue:""+s}}function YT(s,t){return XI(t)?QT(t):Lm(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){this._=void 0}}function SC(s,t,n){return s instanceof ql?function(o,u){const f={fields:{[NT]:{stringValue:CT},[OT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&xm(u)&&(u=gh(u)),u&&(f.fields[DT]=u),{mapValue:f}}(n,t):s instanceof Hl?XT(s,t):s instanceof Fl?WT(s,t):function(o,u){const f=$T(o,u),m=Rv(f)+Rv(o.Ie);return im(f)&&im(o.Ie)?QT(m):Lm(o.serializer,m)}(s,t)}function wC(s,t,n){return s instanceof Hl?XT(s,t):s instanceof Fl?WT(s,t):n}function $T(s,t){return s instanceof Gl?function(r){return im(r)||function(u){return!!u&&"doubleValue"in u}(r)}(t)?t:{integerValue:0}:null}class ql extends Eh{}class Hl extends Eh{constructor(t){super(),this.elements=t}}function XT(s,t){const n=ZT(t);for(const r of s.elements)n.some(o=>gi(o,r))||n.push(r);return{arrayValue:{values:n}}}class Fl extends Eh{constructor(t){super(),this.elements=t}}function WT(s,t){let n=ZT(t);for(const r of s.elements)n=n.filter(o=>!gi(o,r));return{arrayValue:{values:n}}}class Gl extends Eh{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function Rv(s){return he(s.integerValue||s.doubleValue)}function ZT(s){return km(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(t,n){this.field=t,this.transform=n}}function bC(s,t){return s.field.isEqual(t.field)&&function(r,o){return r instanceof Hl&&o instanceof Hl||r instanceof Fl&&o instanceof Fl?no(r.elements,o.elements,gi):r instanceof Gl&&o instanceof Gl?gi(r.Ie,o.Ie):r instanceof ql&&o instanceof ql}(s.transform,t.transform)}class RC{constructor(t,n){this.version=t,this.transformResults=n}}class Yn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Yn}static exists(t){return new Yn(void 0,t)}static updateTime(t){return new Yn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function qc(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Th{}function t0(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new jm(s.key,Yn.none()):new nu(s.key,s.data,Yn.none());{const n=s.data,r=Un.empty();let o=new Ce(qe.comparator);for(let u of t.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new Xr(s.key,r,new Kn(o.toArray()),Yn.none())}}function IC(s,t,n){s instanceof nu?function(o,u,f){const m=o.value.clone(),g=Cv(o.fieldTransforms,u,f.transformResults);m.setAll(g),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(s,t,n):s instanceof Xr?function(o,u,f){if(!qc(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=Cv(o.fieldTransforms,u,f.transformResults),g=u.data;g.setAll(e0(o)),g.setAll(m),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(s,t,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,t,n)}function xl(s,t,n,r){return s instanceof nu?function(u,f,m,g){if(!qc(u.precondition,f))return m;const _=u.value.clone(),E=Nv(u.fieldTransforms,g,f);return _.setAll(E),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null}(s,t,n,r):s instanceof Xr?function(u,f,m,g){if(!qc(u.precondition,f))return m;const _=Nv(u.fieldTransforms,g,f),E=f.data;return E.setAll(e0(u)),E.setAll(_),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(S=>S.field))}(s,t,n,r):function(u,f,m){return qc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(s,t,n)}function CC(s,t){let n=null;for(const r of s.fieldTransforms){const o=t.data.field(r.field),u=$T(r.transform,o||null);u!=null&&(n===null&&(n=Un.empty()),n.set(r.field,u))}return n||null}function Iv(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&no(r,o,(u,f)=>bC(u,f))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class nu extends Th{constructor(t,n,r,o=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Xr extends Th{constructor(t,n,r,o,u=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function e0(s){const t=new Map;return s.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=s.data.field(n);t.set(n,r)}}),t}function Cv(s,t,n){const r=new Map;Gt(s.length===n.length);for(let o=0;o<n.length;o++){const u=s[o],f=u.transform,m=t.data.field(u.field);r.set(u.field,wC(f,m,n[o]))}return r}function Nv(s,t,n){const r=new Map;for(const o of s){const u=o.transform,f=n.data.field(o.field);r.set(o.field,SC(u,f,t))}return r}class jm extends Th{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NC extends Th{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(t,n,r,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&IC(u,t,r[o])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=xl(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=xl(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=KT();return this.mutations.forEach(o=>{const u=t.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const g=t0(f,m);g!==null&&r.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Mt())}isEqual(t){return this.batchId===t.batchId&&no(this.mutations,t.mutations,(n,r)=>Iv(n,r))&&no(this.baseMutations,t.baseMutations,(n,r)=>Iv(n,r))}}class zm{constructor(t,n,r,o){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(t,n,r){Gt(t.mutations.length===r.length);let o=function(){return vC}();const u=t.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new zm(t,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye,Lt;function VC(s){switch(s){case $.OK:return yt();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return yt()}}function n0(s){if(s===void 0)return Zi("GRPC error has no .code"),$.UNKNOWN;switch(s){case ye.OK:return $.OK;case ye.CANCELLED:return $.CANCELLED;case ye.UNKNOWN:return $.UNKNOWN;case ye.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case ye.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case ye.INTERNAL:return $.INTERNAL;case ye.UNAVAILABLE:return $.UNAVAILABLE;case ye.UNAUTHENTICATED:return $.UNAUTHENTICATED;case ye.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case ye.NOT_FOUND:return $.NOT_FOUND;case ye.ALREADY_EXISTS:return $.ALREADY_EXISTS;case ye.PERMISSION_DENIED:return $.PERMISSION_DENIED;case ye.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case ye.ABORTED:return $.ABORTED;case ye.OUT_OF_RANGE:return $.OUT_OF_RANGE;case ye.UNIMPLEMENTED:return $.UNIMPLEMENTED;case ye.DATA_LOSS:return $.DATA_LOSS;default:return yt()}}(Lt=ye||(ye={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new Ys([4294967295,4294967295],0);function Dv(s){const t=xC().encode(s),n=new _T;return n.update(t),new Uint8Array(n.digest())}function Ov(s){const t=new DataView(s.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Ys([n,r],0),new Ys([o,u],0)]}class Bm{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cl(`Invalid padding: ${n}`);if(r<0)throw new Cl(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Cl(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Cl(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*t.length-n,this.de=Ys.fromNumber(this.Ee)}Ae(t,n,r){let o=t.add(n.multiply(Ys.fromNumber(r)));return o.compare(kC)===1&&(o=new Ys([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const n=Dv(t),[r,o]=Ov(n);for(let u=0;u<this.hashCount;u++){const f=this.Ae(r,o,u);if(!this.Re(f))return!1}return!0}static create(t,n,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),f=new Bm(u,o,n);return r.forEach(m=>f.insert(m)),f}insert(t){if(this.Ee===0)return;const n=Dv(t),[r,o]=Ov(n);for(let u=0;u<this.hashCount;u++){const f=this.Ae(r,o,u);this.Ve(f)}}Ve(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(t,n,r,o,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const o=new Map;return o.set(t,iu.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Ah(Et.min(),o,new ie(xt),Ji(),Mt())}}class iu{constructor(t,n,r,o,u){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new iu(r,n,Mt(),Mt(),Mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(t,n,r,o){this.me=t,this.removedTargetIds=n,this.key=r,this.fe=o}}class i0{constructor(t,n){this.targetId=t,this.ge=n}}class s0{constructor(t,n,r=Fe.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=o}}class Mv{constructor(){this.pe=0,this.ye=Vv(),this.we=Fe.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.we=t)}Fe(){let t=Mt(),n=Mt(),r=Mt();return this.ye.forEach((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:yt()}}),new iu(this.we,this.be,t,n,r)}Me(){this.Se=!1,this.ye=Vv()}xe(t,n){this.Se=!0,this.ye=this.ye.insert(t,n)}Oe(t){this.Se=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Gt(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class PC{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Ji(),this.$e=Vc(),this.Ke=Vc(),this.Ue=new ie(xt)}We(t){for(const n of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(n,t.fe):this.ze(n,t.key,t.fe);for(const n of t.removedTargetIds)this.ze(n,t.key,t.fe)}je(t){this.forEachTarget(t,n=>{const r=this.He(n);switch(t.state){case 0:this.Je(n)&&r.Ce(t.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(t.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(t.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(t.resumeToken));break;default:yt()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.qe.forEach((r,o)=>{this.Je(o)&&n(o)})}Ze(t){const n=t.targetId,r=t.ge.count,o=this.Xe(n);if(o){const u=o.target;if(rm(u))if(r===0){const f=new dt(u.path);this.ze(n,f,Xe.newNoDocument(f,Et.min()))}else Gt(r===1);else{const f=this.et(n);if(f!==r){const m=this.tt(t),g=m?this.nt(m,t,f):1;if(g!==0){this.Ye(n);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,_)}}}}}tt(t){const n=t.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=Js(r).toUint8Array()}catch(g){if(g instanceof IT)return eo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Bm(f,o,u)}catch(g){return eo(g instanceof Cl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Ee===0?null:m}nt(t,n,r){return n.ge.count===r-this.st(t,n.targetId)?0:2}st(t,n){const r=this.ke.getRemoteKeysForTarget(n);let o=0;return r.forEach(u=>{const f=this.ke.it(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.ze(n,u,null),o++)}),o}ot(t){const n=new Map;this.qe.forEach((u,f)=>{const m=this.Xe(f);if(m){if(u.current&&rm(m.target)){const g=new dt(m.target.path);this._t(g).has(f)||this.ut(f,g)||this.ze(f,g,Xe.newNoDocument(g,t))}u.ve&&(n.set(f,u.Fe()),u.Me())}});let r=Mt();this.Ke.forEach((u,f)=>{let m=!0;f.forEachWhile(g=>{const _=this.Xe(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(u))}),this.Qe.forEach((u,f)=>f.setReadTime(t));const o=new Ah(t,n,this.Ue,this.Qe,r);return this.Qe=Ji(),this.$e=Vc(),this.Ke=Vc(),this.Ue=new ie(xt),o}Ge(t,n){if(!this.Je(t))return;const r=this.ut(t,n.key)?2:0;this.He(t).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(t)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(t))}ze(t,n,r){if(!this.Je(t))return;const o=this.He(t);this.ut(t,n)?o.xe(n,1):o.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(t)),this.Ke=this.Ke.insert(n,this.ct(n).add(t)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(t){this.qe.delete(t)}et(t){const n=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let n=this.qe.get(t);return n||(n=new Mv,this.qe.set(t,n)),n}ct(t){let n=this.Ke.get(t);return n||(n=new Ce(xt),this.Ke=this.Ke.insert(t,n)),n}_t(t){let n=this.$e.get(t);return n||(n=new Ce(xt),this.$e=this.$e.insert(t,n)),n}Je(t){const n=this.Xe(t)!==null;return n||rt("WatchChangeAggregator","Detected inactive target",t),n}Xe(t){const n=this.qe.get(t);return n&&n.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new Mv),this.ke.getRemoteKeysForTarget(t).forEach(n=>{this.ze(t,n,null)})}ut(t,n){return this.ke.getRemoteKeysForTarget(t).has(n)}}function Vc(){return new ie(dt.comparator)}function Vv(){return new ie(dt.comparator)}const UC={asc:"ASCENDING",desc:"DESCENDING"},LC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jC={and:"AND",or:"OR"};class zC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function lm(s,t){return s.useProto3Json||ph(t)?t:{value:t}}function sh(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function r0(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function BC(s,t){return sh(s,t.toTimestamp())}function pi(s){return Gt(!!s),Et.fromTimestamp(function(n){const r=Zs(n);return new Ie(r.seconds,r.nanos)}(s))}function qm(s,t){return um(s,t).canonicalString()}function um(s,t){const n=function(o){return new Jt(["projects",o.projectId,"databases",o.database])}(s).child("documents");return t===void 0?n:n.child(t)}function a0(s){const t=Jt.fromString(s);return Gt(h0(t)),t}function cm(s,t){return qm(s.databaseId,t.path)}function qd(s,t){const n=a0(t);if(n.get(1)!==s.databaseId.projectId)throw new at($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new at($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new dt(l0(n))}function o0(s,t){return qm(s.databaseId,t)}function qC(s){const t=a0(s);return t.length===4?Jt.emptyPath():l0(t)}function hm(s){return new Jt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function l0(s){return Gt(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function xv(s,t,n){return{name:cm(s,t),fields:n.value.mapValue.fields}}function HC(s,t){let n;if("targetChange"in t){t.targetChange;const r=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:yt()}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=function(_,E){return _.useProto3Json?(Gt(E===void 0||typeof E=="string"),Fe.fromBase64String(E||"")):(Gt(E===void 0||E instanceof Buffer||E instanceof Uint8Array),Fe.fromUint8Array(E||new Uint8Array))}(s,t.targetChange.resumeToken),f=t.targetChange.cause,m=f&&function(_){const E=_.code===void 0?$.UNKNOWN:n0(_.code);return new at(E,_.message||"")}(f);n=new s0(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=qd(s,r.document.name),u=pi(r.document.updateTime),f=r.document.createTime?pi(r.document.createTime):Et.min(),m=new Un({mapValue:{fields:r.document.fields}}),g=Xe.newFoundDocument(o,u,f,m),_=r.targetIds||[],E=r.removedTargetIds||[];n=new Hc(_,E,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=qd(s,r.document),u=r.readTime?pi(r.readTime):Et.min(),f=Xe.newNoDocument(o,u),m=r.removedTargetIds||[];n=new Hc([],m,f.key,f)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=qd(s,r.document),u=r.removedTargetIds||[];n=new Hc([],u,o,null)}else{if(!("filter"in t))return yt();{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new MC(o,u),m=r.targetId;n=new i0(m,f)}}return n}function FC(s,t){let n;if(t instanceof nu)n={update:xv(s,t.key,t.value)};else if(t instanceof jm)n={delete:cm(s,t.key)};else if(t instanceof Xr)n={update:xv(s,t.key,t.data),updateMask:JC(t.fieldMask)};else{if(!(t instanceof NC))return yt();n={verify:cm(s,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(u,f){const m=f.transform;if(m instanceof ql)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Hl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Fl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Gl)return{fieldPath:f.field.canonicalString(),increment:m.Ie};throw yt()}(0,r))),t.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:BC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:yt()}(s,t.precondition)),n}function GC(s,t){return s&&s.length>0?(Gt(t!==void 0),s.map(n=>function(o,u){let f=o.updateTime?pi(o.updateTime):pi(u);return f.isEqual(Et.min())&&(f=pi(u)),new RC(f,o.transformResults||[])}(n,t))):[]}function KC(s,t){return{documents:[o0(s,t.path)]}}function QC(s,t){const n={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=o0(s,o);const u=function(_){if(_.length!==0)return c0($n.create(_,"and"))}(t.filters);u&&(n.structuredQuery.where=u);const f=function(_){if(_.length!==0)return _.map(E=>function(C){return{field:Ka(C.field),direction:XC(C.dir)}}(E))}(t.orderBy);f&&(n.structuredQuery.orderBy=f);const m=lm(s,t.limit);return m!==null&&(n.structuredQuery.limit=m),t.startAt&&(n.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(t.endAt)),{ht:n,parent:o}}function YC(s){let t=qC(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Gt(r===1);const E=n.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let u=[];n.where&&(u=function(S){const C=u0(S);return C instanceof $n&&UT(C)?C.getFilters():[C]}(n.where));let f=[];n.orderBy&&(f=function(S){return S.map(C=>function(q){return new ih(Qa(q.field),function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(q.direction))}(C))}(n.orderBy));let m=null;n.limit&&(m=function(S){let C;return C=typeof S=="object"?S.value:S,ph(C)?null:C}(n.limit));let g=null;n.startAt&&(g=function(S){const C=!!S.before,V=S.values||[];return new nh(V,C)}(n.startAt));let _=null;return n.endAt&&(_=function(S){const C=!S.before,V=S.values||[];return new nh(V,C)}(n.endAt)),mC(t,o,f,u,m,"F",g,_)}function $C(s,t){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function u0(s){return s.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qa(n.unaryFilter.field);return ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Qa(n.unaryFilter.field);return ve.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Qa(n.unaryFilter.field);return ve.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Qa(n.unaryFilter.field);return ve.create(f,"!=",{nullValue:"NULL_VALUE"});default:return yt()}}(s):s.fieldFilter!==void 0?function(n){return ve.create(Qa(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yt()}}(n.fieldFilter.op),n.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(n){return $n.create(n.compositeFilter.filters.map(r=>u0(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return yt()}}(n.compositeFilter.op))}(s):yt()}function XC(s){return UC[s]}function WC(s){return LC[s]}function ZC(s){return jC[s]}function Ka(s){return{fieldPath:s.canonicalString()}}function Qa(s){return qe.fromServerFormat(s.fieldPath)}function c0(s){return s instanceof ve?function(n){if(n.op==="=="){if(Tv(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NAN"}};if(Ev(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tv(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NOT_NAN"}};if(Ev(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(n.field),op:WC(n.op),value:n.value}}}(s):s instanceof $n?function(n){const r=n.getFilters().map(o=>c0(o));return r.length===1?r[0]:{compositeFilter:{op:ZC(n.op),filters:r}}}(s):yt()}function JC(s){const t=[];return s.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function h0(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t,n,r,o,u=Et.min(),f=Et.min(),m=Fe.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new Fs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(t){this.Tt=t}}function e1(s){const t=YC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?om(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(){this.Tn=new i1}addToCollectionParentIndex(t,n){return this.Tn.add(n),Y.resolve()}getCollectionParents(t,n){return Y.resolve(this.Tn.getEntries(n))}addFieldIndex(t,n){return Y.resolve()}deleteFieldIndex(t,n){return Y.resolve()}deleteAllFieldIndexes(t){return Y.resolve()}createTargetIndexes(t,n){return Y.resolve()}getDocumentsMatchingTarget(t,n){return Y.resolve(null)}getIndexType(t,n){return Y.resolve(0)}getFieldIndexes(t,n){return Y.resolve([])}getNextCollectionGroupToUpdate(t){return Y.resolve(null)}getMinOffset(t,n){return Y.resolve(Ws.min())}getMinOffsetFromCollectionGroup(t,n){return Y.resolve(Ws.min())}updateCollectionGroup(t,n,r){return Y.resolve()}updateIndexEntries(t,n){return Y.resolve()}}class i1{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),o=this.index[n]||new Ce(Jt.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(t){const n=t.lastSegment(),r=t.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(t){return(this.index[t]||new Ce(Jt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},f0=41943040;class cn{static withCacheSize(t){return new cn(t,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(f0,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new ro(0)}static Un(){return new ro(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="LruGarbageCollector",s1=1048576;function Uv([s,t],[n,r]){const o=xt(s,n);return o===0?xt(t,r):o}class r1{constructor(t){this.Hn=t,this.buffer=new Ce(Uv),this.Jn=0}Yn(){return++this.Jn}Zn(t){const n=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Uv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class a1{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){rt(Pv,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){fo(n)?rt(Pv,"Ignoring IndexedDB error during garbage collection: ",n):await ho(n)}await this.er(3e5)})}}class o1{constructor(t,n){this.tr=t,this.params=n}calculateTargetCount(t,n){return this.tr.nr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return Y.resolve(mh.ae);const r=new r1(n);return this.tr.forEachTarget(t,o=>r.Zn(o.sequenceNumber)).next(()=>this.tr.rr(t,o=>r.Zn(o))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.tr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.tr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(kv)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kv):this.ir(t,n))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,n){let r,o,u,f,m,g,_;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,f=Date.now(),this.nthSequenceNumber(t,o))).next(S=>(r=S,m=Date.now(),this.removeTargets(t,r,n))).next(S=>(u=S,g=Date.now(),this.removeOrphanedDocuments(t,r))).next(S=>(_=Date.now(),Fa()<=Ot.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${S} documents in `+(_-g)+`ms
Total Duration: ${_-E}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S})))}}function l1(s,t){return new o1(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(){this.changes=new $r(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Xe.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Y.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(t,n,r,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(t,n))).next(o=>(r!==null&&xl(r.mutation,o,Kn.empty(),Ie.now()),o))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Mt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Mt()){const o=zr();return this.populateOverlays(t,o,n).next(()=>this.computeViews(t,n,o,r).next(u=>{let f=Il();return u.forEach((m,g)=>{f=f.insert(m,g.overlayedDocument)}),f}))}getOverlayedDocuments(t,n){const r=zr();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Mt()))}populateOverlays(t,n,r){const o=[];return r.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(t,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(t,n,r,o){let u=Ji();const f=Vl(),m=function(){return Vl()}();return n.forEach((g,_)=>{const E=r.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof Xr)?u=u.insert(_.key,_):E!==void 0?(f.set(_.key,E.mutation.getFieldMask()),xl(E.mutation,_,E.mutation.getFieldMask(),Ie.now())):f.set(_.key,Kn.empty())}),this.recalculateAndSaveOverlays(t,u).next(g=>(g.forEach((_,E)=>f.set(_,E)),n.forEach((_,E)=>{var S;return m.set(_,new c1(E,(S=f.get(_))!==null&&S!==void 0?S:null))}),m))}recalculateAndSaveOverlays(t,n){const r=Vl();let o=new ie((f,m)=>f-m),u=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(f=>{for(const m of f)m.keys().forEach(g=>{const _=n.get(g);if(_===null)return;let E=r.get(g)||Kn.empty();E=m.applyToLocalView(_,E),r.set(g,E);const S=(o.get(m.batchId)||Mt()).add(g);o=o.insert(m.batchId,S)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,E=g.value,S=KT();E.forEach(C=>{if(!u.has(C)){const V=t0(n.get(C),r.get(C));V!==null&&S.set(C,V),u=u.add(C)}}),f.push(this.documentOverlayCache.saveOverlays(t,_,S))}return Y.waitFor(f)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,o){return function(f){return dt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):BT(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,o):this.getDocumentsMatchingCollectionQuery(t,n,r,o)}getNextDocuments(t,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,o-u.size):Y.resolve(zr());let m=Ll,g=u;return f.next(_=>Y.forEach(_,(E,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),u.get(E)?Y.resolve():this.remoteDocumentCache.getEntry(t,E).next(C=>{g=g.insert(E,C)}))).next(()=>this.populateOverlays(t,_,u)).next(()=>this.computeViews(t,g,_,Mt())).next(E=>({batchId:m,changes:GT(E)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new dt(n)).next(r=>{let o=Il();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(t,n,r,o){const u=n.collectionGroup;let f=Il();return this.indexManager.getCollectionParents(t,u).next(m=>Y.forEach(m,g=>{const _=function(S,C){return new eu(C,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,_,r,o).next(E=>{E.forEach((S,C)=>{f=f.insert(S,C)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(t,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,u,o))).next(f=>{u.forEach((g,_)=>{const E=_.getKey();f.get(E)===null&&(f=f.insert(E,Xe.newInvalidDocument(E)))});let m=Il();return f.forEach((g,_)=>{const E=u.get(g);E!==void 0&&xl(E.mutation,_,Kn.empty(),Ie.now()),vh(n,_)&&(m=m.insert(g,_))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,n){return Y.resolve(this.dr.get(n))}saveBundleMetadata(t,n){return this.dr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:pi(o.createTime)}}(n)),Y.resolve()}getNamedQuery(t,n){return Y.resolve(this.Ar.get(n))}saveNamedQuery(t,n){return this.Ar.set(n.name,function(o){return{name:o.name,query:e1(o.bundledQuery),readTime:pi(o.readTime)}}(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(){this.overlays=new ie(dt.comparator),this.Rr=new Map}getOverlay(t,n){return Y.resolve(this.overlays.get(n))}getOverlays(t,n){const r=zr();return Y.forEach(n,o=>this.getOverlay(t,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((o,u)=>{this.Et(t,n,u)}),Y.resolve()}removeOverlaysForBatchId(t,n,r){const o=this.Rr.get(r);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(r)),Y.resolve()}getOverlaysForCollection(t,n,r){const o=zr(),u=n.length+1,f=new dt(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return Y.resolve(o)}getOverlaysForCollectionGroup(t,n,r,o){let u=new ie((_,E)=>_-E);const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>r){let E=u.get(_.largestBatchId);E===null&&(E=zr(),u=u.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const m=zr(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((_,E)=>m.set(_,E)),!(m.size()>=o)););return Y.resolve(m)}Et(t,n,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.Rr.get(o.largestBatchId).delete(r.key);this.Rr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new OC(n,r));let u=this.Rr.get(n);u===void 0&&(u=Mt(),this.Rr.set(n,u)),this.Rr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(){this.sessionToken=Fe.EMPTY_BYTE_STRING}getSessionToken(t){return Y.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(){this.Vr=new Ce(Pe.mr),this.gr=new Ce(Pe.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,n){const r=new Pe(t,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.wr(new Pe(t,n))}br(t,n){t.forEach(r=>this.removeReference(r,n))}Sr(t){const n=new dt(new Jt([])),r=new Pe(n,t),o=new Pe(n,t+1),u=[];return this.gr.forEachInRange([r,o],f=>{this.wr(f),u.push(f.key)}),u}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const n=new dt(new Jt([])),r=new Pe(n,t),o=new Pe(n,t+1);let u=Mt();return this.gr.forEachInRange([r,o],f=>{u=u.add(f.key)}),u}containsKey(t){const n=new Pe(t,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Pe{constructor(t,n){this.key=t,this.Cr=n}static mr(t,n){return dt.comparator(t.key,n.key)||xt(t.Cr,n.Cr)}static pr(t,n){return xt(t.Cr,n.Cr)||dt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Ce(Pe.mr)}checkEmpty(t){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new DC(u,n,r,o);this.mutationQueue.push(f);for(const m of o)this.Mr=this.Mr.add(new Pe(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return Y.resolve(f)}lookupMutationBatch(t,n){return Y.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,o=this.Nr(r),u=o<0?0:o;return Y.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?Vm:this.Fr-1)}getAllMutationBatches(t){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Pe(n,0),o=new Pe(n,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([r,o],f=>{const m=this.Or(f.Cr);u.push(m)}),Y.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ce(xt);return n.forEach(o=>{const u=new Pe(o,0),f=new Pe(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,f],m=>{r=r.add(m.Cr)})}),Y.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,o=r.length+1;let u=r;dt.isDocumentKey(u)||(u=u.child(""));const f=new Pe(new dt(u),0);let m=new Ce(xt);return this.Mr.forEachWhile(g=>{const _=g.key.path;return!!r.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Cr)),!0)},f),Y.resolve(this.Br(m))}Br(t){const n=[];return t.forEach(r=>{const o=this.Or(r);o!==null&&n.push(o)}),n}removeMutationBatch(t,n){Gt(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return Y.forEach(n.mutations,o=>{const u=new Pe(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.Mr=r})}qn(t){}containsKey(t,n){const r=new Pe(n,0),o=this.Mr.firstAfterOrEqual(r);return Y.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,Y.resolve()}Lr(t,n){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const n=this.Nr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(t){this.kr=t,this.docs=function(){return new ie(dt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,f=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Y.resolve(r?r.document.mutableCopy():Xe.newInvalidDocument(n))}getEntries(t,n){let r=Ji();return n.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Xe.newInvalidDocument(o))}),Y.resolve(r)}getDocumentsMatchingQuery(t,n,r,o){let u=Ji();const f=n.path,m=new dt(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:E}}=g.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||KI(GI(E),r)<=0||(o.has(E.key)||vh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return Y.resolve(u)}getAllFromCollectionGroup(t,n,r,o){yt()}qr(t,n){return Y.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new _1(this)}getSize(t){return Y.resolve(this.size)}}class _1 extends u1{constructor(t){super(),this.Ir=t}applyChanges(t){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.Ir.addEntry(t,o)):this.Ir.removeEntry(r)}),Y.waitFor(n)}getFromCache(t,n){return this.Ir.getEntry(t,n)}getAllFromCache(t,n){return this.Ir.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(t){this.persistence=t,this.Qr=new $r(n=>Pm(n),Um),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Hm,this.targetCount=0,this.Ur=ro.Kn()}forEachTarget(t,n){return this.Qr.forEach((r,o)=>n(o)),Y.resolve()}getLastRemoteSnapshotVersion(t){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Y.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),Y.resolve()}zn(t){this.Qr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Ur=new ro(n),this.highestTargetId=n),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,n){return this.zn(n),this.targetCount+=1,Y.resolve()}updateTargetData(t,n){return this.zn(n),Y.resolve()}removeTargetData(t,n){return this.Qr.delete(n.target),this.Kr.Sr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(t,n,r){let o=0;const u=[];return this.Qr.forEach((f,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.Qr.delete(f),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)}),Y.waitFor(u).next(()=>o)}getTargetCount(t){return Y.resolve(this.targetCount)}getTargetData(t,n){const r=this.Qr.get(n)||null;return Y.resolve(r)}addMatchingKeys(t,n,r){return this.Kr.yr(n,r),Y.resolve()}removeMatchingKeys(t,n,r){this.Kr.br(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(t,f))}),Y.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this.Kr.Sr(n),Y.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Kr.vr(n);return Y.resolve(r)}containsKey(t,n){return Y.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(t,n){this.Wr={},this.overlays={},this.Gr=new mh(0),this.zr=!1,this.zr=!0,this.jr=new m1,this.referenceDelegate=t(this),this.Hr=new y1(this),this.indexManager=new n1,this.remoteDocumentCache=function(o){return new g1(o)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new t1(n),this.Yr=new f1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new d1,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Wr[t.toKey()];return r||(r=new p1(n,this.referenceDelegate),this.Wr[t.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,n,r){rt("MemoryPersistence","Starting transaction:",t);const o=new v1(this.Gr.next());return this.referenceDelegate.Zr(),r(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(t,n){return Y.or(Object.values(this.Wr).map(r=>()=>r.containsKey(t,n)))}}class v1 extends YI{constructor(t){super(),this.currentSequenceNumber=t}}class Fm{constructor(t){this.persistence=t,this.ti=new Hm,this.ni=null}static ri(t){return new Fm(t)}get ii(){if(this.ni)return this.ni;throw yt()}addReference(t,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),Y.resolve()}removeReference(t,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),Y.resolve()}markPotentiallyOrphaned(t,n){return this.ii.add(n.toString()),Y.resolve()}removeTarget(t,n){this.ti.Sr(n.targetId).forEach(o=>this.ii.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>r.removeTargetData(t,n))}Zr(){this.ni=new Set}Xr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.ii,r=>{const o=dt.fromPath(r);return this.si(t,o).next(u=>{u||n.removeEntry(o,Et.min())})}).next(()=>(this.ni=null,n.apply(t)))}updateLimboDocument(t,n){return this.si(t,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(t){return 0}si(t,n){return Y.or([()=>Y.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.ei(t,n)])}}class rh{constructor(t,n){this.persistence=t,this.oi=new $r(r=>WI(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=l1(this,n)}static ri(t,n){return new rh(t,n)}Zr(){}Xr(t){return Y.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}nr(t){const n=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(o=>r+o))}sr(t){let n=0;return this.rr(t,r=>{n++}).next(()=>n)}rr(t,n){return Y.forEach(this.oi,(r,o)=>this.ar(t,r,o).next(u=>u?Y.resolve():n(o)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(t,f=>this.ar(t,f,n).next(m=>{m||(r++,u.removeEntry(f,Et.min()))})).next(()=>u.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.oi.set(n,t.currentSequenceNumber),Y.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.oi.set(r,t.currentSequenceNumber),Y.resolve()}removeReference(t,n,r){return this.oi.set(r,t.currentSequenceNumber),Y.resolve()}updateLimboDocument(t,n){return this.oi.set(n,t.currentSequenceNumber),Y.resolve()}Jr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=zc(t.data.value)),n}ar(t,n,r){return Y.or([()=>this.persistence.ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const o=this.oi.get(n);return Y.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(t,n,r,o){this.targetId=t,this.fromCache=n,this.Hi=r,this.Ji=o}static Yi(t,n){let r=Mt(),o=Mt();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Gm(t,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return ew()?8:$I(We())>0?6:4}()}initialize(t,n){this.ns=t,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(t,n,r,o){const u={result:null};return this.rs(t,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.ss(t,n,o,r).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new E1;return this._s(t,n,f).next(m=>{if(u.result=m,this.Xi)return this.us(t,n,f,m.size)})}).next(()=>u.result)}us(t,n,r,o){return r.documentReadCount<this.es?(Fa()<=Ot.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",Ga(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Y.resolve()):(Fa()<=Ot.DEBUG&&rt("QueryEngine","Query:",Ga(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ts*o?(Fa()<=Ot.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",Ga(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,mi(n))):Y.resolve())}rs(t,n){if(bv(n))return Y.resolve(null);let r=mi(n);return this.indexManager.getIndexType(t,r).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=om(n,null,"F"),r=mi(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(u=>{const f=Mt(...u);return this.ns.getDocuments(t,f).next(m=>this.indexManager.getMinOffset(t,r).next(g=>{const _=this.cs(n,m);return this.ls(n,_,f,g.readTime)?this.rs(t,om(n,null,"F")):this.hs(t,_,n,g)}))})))}ss(t,n,r,o){return bv(n)||o.isEqual(Et.min())?Y.resolve(null):this.ns.getDocuments(t,r).next(u=>{const f=this.cs(n,u);return this.ls(n,f,r,o)?Y.resolve(null):(Fa()<=Ot.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ga(n)),this.hs(t,f,n,FI(o,Ll)).next(m=>m))})}cs(t,n){let r=new Ce(HT(t));return n.forEach((o,u)=>{vh(t,u)&&(r=r.add(u))}),r}ls(t,n,r,o){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(t,n,r){return Fa()<=Ot.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",Ga(n)),this.ns.getDocumentsMatchingQuery(t,n,Ws.min(),r)}hs(t,n,r,o){return this.ns.getDocumentsMatchingQuery(t,r,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="LocalStore",A1=3e8;class S1{constructor(t,n,r,o){this.persistence=t,this.Ps=n,this.serializer=o,this.Ts=new ie(xt),this.Is=new $r(u=>Pm(u),Um),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(r)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new h1(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ts))}}function w1(s,t,n,r){return new S1(s,t,n,r)}async function m0(s,t){const n=St(s);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,n.As(t),n.mutationQueue.getAllMutationBatches(r))).next(u=>{const f=[],m=[];let g=Mt();for(const _ of o){f.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}for(const _ of u){m.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}return n.localDocuments.getDocuments(r,g).next(_=>({Rs:_,removedBatchIds:f,addedBatchIds:m}))})})}function b1(s,t){const n=St(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=t.batch.keys(),u=n.ds.newChangeBuffer({trackRemovals:!0});return function(m,g,_,E){const S=_.batch,C=S.keys();let V=Y.resolve();return C.forEach(q=>{V=V.next(()=>E.getEntry(g,q)).next(Q=>{const X=_.docVersions.get(q);Gt(X!==null),Q.version.compareTo(X)<0&&(S.applyToRemoteDocument(Q,_),Q.isValidDocument()&&(Q.setReadTime(_.commitVersion),E.addEntry(Q)))})}),V.next(()=>m.mutationQueue.removeMutationBatch(g,S))}(n,r,t,u).next(()=>u.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let g=Mt();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g}(t))).next(()=>n.localDocuments.getDocuments(r,o))})}function p0(s){const t=St(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Hr.getLastRemoteSnapshotVersion(n))}function R1(s,t){const n=St(s),r=t.snapshotVersion;let o=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.ds.newChangeBuffer({trackRemovals:!0});o=n.Ts;const m=[];t.targetChanges.forEach((E,S)=>{const C=o.get(S);if(!C)return;m.push(n.Hr.removeMatchingKeys(u,E.removedDocuments,S).next(()=>n.Hr.addMatchingKeys(u,E.addedDocuments,S)));let V=C.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(S)!==null?V=V.withResumeToken(Fe.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):E.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(E.resumeToken,r)),o=o.insert(S,V),function(Q,X,ct){return Q.resumeToken.approximateByteSize()===0||X.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=A1?!0:ct.addedDocuments.size+ct.modifiedDocuments.size+ct.removedDocuments.size>0}(C,V,E)&&m.push(n.Hr.updateTargetData(u,V))});let g=Ji(),_=Mt();if(t.documentUpdates.forEach(E=>{t.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(I1(u,f,t.documentUpdates).next(E=>{g=E.Vs,_=E.fs})),!r.isEqual(Et.min())){const E=n.Hr.getLastRemoteSnapshotVersion(u).next(S=>n.Hr.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(E)}return Y.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,g,_)).next(()=>g)}).then(u=>(n.Ts=o,u))}function I1(s,t,n){let r=Mt(),o=Mt();return n.forEach(u=>r=r.add(u)),t.getEntries(s,r).next(u=>{let f=Ji();return n.forEach((m,g)=>{const _=u.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Et.min())?(t.removeEntry(m,g.readTime),f=f.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(g),f=f.insert(m,g)):rt(Km,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)}),{Vs:f,fs:o}})}function C1(s,t){const n=St(s);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=Vm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function N1(s,t){const n=St(s);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.Hr.getTargetData(r,t).next(u=>u?(o=u,Y.resolve(o)):n.Hr.allocateTargetId(r).next(f=>(o=new Fs(t,f,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.Ts.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(t,r.targetId)),r})}async function fm(s,t,n){const r=St(s),o=r.Ts.get(t),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,f=>r.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!fo(f))throw f;rt(Km,`Failed to update sequence numbers for target ${t}: ${f}`)}r.Ts=r.Ts.remove(t),r.Is.delete(o.target)}function Lv(s,t,n){const r=St(s);let o=Et.min(),u=Mt();return r.persistence.runTransaction("Execute query","readwrite",f=>function(g,_,E){const S=St(g),C=S.Is.get(E);return C!==void 0?Y.resolve(S.Ts.get(C)):S.Hr.getTargetData(_,E)}(r,f,mi(t)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(f,m.targetId).next(g=>{u=g})}).next(()=>r.Ps.getDocumentsMatchingQuery(f,t,n?o:Et.min(),n?u:Mt())).next(m=>(D1(r,gC(t),m),{documents:m,gs:u})))}function D1(s,t,n){let r=s.Es.get(t)||Et.min();n.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),s.Es.set(t,r)}class jv{constructor(){this.activeTargetIds=AC()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ss(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class O1{constructor(){this.ho=new jv,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,n,r){this.Po[t]=n}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new jv,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="ConnectivityMonitor";class Bv{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){rt(zv,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){rt(zv,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xc=null;function dm(){return xc===null?xc=function(){return 268435456+Math.round(2147483648*Math.random())}():xc++,"0x"+xc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="RestConnection",V1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class x1{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo=`projects/${r}/databases/${o}`,this.wo=this.databaseId.database===th?`project_id=${r}`:`project_id=${r}&database_id=${o}`}bo(t,n,r,o,u){const f=dm(),m=this.So(t,n.toUriEncodedString());rt(Hd,`Sending RPC '${t}' ${f}:`,m,r);const g={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(g,o,u),this.vo(t,m,g,r).then(_=>(rt(Hd,`Received RPC '${t}' ${f}: `,_),_),_=>{throw eo(Hd,`RPC '${t}' ${f} failed with error: `,_,"url: ",m,"request:",r),_})}Co(t,n,r,o,u,f){return this.bo(t,n,r,o,u)}Do(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+co}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>t[u]=o),r&&r.headers.forEach((o,u)=>t[u]=o)}So(t,n){const r=V1[t];return`${this.po}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye="WebChannelConnection";class P1 extends x1{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,r,o){const u=dm();return new Promise((f,m)=>{const g=new yT;g.setWithCredentials(!0),g.listenOnce(vT.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case jc.NO_ERROR:const E=g.getResponseJson();rt(Ye,`XHR for RPC '${t}' ${u} received:`,JSON.stringify(E)),f(E);break;case jc.TIMEOUT:rt(Ye,`RPC '${t}' ${u} timed out`),m(new at($.DEADLINE_EXCEEDED,"Request time out"));break;case jc.HTTP_ERROR:const S=g.getStatus();if(rt(Ye,`RPC '${t}' ${u} failed with status:`,S,"response text:",g.getResponseText()),S>0){let C=g.getResponseJson();Array.isArray(C)&&(C=C[0]);const V=C==null?void 0:C.error;if(V&&V.status&&V.message){const q=function(X){const ct=X.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(ct)>=0?ct:$.UNKNOWN}(V.status);m(new at(q,V.message))}else m(new at($.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new at($.UNAVAILABLE,"Connection failed."));break;default:yt()}}finally{rt(Ye,`RPC '${t}' ${u} completed.`)}});const _=JSON.stringify(o);rt(Ye,`RPC '${t}' ${u} sending request:`,o),g.send(n,"POST",_,r,15)})}Wo(t,n,r){const o=dm(),u=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=AT(),m=TT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Do(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const E=u.join("");rt(Ye,`Creating RPC '${t}' stream ${o}: ${E}`,g);const S=f.createWebChannel(E,g);let C=!1,V=!1;const q=new k1({Fo:X=>{V?rt(Ye,`Not sending because RPC '${t}' stream ${o} is closed:`,X):(C||(rt(Ye,`Opening RPC '${t}' stream ${o} transport.`),S.open(),C=!0),rt(Ye,`RPC '${t}' stream ${o} sending:`,X),S.send(X))},Mo:()=>S.close()}),Q=(X,ct,et)=>{X.listen(ct,nt=>{try{et(nt)}catch(Tt){setTimeout(()=>{throw Tt},0)}})};return Q(S,Rl.EventType.OPEN,()=>{V||(rt(Ye,`RPC '${t}' stream ${o} transport opened.`),q.Qo())}),Q(S,Rl.EventType.CLOSE,()=>{V||(V=!0,rt(Ye,`RPC '${t}' stream ${o} transport closed`),q.Ko())}),Q(S,Rl.EventType.ERROR,X=>{V||(V=!0,eo(Ye,`RPC '${t}' stream ${o} transport errored:`,X),q.Ko(new at($.UNAVAILABLE,"The operation could not be completed")))}),Q(S,Rl.EventType.MESSAGE,X=>{var ct;if(!V){const et=X.data[0];Gt(!!et);const nt=et,Tt=(nt==null?void 0:nt.error)||((ct=nt[0])===null||ct===void 0?void 0:ct.error);if(Tt){rt(Ye,`RPC '${t}' stream ${o} received error:`,Tt);const vt=Tt.status;let Dt=function(w){const D=ye[w];if(D!==void 0)return n0(D)}(vt),P=Tt.message;Dt===void 0&&(Dt=$.INTERNAL,P="Unknown error status: "+vt+" with message "+Tt.message),V=!0,q.Ko(new at(Dt,P)),S.close()}else rt(Ye,`RPC '${t}' stream ${o} received:`,et),q.Uo(et)}}),Q(m,ET.STAT_EVENT,X=>{X.stat===em.PROXY?rt(Ye,`RPC '${t}' stream ${o} detected buffering proxy`):X.stat===em.NOPROXY&&rt(Ye,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{q.$o()},0),q}}function Fd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(s){return new zC(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(t,n,r=1e3,o=1.5,u=6e4){this.Ti=t,this.timerId=n,this.Go=r,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),o=Math.max(0,n-r);o>0&&rt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="PersistentStream";class _0{constructor(t,n,r,o,u,f,m,g){this.Ti=t,this.n_=r,this.r_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new g0(t,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Zi(n.toString()),Zi("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.i_===n&&this.V_(r,o)},r=>{t(()=>{const o=new at($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(o)})})}V_(t,n){const r=this.R_(this.i_);this.stream=this.f_(t,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{r(()=>this.m_(o))}),this.stream.onMessage(o=>{r(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return rt(qv,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return n=>{this.Ti.enqueueAndForget(()=>this.i_===t?n():(rt(qv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class U1 extends _0{constructor(t,n,r,o,u,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}f_(t,n){return this.connection.Wo("Listen",t,n)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const n=HC(this.serializer,t),r=function(u){if(!("targetChange"in u))return Et.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Et.min():f.readTime?pi(f.readTime):Et.min()}(t);return this.listener.p_(n,r)}y_(t){const n={};n.database=hm(this.serializer),n.addTarget=function(u,f){let m;const g=f.target;if(m=rm(g)?{documents:KC(u,g)}:{query:QC(u,g).ht},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=r0(u,f.resumeToken);const _=lm(u,f.expectedCount);_!==null&&(m.expectedCount=_)}else if(f.snapshotVersion.compareTo(Et.min())>0){m.readTime=sh(u,f.snapshotVersion.toTimestamp());const _=lm(u,f.expectedCount);_!==null&&(m.expectedCount=_)}return m}(this.serializer,t);const r=$C(this.serializer,t);r&&(n.labels=r),this.I_(n)}w_(t){const n={};n.database=hm(this.serializer),n.removeTarget=t,this.I_(n)}}class L1 extends _0{constructor(t,n,r,o,u,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(t,n){return this.connection.Wo("Write",t,n)}g_(t){return Gt(!!t.streamToken),this.lastStreamToken=t.streamToken,Gt(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){Gt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const n=GC(t.writeResults,t.commitTime),r=pi(t.commitTime);return this.listener.v_(r,n)}C_(){const t={};t.database=hm(this.serializer),this.I_(t)}S_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>FC(this.serializer,r))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{}class z1 extends j1{constructor(t,n,r,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new at($.FAILED_PRECONDITION,"The client has already been terminated.")}bo(t,n,r,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.bo(t,um(n,r),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new at($.UNKNOWN,u.toString())})}Co(t,n,r,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Co(t,um(n,r),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new at($.UNKNOWN,f.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class B1{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Zi(n),this.N_=!1):rt("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="RemoteStore";class q1{constructor(t,n,r,o,u){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(f=>{r.enqueueAndForget(async()=>{Wr(this)&&(rt(Kr,"Restarting streams for network reachability change."),await async function(g){const _=St(g);_.W_.add(4),await su(_),_.j_.set("Unknown"),_.W_.delete(4),await wh(_)}(this))})}),this.j_=new B1(r,o)}}async function wh(s){if(Wr(s))for(const t of s.G_)await t(!0)}async function su(s){for(const t of s.G_)await t(!1)}function y0(s,t){const n=St(s);n.U_.has(t.targetId)||(n.U_.set(t.targetId,t),Xm(n)?$m(n):mo(n).c_()&&Ym(n,t))}function Qm(s,t){const n=St(s),r=mo(n);n.U_.delete(t),r.c_()&&v0(n,t),n.U_.size===0&&(r.c_()?r.P_():Wr(n)&&n.j_.set("Unknown"))}function Ym(s,t){if(s.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Et.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}mo(s).y_(t)}function v0(s,t){s.H_.Ne(t),mo(s).w_(t)}function $m(s){s.H_=new PC({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>s.U_.get(t)||null,it:()=>s.datastore.serializer.databaseId}),mo(s).start(),s.j_.B_()}function Xm(s){return Wr(s)&&!mo(s).u_()&&s.U_.size>0}function Wr(s){return St(s).W_.size===0}function E0(s){s.H_=void 0}async function H1(s){s.j_.set("Online")}async function F1(s){s.U_.forEach((t,n)=>{Ym(s,t)})}async function G1(s,t){E0(s),Xm(s)?(s.j_.q_(t),$m(s)):s.j_.set("Unknown")}async function K1(s,t,n){if(s.j_.set("Online"),t instanceof s0&&t.state===2&&t.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.U_.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.U_.delete(m),o.H_.removeTarget(m))}(s,t)}catch(r){rt(Kr,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await ah(s,r)}else if(t instanceof Hc?s.H_.We(t):t instanceof i0?s.H_.Ze(t):s.H_.je(t),!n.isEqual(Et.min()))try{const r=await p0(s.localStore);n.compareTo(r)>=0&&await function(u,f){const m=u.H_.ot(f);return m.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.U_.get(_);E&&u.U_.set(_,E.withResumeToken(g.resumeToken,f))}}),m.targetMismatches.forEach((g,_)=>{const E=u.U_.get(g);if(!E)return;u.U_.set(g,E.withResumeToken(Fe.EMPTY_BYTE_STRING,E.snapshotVersion)),v0(u,g);const S=new Fs(E.target,g,_,E.sequenceNumber);Ym(u,S)}),u.remoteSyncer.applyRemoteEvent(m)}(s,n)}catch(r){rt(Kr,"Failed to raise snapshot:",r),await ah(s,r)}}async function ah(s,t,n){if(!fo(t))throw t;s.W_.add(1),await su(s),s.j_.set("Offline"),n||(n=()=>p0(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{rt(Kr,"Retrying IndexedDB access"),await n(),s.W_.delete(1),await wh(s)})}function T0(s,t){return t().catch(n=>ah(s,n,t))}async function bh(s){const t=St(s),n=er(t);let r=t.K_.length>0?t.K_[t.K_.length-1].batchId:Vm;for(;Q1(t);)try{const o=await C1(t.localStore,r);if(o===null){t.K_.length===0&&n.P_();break}r=o.batchId,Y1(t,o)}catch(o){await ah(t,o)}A0(t)&&S0(t)}function Q1(s){return Wr(s)&&s.K_.length<10}function Y1(s,t){s.K_.push(t);const n=er(s);n.c_()&&n.b_&&n.S_(t.mutations)}function A0(s){return Wr(s)&&!er(s).u_()&&s.K_.length>0}function S0(s){er(s).start()}async function $1(s){er(s).C_()}async function X1(s){const t=er(s);for(const n of s.K_)t.S_(n.mutations)}async function W1(s,t,n){const r=s.K_.shift(),o=zm.from(r,t,n);await T0(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await bh(s)}async function Z1(s,t){t&&er(s).b_&&await async function(r,o){if(function(f){return VC(f)&&f!==$.ABORTED}(o.code)){const u=r.K_.shift();er(r).h_(),await T0(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o)),await bh(r)}}(s,t),A0(s)&&S0(s)}async function Hv(s,t){const n=St(s);n.asyncQueue.verifyOperationInProgress(),rt(Kr,"RemoteStore received new credentials");const r=Wr(n);n.W_.add(3),await su(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await wh(n)}async function J1(s,t){const n=St(s);t?(n.W_.delete(2),await wh(n)):t||(n.W_.add(2),await su(n),n.j_.set("Unknown"))}function mo(s){return s.J_||(s.J_=function(n,r,o){const u=St(n);return u.M_(),new U1(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{xo:H1.bind(null,s),No:F1.bind(null,s),Lo:G1.bind(null,s),p_:K1.bind(null,s)}),s.G_.push(async t=>{t?(s.J_.h_(),Xm(s)?$m(s):s.j_.set("Unknown")):(await s.J_.stop(),E0(s))})),s.J_}function er(s){return s.Y_||(s.Y_=function(n,r,o){const u=St(n);return u.M_(),new L1(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:$1.bind(null,s),Lo:Z1.bind(null,s),D_:X1.bind(null,s),v_:W1.bind(null,s)}),s.G_.push(async t=>{t?(s.Y_.h_(),await bh(s)):(await s.Y_.stop(),s.K_.length>0&&(rt(Kr,`Stopping write stream with ${s.K_.length} pending writes`),s.K_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t,n,r,o,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new $i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,o,u){const f=Date.now()+r,m=new Wm(t,n,f,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new at($.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zm(s,t){if(Zi("AsyncQueue",`${t}: ${s}`),fo(s))return new at($.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{static emptySet(t){return new Wa(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||dt.comparator(n.key,r.key):(n,r)=>dt.comparator(n.key,r.key),this.keyedMap=Il(),this.sortedSet=new ie(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Wa)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Wa;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(){this.Z_=new ie(dt.comparator)}track(t){const n=t.doc.key,r=this.Z_.get(n);r?t.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,t):t.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Z_=this.Z_.remove(n):t.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):yt():this.Z_=this.Z_.insert(n,t)}X_(){const t=[];return this.Z_.inorderTraversal((n,r)=>{t.push(r)}),t}}class ao{constructor(t,n,r,o,u,f,m,g,_){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(t,n,r,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new ao(t,n,Wa.emptySet(n),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&yh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class eN{constructor(){this.queries=Gv(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){const o=St(n),u=o.queries;o.queries=Gv(),u.forEach((f,m)=>{for(const g of m.ta)g.onError(r)})})(this,new at($.ABORTED,"Firestore shutting down"))}}function Gv(){return new $r(s=>qT(s),yh)}async function Jm(s,t){const n=St(s);let r=3;const o=t.query;let u=n.queries.get(o);u?!u.na()&&t.ra()&&(r=2):(u=new tN,r=t.ra()?0:1);try{switch(r){case 0:u.ea=await n.onListen(o,!0);break;case 1:u.ea=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Zm(f,`Initialization of query '${Ga(t.query)}' failed`);return void t.onError(m)}n.queries.set(o,u),u.ta.push(t),t.sa(n.onlineState),u.ea&&t.oa(u.ea)&&ep(n)}async function tp(s,t){const n=St(s),r=t.query;let o=3;const u=n.queries.get(r);if(u){const f=u.ta.indexOf(t);f>=0&&(u.ta.splice(f,1),u.ta.length===0?o=t.ra()?0:1:!u.na()&&t.ra()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nN(s,t){const n=St(s);let r=!1;for(const o of t){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.ta)m.oa(o)&&(r=!0);f.ea=o}}r&&ep(n)}function iN(s,t,n){const r=St(s),o=r.queries.get(t);if(o)for(const u of o.ta)u.onError(n);r.queries.delete(t)}function ep(s){s.ia.forEach(t=>{t.next()})}var mm,Kv;(Kv=mm||(mm={}))._a="default",Kv.Cache="cache";class np{constructor(t,n,r){this.query=t,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new ao(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ua?this.la(t)&&(this.aa.next(t),n=!0):this.ha(t,this.onlineState)&&(this.Pa(t),n=!0),this.ca=t,n}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),n=!0),n}ha(t,n){if(!t.fromCache||!this.ra())return!0;const r=n!=="Offline";return(!this.options.Ta||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}la(t){if(t.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(t){t=ao.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==mm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(t){this.key=t}}class b0{constructor(t){this.key=t}}class sN{constructor(t,n){this.query=t,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Mt(),this.mutatedKeys=Mt(),this.ya=HT(t),this.wa=new Wa(this.ya)}get ba(){return this.fa}Sa(t,n){const r=n?n.Da:new Fv,o=n?n.wa:this.wa;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((E,S)=>{const C=o.get(E),V=vh(this.query,S)?S:null,q=!!C&&this.mutatedKeys.has(C.key),Q=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let X=!1;C&&V?C.data.isEqual(V.data)?q!==Q&&(r.track({type:3,doc:V}),X=!0):this.va(C,V)||(r.track({type:2,doc:V}),X=!0,(g&&this.ya(V,g)>0||_&&this.ya(V,_)<0)&&(m=!0)):!C&&V?(r.track({type:0,doc:V}),X=!0):C&&!V&&(r.track({type:1,doc:C}),X=!0,(g||_)&&(m=!0)),X&&(V?(f=f.add(V),u=Q?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{wa:f,Da:r,ls:m,mutatedKeys:u}}va(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,o){const u=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const f=t.Da.X_();f.sort((E,S)=>function(V,q){const Q=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt()}};return Q(V)-Q(q)}(E.type,S.type)||this.ya(E.doc,S.doc)),this.Ca(r),o=o!=null&&o;const m=n&&!o?this.Fa():[],g=this.pa.size===0&&this.current&&!o?1:0,_=g!==this.ga;return this.ga=g,f.length!==0||_?{snapshot:new ao(this.query,t.wa,u,f,t.mutatedKeys,g===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Fv,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Mt(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const n=[];return t.forEach(r=>{this.pa.has(r)||n.push(new b0(r))}),this.pa.forEach(r=>{t.has(r)||n.push(new w0(r))}),n}Oa(t){this.fa=t.gs,this.pa=Mt();const n=this.Sa(t.documents);return this.applyChanges(n,!0)}Na(){return ao.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const ip="SyncEngine";class rN{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class aN{constructor(t){this.key=t,this.Ba=!1}}class oN{constructor(t,n,r,o,u,f){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.La={},this.ka=new $r(m=>qT(m),yh),this.qa=new Map,this.Qa=new Set,this.$a=new ie(dt.comparator),this.Ka=new Map,this.Ua=new Hm,this.Wa={},this.Ga=new Map,this.za=ro.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function lN(s,t,n=!0){const r=O0(s);let o;const u=r.ka.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await R0(r,t,n,!0),o}async function uN(s,t){const n=O0(s);await R0(n,t,!0,!1)}async function R0(s,t,n,r){const o=await N1(s.localStore,mi(t)),u=o.targetId,f=s.sharedClientState.addLocalQueryTarget(u,n);let m;return r&&(m=await cN(s,t,u,f==="current",o.resumeToken)),s.isPrimaryClient&&n&&y0(s.remoteStore,o),m}async function cN(s,t,n,r,o){s.Ha=(S,C,V)=>async function(Q,X,ct,et){let nt=X.view.Sa(ct);nt.ls&&(nt=await Lv(Q.localStore,X.query,!1).then(({documents:P})=>X.view.Sa(P,nt)));const Tt=et&&et.targetChanges.get(X.targetId),vt=et&&et.targetMismatches.get(X.targetId)!=null,Dt=X.view.applyChanges(nt,Q.isPrimaryClient,Tt,vt);return Yv(Q,X.targetId,Dt.Ma),Dt.snapshot}(s,S,C,V);const u=await Lv(s.localStore,t,!0),f=new sN(t,u.gs),m=f.Sa(u.documents),g=iu.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),_=f.applyChanges(m,s.isPrimaryClient,g);Yv(s,n,_.Ma);const E=new rN(t,n,f);return s.ka.set(t,E),s.qa.has(n)?s.qa.get(n).push(t):s.qa.set(n,[t]),_.snapshot}async function hN(s,t,n){const r=St(s),o=r.ka.get(t),u=r.qa.get(o.targetId);if(u.length>1)return r.qa.set(o.targetId,u.filter(f=>!yh(f,t))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await fm(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Qm(r.remoteStore,o.targetId),pm(r,o.targetId)}).catch(ho)):(pm(r,o.targetId),await fm(r.localStore,o.targetId,!0))}async function fN(s,t){const n=St(s),r=n.ka.get(t),o=n.qa.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qm(n.remoteStore,r.targetId))}async function dN(s,t,n){const r=EN(s);try{const o=await function(f,m){const g=St(f),_=Ie.now(),E=m.reduce((V,q)=>V.add(q.key),Mt());let S,C;return g.persistence.runTransaction("Locally write mutations","readwrite",V=>{let q=Ji(),Q=Mt();return g.ds.getEntries(V,E).next(X=>{q=X,q.forEach((ct,et)=>{et.isValidDocument()||(Q=Q.add(ct))})}).next(()=>g.localDocuments.getOverlayedDocuments(V,q)).next(X=>{S=X;const ct=[];for(const et of m){const nt=CC(et,S.get(et.key).overlayedDocument);nt!=null&&ct.push(new Xr(et.key,nt,xT(nt.value.mapValue),Yn.exists(!0)))}return g.mutationQueue.addMutationBatch(V,_,ct,m)}).next(X=>{C=X;const ct=X.applyToLocalDocumentSet(S,Q);return g.documentOverlayCache.saveOverlays(V,X.batchId,ct)})}).then(()=>({batchId:C.batchId,changes:GT(S)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),function(f,m,g){let _=f.Wa[f.currentUser.toKey()];_||(_=new ie(xt)),_=_.insert(m,g),f.Wa[f.currentUser.toKey()]=_}(r,o.batchId,n),await ru(r,o.changes),await bh(r.remoteStore)}catch(o){const u=Zm(o,"Failed to persist write");n.reject(u)}}async function I0(s,t){const n=St(s);try{const r=await R1(n.localStore,t);t.targetChanges.forEach((o,u)=>{const f=n.Ka.get(u);f&&(Gt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.Ba=!0:o.modifiedDocuments.size>0?Gt(f.Ba):o.removedDocuments.size>0&&(Gt(f.Ba),f.Ba=!1))}),await ru(n,r,t)}catch(r){await ho(r)}}function Qv(s,t,n){const r=St(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.ka.forEach((u,f)=>{const m=f.view.sa(t);m.snapshot&&o.push(m.snapshot)}),function(f,m){const g=St(f);g.onlineState=m;let _=!1;g.queries.forEach((E,S)=>{for(const C of S.ta)C.sa(m)&&(_=!0)}),_&&ep(g)}(r.eventManager,t),o.length&&r.La.p_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function mN(s,t,n){const r=St(s);r.sharedClientState.updateQueryState(t,"rejected",n);const o=r.Ka.get(t),u=o&&o.key;if(u){let f=new ie(dt.comparator);f=f.insert(u,Xe.newNoDocument(u,Et.min()));const m=Mt().add(u),g=new Ah(Et.min(),new Map,new ie(xt),f,m);await I0(r,g),r.$a=r.$a.remove(u),r.Ka.delete(t),sp(r)}else await fm(r.localStore,t,!1).then(()=>pm(r,t,n)).catch(ho)}async function pN(s,t){const n=St(s),r=t.batch.batchId;try{const o=await b1(n.localStore,t);N0(n,r,null),C0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ru(n,o)}catch(o){await ho(o)}}async function gN(s,t,n){const r=St(s);try{const o=await function(f,m){const g=St(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return g.mutationQueue.lookupMutationBatch(_,m).next(S=>(Gt(S!==null),E=S.keys(),g.mutationQueue.removeMutationBatch(_,S))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,E,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E)).next(()=>g.localDocuments.getDocuments(_,E))})}(r.localStore,t);N0(r,t,n),C0(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ru(r,o)}catch(o){await ho(o)}}function C0(s,t){(s.Ga.get(t)||[]).forEach(n=>{n.resolve()}),s.Ga.delete(t)}function N0(s,t,n){const r=St(s);let o=r.Wa[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(n?u.reject(n):u.resolve(),o=o.remove(t)),r.Wa[r.currentUser.toKey()]=o}}function pm(s,t,n=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.qa.get(t))s.ka.delete(r),n&&s.La.Ja(r,n);s.qa.delete(t),s.isPrimaryClient&&s.Ua.Sr(t).forEach(r=>{s.Ua.containsKey(r)||D0(s,r)})}function D0(s,t){s.Qa.delete(t.path.canonicalString());const n=s.$a.get(t);n!==null&&(Qm(s.remoteStore,n),s.$a=s.$a.remove(t),s.Ka.delete(n),sp(s))}function Yv(s,t,n){for(const r of n)r instanceof w0?(s.Ua.addReference(r.key,t),_N(s,r)):r instanceof b0?(rt(ip,"Document no longer in limbo: "+r.key),s.Ua.removeReference(r.key,t),s.Ua.containsKey(r.key)||D0(s,r.key)):yt()}function _N(s,t){const n=t.key,r=n.path.canonicalString();s.$a.get(n)||s.Qa.has(r)||(rt(ip,"New document in limbo: "+n),s.Qa.add(r),sp(s))}function sp(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const t=s.Qa.values().next().value;s.Qa.delete(t);const n=new dt(Jt.fromString(t)),r=s.za.next();s.Ka.set(r,new aN(n)),s.$a=s.$a.insert(n,r),y0(s.remoteStore,new Fs(mi(_h(n.path)),r,"TargetPurposeLimboResolution",mh.ae))}}async function ru(s,t,n){const r=St(s),o=[],u=[],f=[];r.ka.isEmpty()||(r.ka.forEach((m,g)=>{f.push(r.Ha(g,t,n).then(_=>{var E;if((_||n)&&r.isPrimaryClient){const S=_?!_.fromCache:(E=n==null?void 0:n.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;r.sharedClientState.updateQueryState(g.targetId,S?"current":"not-current")}if(_){o.push(_);const S=Gm.Yi(g.targetId,_);u.push(S)}}))}),await Promise.all(f),r.La.p_(o),await async function(g,_){const E=St(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>Y.forEach(_,C=>Y.forEach(C.Hi,V=>E.persistence.referenceDelegate.addReference(S,C.targetId,V)).next(()=>Y.forEach(C.Ji,V=>E.persistence.referenceDelegate.removeReference(S,C.targetId,V)))))}catch(S){if(!fo(S))throw S;rt(Km,"Failed to update sequence numbers: "+S)}for(const S of _){const C=S.targetId;if(!S.fromCache){const V=E.Ts.get(C),q=V.snapshotVersion,Q=V.withLastLimboFreeSnapshotVersion(q);E.Ts=E.Ts.insert(C,Q)}}}(r.localStore,u))}async function yN(s,t){const n=St(s);if(!n.currentUser.isEqual(t)){rt(ip,"User change. New user:",t.toKey());const r=await m0(n.localStore,t);n.currentUser=t,function(u,f){u.Ga.forEach(m=>{m.forEach(g=>{g.reject(new at($.CANCELLED,f))})}),u.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await ru(n,r.Rs)}}function vN(s,t){const n=St(s),r=n.Ka.get(t);if(r&&r.Ba)return Mt().add(r.key);{let o=Mt();const u=n.qa.get(t);if(!u)return o;for(const f of u){const m=n.ka.get(f);o=o.unionWith(m.view.ba)}return o}}function O0(s){const t=St(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=I0.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=mN.bind(null,t),t.La.p_=nN.bind(null,t.eventManager),t.La.Ja=iN.bind(null,t.eventManager),t}function EN(s){const t=St(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gN.bind(null,t),t}class oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Sh(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,n){return null}nu(t,n){return null}eu(t){return w1(this.persistence,new T1,t.initialUser,this.serializer)}Xa(t){return new d0(Fm.ri,this.serializer)}Za(t){return new O1}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oh.provider={build:()=>new oh};class TN extends oh{constructor(t){super(),this.cacheSizeBytes=t}tu(t,n){Gt(this.persistence.referenceDelegate instanceof rh);const r=this.persistence.referenceDelegate.garbageCollector;return new a1(r,t.asyncQueue,n)}Xa(t){const n=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new d0(r=>rh.ri(r,n),this.serializer)}}class gm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Qv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yN.bind(null,this.syncEngine),await J1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new eN}()}createDatastore(t){const n=Sh(t.databaseInfo.databaseId),r=function(u){return new P1(u)}(t.databaseInfo);return function(u,f,m,g){return new z1(u,f,m,g)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,o,u,f,m){return new q1(r,o,u,f,m)}(this.localStore,this.datastore,t.asyncQueue,n=>Qv(this.syncEngine,n,0),function(){return Bv.D()?new Bv:new M1}())}createSyncEngine(t,n){return function(o,u,f,m,g,_,E){const S=new oN(o,u,f,m,g,_);return E&&(S.ja=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(o){const u=St(o);rt(Kr,"RemoteStore shutting down."),u.W_.add(5),await su(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}gm.provider={build:()=>new gm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):Zi("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="FirestoreClient";class AN{constructor(t,n,r,o,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=$e.UNAUTHENTICATED,this.clientId=wT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async f=>{rt(nr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(r,f=>(rt(nr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new $i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Zm(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Gd(s,t){s.asyncQueue.verifyOperationInProgress(),rt(nr,"Initializing OfflineComponentProvider");const n=s.configuration;await t.initialize(n);let r=n.initialUser;s.setCredentialChangeListener(async o=>{r.isEqual(o)||(await m0(t.localStore,o),r=o)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function $v(s,t){s.asyncQueue.verifyOperationInProgress();const n=await SN(s);rt(nr,"Initializing OnlineComponentProvider"),await t.initialize(n,s.configuration),s.setCredentialChangeListener(r=>Hv(t.remoteStore,r)),s.setAppCheckTokenChangeListener((r,o)=>Hv(t.remoteStore,o)),s._onlineComponents=t}async function SN(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){rt(nr,"Using user provided OfflineComponentProvider");try{await Gd(s,s._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(o){return o.name==="FirebaseError"?o.code===$.FAILED_PRECONDITION||o.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;eo("Error using user provided cache. Falling back to memory cache: "+n),await Gd(s,new oh)}}else rt(nr,"Using default OfflineComponentProvider"),await Gd(s,new TN(void 0));return s._offlineComponents}async function M0(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(rt(nr,"Using user provided OnlineComponentProvider"),await $v(s,s._uninitializedComponentsProvider._online)):(rt(nr,"Using default OnlineComponentProvider"),await $v(s,new gm))),s._onlineComponents}function wN(s){return M0(s).then(t=>t.syncEngine)}async function lh(s){const t=await M0(s),n=t.eventManager;return n.onListen=lN.bind(null,t.syncEngine),n.onUnlisten=hN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=uN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=fN.bind(null,t.syncEngine),n}function bN(s,t,n={}){const r=new $i;return s.asyncQueue.enqueueAndForget(async()=>function(u,f,m,g,_){const E=new rp({next:C=>{E.su(),f.enqueueAndForget(()=>tp(u,S));const V=C.docs.has(m);!V&&C.fromCache?_.reject(new at($.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&C.fromCache&&g&&g.source==="server"?_.reject(new at($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(C)},error:C=>_.reject(C)}),S=new np(_h(m.path),E,{includeMetadataChanges:!0,Ta:!0});return Jm(u,S)}(await lh(s),s.asyncQueue,t,n,r)),r.promise}function RN(s,t,n={}){const r=new $i;return s.asyncQueue.enqueueAndForget(async()=>function(u,f,m,g,_){const E=new rp({next:C=>{E.su(),f.enqueueAndForget(()=>tp(u,S)),C.fromCache&&g.source==="server"?_.reject(new at($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(C)},error:C=>_.reject(C)}),S=new np(m,E,{includeMetadataChanges:!0,Ta:!0});return Jm(u,S)}(await lh(s),s.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(s,t,n){if(!n)throw new at($.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function IN(s,t,n,r){if(t===!0&&r===!0)throw new at($.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Wv(s){if(!dt.isDocumentKey(s))throw new at($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Zv(s){if(dt.isDocumentKey(s))throw new at($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Rh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":yt()}function Ln(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new at($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rh(s);throw new at($.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="firestore.googleapis.com",Jv=!0;class tE{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new at($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=k0,this.ssl=Jv}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Jv;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=f0;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<s1)throw new at($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}IN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=V0((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new at($.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new at($.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new at($.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ih{constructor(t,n,r,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new at($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new at($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new PI;switch(r.type){case"firstParty":return new zI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new at($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Xv.get(n);r&&(rt("ComponentProvider","Removing Datastore"),Xv.delete(n),r.terminate())}(this),Promise.resolve()}}function CN(s,t,n,r={}){var o;const u=(s=Ln(s,Ih))._getSettings(),f=Object.assign(Object.assign({},u),{emulatorOptions:s._getEmulatorOptions()}),m=`${t}:${n}`;u.host!==k0&&u.host!==m&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},u),{host:m,ssl:!1,emulatorOptions:r});if(!Br(g,f)&&(s._setSettings(g),r.mockUserToken)){let _,E;if(typeof r.mockUserToken=="string")_=r.mockUserToken,E=$e.MOCK_USER;else{_=YS(r.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new at($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new $e(S)}s._authCredentials=new UI(new ST(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Zr(this.firestore,t,this._query)}}class rn{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $s(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new rn(this.firestore,t,this._key)}}class $s extends Zr{constructor(t,n,r){super(t,n,_h(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new rn(this.firestore,null,new dt(t))}withConverter(t){return new $s(this.firestore,t,this._path)}}function He(s,t,...n){if(s=an(s),x0("collection","path",t),s instanceof Ih){const r=Jt.fromString(t,...n);return Zv(r),new $s(s,null,r)}{if(!(s instanceof rn||s instanceof $s))throw new at($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Jt.fromString(t,...n));return Zv(r),new $s(s.firestore,null,r)}}function Kl(s,t,...n){if(s=an(s),arguments.length===1&&(t=wT.newId()),x0("doc","path",t),s instanceof Ih){const r=Jt.fromString(t,...n);return Wv(r),new rn(s,null,new dt(r))}{if(!(s instanceof rn||s instanceof $s))throw new at($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Jt.fromString(t,...n));return Wv(r),new rn(s.firestore,s instanceof $s?s.converter:null,new dt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="AsyncQueue";class nE{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new g0(this,"async_queue_retry"),this.bu=()=>{const r=Fd();r&&rt(eE,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=t;const n=Fd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const n=Fd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.bu)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const n=new $i;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!fo(t))throw t;rt(eE,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const n=this.Su.then(()=>(this.pu=!0,t().catch(r=>{this.gu=r,this.pu=!1;const o=function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m}(r);throw Zi("INTERNAL UNHANDLED ERROR: ",o),r}).then(r=>(this.pu=!1,r))));return this.Su=n,n}enqueueAfterDelay(t,n,r){this.Du(),this.wu.indexOf(t)>-1&&(n=0);const o=Wm.createAndSchedule(this,t,n,r,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&yt()}verifyOperationInProgress(){}async Mu(){let t;do t=this.Su,await t;while(t!==this.Su)}xu(t){for(const n of this.fu)if(n.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const n=this.fu.indexOf(t);this.fu.splice(n,1)}}function iE(s){return function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1}(s,["next","error","complete"])}class ir extends Ih{constructor(t,n,r,o){super(t,n,r,o),this.type="firestore",this._queue=new nE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new nE(t),this._firestoreClient=void 0,await t}}}function NN(s,t){const n=typeof s=="object"?s:xE(),r=typeof s=="string"?s:th,o=Em(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=KS("firestore");u&&CN(o,...u)}return o}function Ch(s){if(s._terminated)throw new at($.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||DN(s),s._firestoreClient}function DN(s){var t,n,r;const o=s._freezeSettings(),u=function(m,g,_,E){return new tC(m,g,_,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,V0(E.experimentalLongPollingOptions),E.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new AN(s._authCredentials,s._appCheckCredentials,s._queue,u,s._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(t){this._byteString=t}static fromBase64String(t){try{return new oo(Fe.fromBase64String(t))}catch(n){throw new at($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new oo(Fe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new at($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new at($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new at($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return xt(this._lat,t._lat)||xt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=/^__.*__$/;class MN{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Xr(t,this.data,this.fieldMask,n,this.fieldTransforms):new nu(t,this.data,n,this.fieldTransforms)}}function P0(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt()}}class up{constructor(t,n,r,o,u,f){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new up(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.ku({path:r,Qu:!1});return o.$u(t),o}Ku(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.ku({path:r,Qu:!1});return o.Bu(),o}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return uh(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(P0(this.Lu)&&ON.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class VN{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Sh(t)}ju(t,n,r,o=!1){return new up({Lu:t,methodName:n,zu:r,path:qe.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cp(s){const t=s._freezeSettings(),n=Sh(s._databaseId);return new VN(s._databaseId,!!t.ignoreUndefinedProperties,n)}function U0(s,t,n,r,o,u={}){const f=s.ju(u.merge||u.mergeFields?2:0,t,n,o);z0("Data must be an object, but it was:",f,r);const m=L0(r,f);let g,_;if(u.merge)g=new Kn(f.fieldMask),_=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const S of u.mergeFields){const C=kN(t,S,n);if(!f.contains(C))throw new at($.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);UN(E,C)||E.push(C)}g=new Kn(E),_=f.fieldTransforms.filter(S=>g.covers(S.field))}else g=null,_=f.fieldTransforms;return new MN(new Un(m),g,_)}class hp extends Nh{_toFieldTransform(t){return new JT(t.path,new ql)}isEqual(t){return t instanceof hp}}class fp extends Nh{constructor(t,n){super(t),this.Ju=n}_toFieldTransform(t){const n=new Gl(t.serializer,YT(t.serializer,this.Ju));return new JT(t.path,n)}isEqual(t){return t instanceof fp&&this.Ju===t.Ju}}function xN(s,t,n,r=!1){return dp(n,s.ju(r?4:3,t))}function dp(s,t){if(j0(s=an(s)))return z0("Unsupported field value:",t,s),L0(s,t);if(s instanceof Nh)return function(r,o){if(!P0(o.Lu))throw o.Wu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(r,o){const u=[];let f=0;for(const m of r){let g=dp(m,o.Uu(f));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),f++}return{arrayValue:{values:u}}}(s,t)}return function(r,o){if((r=an(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YT(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Ie.fromDate(r);return{timestampValue:sh(o.serializer,u)}}if(r instanceof Ie){const u=new Ie(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sh(o.serializer,u)}}if(r instanceof op)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof oo)return{bytesValue:r0(o.serializer,r._byteString)};if(r instanceof rn){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.Wu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:qm(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof lp)return function(f,m){return{mapValue:{fields:{[MT]:{stringValue:VT},[eh]:{arrayValue:{values:f.toArray().map(_=>{if(typeof _!="number")throw m.Wu("VectorValues must only contain numeric values.");return Lm(m.serializer,_)})}}}}}}(r,o);throw o.Wu(`Unsupported field value: ${Rh(r)}`)}(s,t)}function L0(s,t){const n={};return RT(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yr(s,(r,o)=>{const u=dp(o,t.qu(r));u!=null&&(n[r]=u)}),{mapValue:{fields:n}}}function j0(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Ie||s instanceof op||s instanceof oo||s instanceof rn||s instanceof Nh||s instanceof lp)}function z0(s,t,n){if(!j0(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const r=Rh(n);throw r==="an object"?t.Wu(s+" a custom object"):t.Wu(s+" "+r)}}function kN(s,t,n){if((t=an(t))instanceof ap)return t._internalPath;if(typeof t=="string")return B0(s,t);throw uh("Field path arguments must be of type string or ",s,!1,void 0,n)}const PN=new RegExp("[~\\*/\\[\\]]");function B0(s,t,n){if(t.search(PN)>=0)throw uh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new ap(...t.split("."))._internalPath}catch{throw uh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function uh(s,t,n,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let m=`Function ${t}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||f)&&(g+=" (found",u&&(g+=` in field ${r}`),f&&(g+=` in document ${o}`),g+=")"),new at($.INVALID_ARGUMENT,m+s+g)}function UN(s,t){return s.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(t,n,r,o,u){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new LN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(H0("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LN extends q0{data(){return super.data()}}function H0(s,t){return typeof t=="string"?B0(s,t):t instanceof ap?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new at($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mp{}class jN extends mp{}function zN(s,t,...n){let r=[];t instanceof mp&&r.push(t),r=r.concat(n),function(u){const f=u.filter(g=>g instanceof gp).length,m=u.filter(g=>g instanceof pp).length;if(f>1||f>0&&m>0)throw new at($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)s=o._apply(s);return s}class pp extends jN{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new pp(t,n,r)}_apply(t){const n=this._parse(t);return G0(t._query,n),new Zr(t.firestore,t.converter,am(t._query,n))}_parse(t){const n=cp(t.firestore);return function(u,f,m,g,_,E,S){let C;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new at($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){rE(S,E);const q=[];for(const Q of S)q.push(sE(g,u,Q));C={arrayValue:{values:q}}}else C=sE(g,u,S)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||rE(S,E),C=xN(m,f,S,E==="in"||E==="not-in");return ve.create(_,E,C)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class gp extends mp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new gp(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$n.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(o,u){let f=o;const m=u.getFlattenedFilters();for(const g of m)G0(f,g),f=am(f,g)}(t._query,n),new Zr(t.firestore,t.converter,am(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function sE(s,t,n){if(typeof(n=an(n))=="string"){if(n==="")throw new at($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BT(t)&&n.indexOf("/")!==-1)throw new at($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Jt.fromString(n));if(!dt.isDocumentKey(r))throw new at($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vv(s,new dt(r))}if(n instanceof rn)return vv(s,n._key);throw new at($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rh(n)}.`)}function rE(s,t){if(!Array.isArray(s)||s.length===0)throw new at($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function G0(s,t){const n=function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new at($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new at($.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class BN{convertValue(t,n="none"){switch(tr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return he(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Js(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw yt()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Yr(t,(o,u)=>{r[o]=this.convertValue(u,n)}),r}convertVectorValue(t){var n,r,o;const u=(o=(r=(n=t.fields)===null||n===void 0?void 0:n[eh].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(f=>he(f.doubleValue));return new lp(u)}convertGeoPoint(t){return new op(he(t.latitude),he(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=gh(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(jl(t));default:return null}}convertTimestamp(t){const n=Zs(t);return new Ie(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Jt.fromString(t);Gt(h0(r));const o=new zl(r.get(1),r.get(3)),u=new dt(r.popFirst(5));return o.isEqual(n)||Zi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(s,t,n){let r;return r=s?n&&(n.merge||n.mergeFields)?s.toFirestore(t,n):s.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Q0 extends q0{constructor(t,n,r,o,u,f){super(t,n,r,o,f),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(H0("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Fc extends Q0{data(t={}){return super.data(t)}}class Y0{constructor(t,n,r,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new Nl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new Fc(this._firestore,this._userDataWriter,r.key,r,new Nl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new at($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const g=new Fc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Nl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const g=new Fc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Nl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return m.type!==0&&(_=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:qN(m.type),doc:g,oldIndex:_,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function qN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(s){s=Ln(s,rn);const t=Ln(s.firestore,ir);return bN(Ch(t),s._key).then(n=>$0(t,s,n))}class _p extends BN{constructor(t){super(),this.firestore=t}convertBytes(t){return new oo(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new rn(this.firestore,null,n)}}function Za(s){s=Ln(s,Zr);const t=Ln(s.firestore,ir),n=Ch(t),r=new _p(t);return F0(s._query),RN(n,s._query).then(o=>new Y0(t,r,s,o))}function yp(s,t,n){s=Ln(s,rn);const r=Ln(s.firestore,ir),o=K0(s.converter,t,n);return vp(r,[U0(cp(r),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Yn.none())])}function FN(s){return vp(Ln(s.firestore,ir),[new jm(s._key,Yn.none())])}function po(s,t){const n=Ln(s.firestore,ir),r=Kl(s),o=K0(s.converter,t);return vp(n,[U0(cp(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,Yn.exists(!1))]).then(()=>r)}function au(s,...t){var n,r,o;s=an(s);let u={includeMetadataChanges:!1,source:"default"},f=0;typeof t[f]!="object"||iE(t[f])||(u=t[f],f++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(iE(t[f])){const S=t[f];t[f]=(n=S.next)===null||n===void 0?void 0:n.bind(S),t[f+1]=(r=S.error)===null||r===void 0?void 0:r.bind(S),t[f+2]=(o=S.complete)===null||o===void 0?void 0:o.bind(S)}let g,_,E;if(s instanceof rn)_=Ln(s.firestore,ir),E=_h(s._key.path),g={next:S=>{t[f]&&t[f]($0(_,s,S))},error:t[f+1],complete:t[f+2]};else{const S=Ln(s,Zr);_=Ln(S.firestore,ir),E=S._query;const C=new _p(_);g={next:V=>{t[f]&&t[f](new Y0(_,C,S,V))},error:t[f+1],complete:t[f+2]},F0(s._query)}return function(C,V,q,Q){const X=new rp(Q),ct=new np(V,X,q);return C.asyncQueue.enqueueAndForget(async()=>Jm(await lh(C),ct)),()=>{X.su(),C.asyncQueue.enqueueAndForget(async()=>tp(await lh(C),ct))}}(Ch(_),E,m,g)}function vp(s,t){return function(r,o){const u=new $i;return r.asyncQueue.enqueueAndForget(async()=>dN(await wN(r),o,u)),u.promise}(Ch(s),t)}function $0(s,t,n){const r=n.docs.get(t._key),o=new _p(s);return new Q0(s,o,t._key,r,new Nl(n.hasPendingWrites,n.fromCache),t.converter)}function go(){return new hp("serverTimestamp")}function GN(s){return new fp("increment",s)}(function(t,n=!0){(function(o){co=o})(lo),Ja(new qr("firestore",(r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),m=new ir(new LI(r.getProvider("auth-internal")),new BI(f,r.getProvider("app-check-internal")),function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new at($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zl(_.options.projectId,E)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),Qs(lv,uv,t),Qs(lv,uv,"esm2017")})();const KN={apiKey:"AIzaSyA2SgnU6rftQUVqHJs5mDbSOoYVcQkffxA",authDomain:"prototype-fitness.firebaseapp.com",projectId:"prototype-fitness",storageBucket:"prototype-fitness.firebasestorage.app",messagingSenderId:"626754705168",appId:"1:626754705168:web:48fa7c49000f6c6cf47795",measurementId:"G-4HX3ZMM9JW"},X0=VE(KN),Qt=xI(X0),fe=NN(X0),QN=({navigate:s})=>{const[t,n]=mt.useState(""),[r,o]=mt.useState(""),[u,f]=mt.useState(null),m=async()=>{f(null);const _=new Fi;try{await HR(Qt,_),s("/home")}catch(E){f(E.message)}},g=async _=>{_.preventDefault(),f(null);try{await vR(Qt,t,r),s("/home")}catch(E){f(E.message)}};return b.jsx("div",{className:"login-container",children:b.jsxs("form",{onSubmit:g,className:"login-form",children:[b.jsx("h2",{className:"form-title",children:"Log In"}),b.jsx("button",{type:"button",onClick:m,className:"google-signin-button",children:"Sign in with Google"}),b.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:_=>n(_.target.value),required:!0,className:"form-input"}),b.jsx("input",{type:"password",placeholder:"Password",value:r,onChange:_=>o(_.target.value),required:!0,className:"form-input"}),u&&b.jsx("p",{className:"error-message",children:u}),b.jsx("button",{type:"submit",className:"form-button login-button",children:"Log In"}),b.jsxs("p",{className:"form-text",children:["Don't have an account?"," ",b.jsx("span",{className:"form-link",onClick:()=>s("/signup"),style:{cursor:"pointer"},children:"Sign Up"})]})]})})},YN=({navigate:s})=>{const[t,n]=mt.useState(""),[r,o]=mt.useState(""),[u,f]=mt.useState(""),[m,g]=mt.useState(null),_=async E=>{E.preventDefault(),g(null);try{const S=await yR(Qt,r,u);await TR(S.user,{displayName:t}),await yp(Kl(fe,"users",S.user.uid),{displayName:t,email:r,createdAt:go()}),s("/home")}catch(S){g(S.message)}};return b.jsx("div",{className:"signup-container",children:b.jsxs("form",{onSubmit:_,className:"signup-form",children:[b.jsx("h2",{className:"form-title",children:"Sign Up"}),b.jsx("input",{type:"text",placeholder:"Display Name",value:t,onChange:E=>n(E.target.value),required:!0,className:"form-input"}),b.jsx("input",{type:"email",placeholder:"Email",value:r,onChange:E=>o(E.target.value),required:!0,className:"form-input"}),b.jsx("input",{type:"password",placeholder:"Password",value:u,onChange:E=>f(E.target.value),required:!0,className:"form-input"}),m&&b.jsx("p",{className:"error-message",children:m}),b.jsx("button",{type:"submit",className:"form-button",children:"Sign Up"}),b.jsxs("p",{className:"form-text",children:["Already have an account?"," ",b.jsx("span",{className:"form-link",onClick:()=>s("/login"),style:{cursor:"pointer"},children:"Log In"})]})]})})};var aE;(function(s){s.STRING="string",s.NUMBER="number",s.INTEGER="integer",s.BOOLEAN="boolean",s.ARRAY="array",s.OBJECT="object"})(aE||(aE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oE;(function(s){s.LANGUAGE_UNSPECIFIED="language_unspecified",s.PYTHON="python"})(oE||(oE={}));var lE;(function(s){s.OUTCOME_UNSPECIFIED="outcome_unspecified",s.OUTCOME_OK="outcome_ok",s.OUTCOME_FAILED="outcome_failed",s.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(lE||(lE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=["user","model","function","system"];var cE;(function(s){s.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",s.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",s.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",s.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(cE||(cE={}));var hE;(function(s){s.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE"})(hE||(hE={}));var fE;(function(s){s.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",s.NEGLIGIBLE="NEGLIGIBLE",s.LOW="LOW",s.MEDIUM="MEDIUM",s.HIGH="HIGH"})(fE||(fE={}));var dE;(function(s){s.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",s.SAFETY="SAFETY",s.OTHER="OTHER"})(dE||(dE={}));var kl;(function(s){s.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",s.STOP="STOP",s.MAX_TOKENS="MAX_TOKENS",s.SAFETY="SAFETY",s.RECITATION="RECITATION",s.LANGUAGE="LANGUAGE",s.BLOCKLIST="BLOCKLIST",s.PROHIBITED_CONTENT="PROHIBITED_CONTENT",s.SPII="SPII",s.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",s.OTHER="OTHER"})(kl||(kl={}));var mE;(function(s){s.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",s.RETRIEVAL_QUERY="RETRIEVAL_QUERY",s.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",s.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",s.CLASSIFICATION="CLASSIFICATION",s.CLUSTERING="CLUSTERING"})(mE||(mE={}));var pE;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.AUTO="AUTO",s.ANY="ANY",s.NONE="NONE"})(pE||(pE={}));var gE;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.MODE_DYNAMIC="MODE_DYNAMIC"})(gE||(gE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Ha extends hn{constructor(t,n){super(t),this.response=n}}class W0 extends hn{constructor(t,n,r,o){super(t),this.status=n,this.statusText=r,this.errorDetails=o}}class Xs extends hn{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="https://generativelanguage.googleapis.com",XN="v1beta",WN="0.22.0",ZN="genai-js";var Qr;(function(s){s.GENERATE_CONTENT="generateContent",s.STREAM_GENERATE_CONTENT="streamGenerateContent",s.COUNT_TOKENS="countTokens",s.EMBED_CONTENT="embedContent",s.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Qr||(Qr={}));class JN{constructor(t,n,r,o,u){this.model=t,this.task=n,this.apiKey=r,this.stream=o,this.requestOptions=u}toString(){var t,n;const r=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||XN;let u=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||$N}/${r}/${this.model}:${this.task}`;return this.stream&&(u+="?alt=sse"),u}}function tD(s){const t=[];return s!=null&&s.apiClient&&t.push(s.apiClient),t.push(`${ZN}/${WN}`),t.join(" ")}async function eD(s){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",tD(s.requestOptions)),n.append("x-goog-api-key",s.apiKey);let r=(t=s.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(o){throw new Xs(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${o.message}`)}for(const[o,u]of r.entries()){if(o==="x-goog-api-key")throw new Xs(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new Xs(`Header name ${o} can only be set using the apiClient field`);n.append(o,u)}}return n}async function nD(s,t,n,r,o,u){const f=new JN(s,t,n,r,u);return{url:f.toString(),fetchOptions:Object.assign(Object.assign({},aD(u)),{method:"POST",headers:await eD(f),body:o})}}async function ou(s,t,n,r,o,u={},f=fetch){const{url:m,fetchOptions:g}=await nD(s,t,n,r,o,u);return iD(m,g,f)}async function iD(s,t,n=fetch){let r;try{r=await n(s,t)}catch(o){sD(o,s)}return r.ok||await rD(r,s),r}function sD(s,t){let n=s;throw s instanceof W0||s instanceof Xs||(n=new hn(`Error fetching from ${t.toString()}: ${s.message}`),n.stack=s.stack),n}async function rD(s,t){let n="",r;try{const o=await s.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,r=o.error.details)}catch{}throw new W0(`Error fetching from ${t.toString()}: [${s.status} ${s.statusText}] ${n}`,s.status,s.statusText,r)}function aD(s){const t={};if((s==null?void 0:s.signal)!==void 0||(s==null?void 0:s.timeout)>=0){const n=new AbortController;(s==null?void 0:s.timeout)>=0&&setTimeout(()=>n.abort(),s.timeout),s!=null&&s.signal&&s.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(s){return s.text=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Gc(s.candidates[0]))throw new Ha(`${zs(s)}`,s);return oD(s)}else if(s.promptFeedback)throw new Ha(`Text not available. ${zs(s)}`,s);return""},s.functionCall=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Gc(s.candidates[0]))throw new Ha(`${zs(s)}`,s);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),_E(s)[0]}else if(s.promptFeedback)throw new Ha(`Function call not available. ${zs(s)}`,s)},s.functionCalls=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Gc(s.candidates[0]))throw new Ha(`${zs(s)}`,s);return _E(s)}else if(s.promptFeedback)throw new Ha(`Function call not available. ${zs(s)}`,s)},s}function oD(s){var t,n,r,o;const u=[];if(!((n=(t=s.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const f of(o=(r=s.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)f.text&&u.push(f.text),f.executableCode&&u.push("\n```"+f.executableCode.language+`
`+f.executableCode.code+"\n```\n"),f.codeExecutionResult&&u.push("\n```\n"+f.codeExecutionResult.output+"\n```\n");return u.length>0?u.join(""):""}function _E(s){var t,n,r,o;const u=[];if(!((n=(t=s.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const f of(o=(r=s.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)f.functionCall&&u.push(f.functionCall);if(u.length>0)return u}const lD=[kl.RECITATION,kl.SAFETY,kl.LANGUAGE];function Gc(s){return!!s.finishReason&&lD.includes(s.finishReason)}function zs(s){var t,n,r;let o="";if((!s.candidates||s.candidates.length===0)&&s.promptFeedback)o+="Response was blocked",!((t=s.promptFeedback)===null||t===void 0)&&t.blockReason&&(o+=` due to ${s.promptFeedback.blockReason}`),!((n=s.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${s.promptFeedback.blockReasonMessage}`);else if(!((r=s.candidates)===null||r===void 0)&&r[0]){const u=s.candidates[0];Gc(u)&&(o+=`Candidate was blocked due to ${u.finishReason}`,u.finishMessage&&(o+=`: ${u.finishMessage}`))}return o}function Ql(s){return this instanceof Ql?(this.v=s,this):new Ql(s)}function uD(s,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(s,t||[]),o,u=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(C){r[C]&&(o[C]=function(V){return new Promise(function(q,Q){u.push([C,V,q,Q])>1||m(C,V)})})}function m(C,V){try{g(r[C](V))}catch(q){S(u[0][3],q)}}function g(C){C.value instanceof Ql?Promise.resolve(C.value.v).then(_,E):S(u[0][2],C)}function _(C){m("next",C)}function E(C){m("throw",C)}function S(C,V){C(V),u.shift(),u.length&&m(u[0][0],u[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function cD(s){const t=s.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=dD(t),[r,o]=n.tee();return{stream:fD(r),response:hD(o)}}async function hD(s){const t=[],n=s.getReader();for(;;){const{done:r,value:o}=await n.read();if(r)return Ep(mD(t));t.push(o)}}function fD(s){return uD(this,arguments,function*(){const n=s.getReader();for(;;){const{value:r,done:o}=yield Ql(n.read());if(o)break;yield yield Ql(Ep(r))}})}function dD(s){const t=s.getReader();return new ReadableStream({start(r){let o="";return u();function u(){return t.read().then(({value:f,done:m})=>{if(m){if(o.trim()){r.error(new hn("Failed to parse stream"));return}r.close();return}o+=f;let g=o.match(yE),_;for(;g;){try{_=JSON.parse(g[1])}catch{r.error(new hn(`Error parsing JSON response: "${g[1]}"`));return}r.enqueue(_),o=o.substring(g[0].length),g=o.match(yE)}return u()})}}})}function mD(s){const t=s[s.length-1],n={promptFeedback:t==null?void 0:t.promptFeedback};for(const r of s){if(r.candidates){let o=0;for(const u of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=u.citationMetadata,n.candidates[o].groundingMetadata=u.groundingMetadata,n.candidates[o].finishReason=u.finishReason,n.candidates[o].finishMessage=u.finishMessage,n.candidates[o].safetyRatings=u.safetyRatings,u.content&&u.content.parts){n.candidates[o].content||(n.candidates[o].content={role:u.content.role||"user",parts:[]});const f={};for(const m of u.content.parts)m.text&&(f.text=m.text),m.functionCall&&(f.functionCall=m.functionCall),m.executableCode&&(f.executableCode=m.executableCode),m.codeExecutionResult&&(f.codeExecutionResult=m.codeExecutionResult),Object.keys(f).length===0&&(f.text=""),n.candidates[o].content.parts.push(f)}o++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z0(s,t,n,r){const o=await ou(t,Qr.STREAM_GENERATE_CONTENT,s,!0,JSON.stringify(n),r);return cD(o)}async function J0(s,t,n,r){const u=await(await ou(t,Qr.GENERATE_CONTENT,s,!1,JSON.stringify(n),r)).json();return{response:Ep(u)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(s){if(s!=null){if(typeof s=="string")return{role:"system",parts:[{text:s}]};if(s.text)return{role:"system",parts:[s]};if(s.parts)return s.role?s:{role:"system",parts:s.parts}}}function Yl(s){let t=[];if(typeof s=="string")t=[{text:s}];else for(const n of s)typeof n=="string"?t.push({text:n}):t.push(n);return pD(t)}function pD(s){const t={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,o=!1;for(const u of s)"functionResponse"in u?(n.parts.push(u),o=!0):(t.parts.push(u),r=!0);if(r&&o)throw new hn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!o)throw new hn("No content is provided for sending chat message.");return r?t:n}function gD(s,t){var n;let r={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(n=t==null?void 0:t.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=s.generateContentRequest!=null;if(s.contents){if(o)throw new Xs("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=s.contents}else if(o)r=Object.assign(Object.assign({},r),s.generateContentRequest);else{const u=Yl(s);r.contents=[u]}return{generateContentRequest:r}}function vE(s){let t;return s.contents?t=s:t={contents:[Yl(s)]},s.systemInstruction&&(t.systemInstruction=tA(s.systemInstruction)),t}function _D(s){return typeof s=="string"||Array.isArray(s)?{content:Yl(s)}:s}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],yD={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function vD(s){let t=!1;for(const n of s){const{role:r,parts:o}=n;if(!t&&r!=="user")throw new hn(`First content should be with role 'user', got ${r}`);if(!uE.includes(r))throw new hn(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(uE)}`);if(!Array.isArray(o))throw new hn("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new hn("Each Content should have at least one part");const u={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const m of o)for(const g of EE)g in m&&(u[g]+=1);const f=yD[r];for(const m of EE)if(!f.includes(m)&&u[m]>0)throw new hn(`Content with role '${r}' can't contain '${m}' part`);t=!0}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="SILENT_ERROR";class ED{constructor(t,n,r,o={}){this.model=n,this.params=r,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,r!=null&&r.history&&(vD(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,n={}){var r,o,u,f,m,g;await this._sendPromise;const _=Yl(t),E={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(f=this.params)===null||f===void 0?void 0:f.toolConfig,systemInstruction:(m=this.params)===null||m===void 0?void 0:m.systemInstruction,cachedContent:(g=this.params)===null||g===void 0?void 0:g.cachedContent,contents:[...this._history,_]},S=Object.assign(Object.assign({},this._requestOptions),n);let C;return this._sendPromise=this._sendPromise.then(()=>J0(this._apiKey,this.model,E,S)).then(V=>{var q,Q;if(V.response.candidates&&V.response.candidates.length>0&&((q=V.response.candidates[0])===null||q===void 0?void 0:q.content)!==void 0){this._history.push(_);const X=Object.assign({parts:[],role:"model"},(Q=V.response.candidates)===null||Q===void 0?void 0:Q[0].content);this._history.push(X)}else{const X=zs(V.response);X&&console.warn(`sendMessage() was unsuccessful. ${X}. Inspect response object for details.`)}C=V}),await this._sendPromise,C}async sendMessageStream(t,n={}){var r,o,u,f,m,g;await this._sendPromise;const _=Yl(t),E={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(f=this.params)===null||f===void 0?void 0:f.toolConfig,systemInstruction:(m=this.params)===null||m===void 0?void 0:m.systemInstruction,cachedContent:(g=this.params)===null||g===void 0?void 0:g.cachedContent,contents:[...this._history,_]},S=Object.assign(Object.assign({},this._requestOptions),n),C=Z0(this._apiKey,this.model,E,S);return this._sendPromise=this._sendPromise.then(()=>C).catch(V=>{throw new Error(TE)}).then(V=>V.response).then(V=>{var q;if(V.candidates&&V.candidates.length>0&&((q=V.candidates[0])===null||q===void 0?void 0:q.content)!==void 0){this._history.push(_);const Q=Object.assign({},V.candidates[0].content);Q.role||(Q.role="model"),this._history.push(Q)}else{const Q=zs(V);Q&&console.warn(`sendMessageStream() was unsuccessful. ${Q}. Inspect response object for details.`)}}).catch(V=>{V.message!==TE&&console.error(V)}),C}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(s,t,n,r){return(await ou(t,Qr.COUNT_TOKENS,s,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD(s,t,n,r){return(await ou(t,Qr.EMBED_CONTENT,s,!1,JSON.stringify(n),r)).json()}async function SD(s,t,n,r){const o=n.requests.map(f=>Object.assign(Object.assign({},f),{model:t}));return(await ou(t,Qr.BATCH_EMBED_CONTENTS,s,!1,JSON.stringify({requests:o}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(t,n,r={}){this.apiKey=t,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=tA(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(t,n={}){var r;const o=vE(t),u=Object.assign(Object.assign({},this._requestOptions),n);return J0(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),u)}async generateContentStream(t,n={}){var r;const o=vE(t),u=Object.assign(Object.assign({},this._requestOptions),n);return Z0(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),u)}startChat(t){var n;return new ED(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},t),this._requestOptions)}async countTokens(t,n={}){const r=gD(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return TD(this.apiKey,this.model,r,o)}async embedContent(t,n={}){const r=_D(t),o=Object.assign(Object.assign({},this._requestOptions),n);return AD(this.apiKey,this.model,r,o)}async batchEmbedContents(t,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return SD(this.apiKey,this.model,t,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(t){this.apiKey=t}getGenerativeModel(t,n){if(!t.model)throw new hn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new AE(this.apiKey,t,n)}getGenerativeModelFromCachedContent(t,n,r){if(!t.name)throw new Xs("Cached content must contain a `name` field.");if(!t.model)throw new Xs("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const f of o)if(n!=null&&n[f]&&t[f]&&(n==null?void 0:n[f])!==t[f]){if(f==="model"){const m=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,g=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(m===g)continue}throw new Xs(`Different value for "${f}" specified in modelParams (${n[f]}) and cachedContent (${t[f]})`)}const u=Object.assign(Object.assign({},n),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new AE(this.apiKey,u,r)}}const bD=new wD("AIzaSyCHiuRpmb7zHec-9LI1gQYDpEJW4m1Jb4Q");console.log("Environment Mode:","production");async function RD(s){try{const t=`You are a workout parser. Given the following workout description, extract and calculate details and output a valid JSON object without any additional text or commentary. The JSON object must have the following keys:

- "workoutName": string (the main workout activity, e.g., "Running", "Pushups")
- "intensity": string ("low", "medium", or "high")
- "durationMinutes": number (duration of the workout in minutes)
- "caloriesBurned": number (if not provided, estimate as 10 calories per minute)
- "metrics": an array of objects (each with:
    - "type": one of "reps", "distance", "steps", or "duration"
    - "value": number
    - "unit": string (optional, e.g., "km", "miles", "minutes")
  )
- "points": number (calculated using these rules:
     1 point per rep
     100 points per km (if distance is in miles, convert to km)
     0.1 points per step
     2 points per minute
     Use a base of 50 points if no metrics are found)
- "notes": string (a brief summary)

Use these guidelines:
- For inputs that only mention time (e.g., "ran for 30 minutes"), assume "intensity" is "medium", estimate calories as (durationMinutes * 10), and treat the duration as a metric with type "duration".
- For inputs like "did 100 pushups today", extract the exercise and the number (using type "reps").
- Output strictly only the JSON.

Example:  
Input: "Ran for 30 minutes"  
Possible output: 
{
  "workoutName": "Running",
  "intensity": "medium",
  "durationMinutes": 30,
  "caloriesBurned": 300,
  "metrics": [
    { "type": "duration", "value": 30, "unit": "minutes" }
  ],
  "points": 60,
  "notes": "30-minute run"
}

Now, parse this workout description: "${s}"`,o=await(await bD.getGenerativeModel({model:"gemini-1.5-flash-latest",systemInstruction:"You are a fitness data parser that only returns valid JSON"}).generateContent(t)).response.text();console.log("Raw AI Response:",o);const u=o.replace(/```json/g,"").replace(/```/g,"").trim();if(!u)throw new Error("Empty response from AI");const f=JSON.parse(u),g=["workoutName","durationMinutes","caloriesBurned","points"].filter(S=>!(S in f));if(g.length>0)throw new Error(`Missing required fields: ${g.join(", ")}`);const E=["durationMinutes","caloriesBurned","points"].filter(S=>typeof f[S]!="number"||isNaN(f[S]));if(E.length>0)throw new Error(`Invalid number values in: ${E.join(", ")}`);return f}catch(t){throw console.error("Gemini API Error:",t),new Error(`API Error: ${t instanceof Error?t.message:"Unknown error"}`)}}const ID=()=>{const[s,t]=mt.useState([]),[n,r]=mt.useState(""),o=async u=>{var m;if(u.preventDefault(),!n.trim())return;const f=[...s,{content:n,isUser:!0}];t(f);try{const g=await RD(n);if(console.log("Raw AI Response:",g),!g||typeof g!="object")throw new Error("AI returned invalid format");const _={workoutName:g.workoutName||"Unknown Exercise",durationMinutes:Number(g.durationMinutes)||0,caloriesBurned:Number(g.caloriesBurned)||0,points:Number(g.points)||0,metrics:g.metrics||[]};if(_.durationMinutes<=0||_.caloriesBurned<=0)throw new Error("Invalid duration or calories values");const E=(m=Qt.currentUser)==null?void 0:m.uid;if(!E)throw new Error("User not authenticated");["durationMinutes","caloriesBurned","points"].forEach(C=>{if(typeof g[C]>"u")throw new Error(`Missing required field: ${C}`)}),await po(He(fe,"users",E,"workouts"),{...g,timestamp:go()}),t([...f,{content:` ${g.workoutName} (${g.durationMinutes} min)
 ${g.caloriesBurned} calories (+${g.points} pts)`,isUser:!1,points:g.points}])}catch(g){console.error("Workout logging error:",g),t([...f,{content:g instanceof Error?` ${g.message}`:" Failed to log workout. Please check your input format",isUser:!1}])}r("")};return b.jsxs("div",{className:"chat-container",children:[b.jsx("div",{className:"message-container",children:s.map((u,f)=>b.jsx("div",{className:`message ${u.isUser?"user":"ai"}`,children:b.jsxs("div",{className:"bubble",children:[b.jsx("p",{children:u.content}),u.points&&b.jsxs("div",{className:"points-badge",children:["+",u.points," pts"]})]})},f))}),b.jsxs("form",{onSubmit:o,className:"input-container",children:[b.jsx("input",{type:"text",value:n,onChange:u=>r(u.target.value),placeholder:"Describe your workout (e.g., 'Ran for 30 minutes')"}),b.jsx("button",{type:"submit",children:"Send"})]})]})},CD=()=>{const[s,t]=mt.useState([]),[n,r]=mt.useState(!0),[o]=mt.useState(0);mt.useEffect(()=>{(async()=>{var V;const _=He(fe,"users",(V=Qt.currentUser)==null?void 0:V.uid,"workouts"),E=zN(_),C=(await Za(E)).docs.map(q=>({id:q.id,...q.data()}));t(C),r(!1)})()},[]);const u=s.reduce((g,_)=>g+(Number(_.points)||0),0),f=Math.max(Number(u)-Number(o),0),m=(Number(f)||0)/1e3*50;return mt.useEffect(()=>{if(Qt.currentUser){const g=Kl(fe,"users",Qt.currentUser.uid);isNaN(m)||yp(g,{purchaseLimit:m},{merge:!0}).then(()=>{console.log("User purchase limit updated in Firestore")}).catch(_=>{console.error("Error updating purchase limit:",_)})}},[f,m]),b.jsxs("div",{className:"dashboard-container",children:[b.jsxs("div",{className:"stats-header",children:[b.jsx("h2",{children:"Activity History"}),b.jsxs("div",{className:"total-points",children:["Total Points: ",isNaN(f)?0:f]}),b.jsxs("div",{className:"purchase-limit",children:["Purchase Limit: $",(isNaN(m)?0:m).toFixed(2)]})]}),n&&b.jsx("p",{children:"Loading workouts..."}),!n&&b.jsx("div",{className:"workout-list",children:s.map((g,_)=>{var E;return b.jsxs("div",{className:"workout-card",children:[b.jsx("div",{className:"workout-date",children:g.timestamp.toDate().toLocaleDateString()}),b.jsxs("div",{className:"workout-activity",children:[b.jsxs("div",{className:"workout-title",children:[g.workoutName,(E=g.metrics)==null?void 0:E.map((S,C)=>b.jsxs("span",{className:"workout-metric",children:[S.value," ",S.unit||S.type]},C))]}),b.jsxs("div",{className:"workout-meta",children:[" ",g.durationMinutes," mins |  ",g.caloriesBurned," ","calories |  ",g.points," points"]})]})]},_)})})]})},ND=[{id:"coupon1",title:"10% off Supplements",cost:200,description:"Save 10% on top supplement brands."},{id:"coupon2",title:"15% off Fitness Gear",cost:400,description:"Discount on running shoes, apparel and more."},{id:"coupon3",title:"20% off Gym Membership",cost:600,description:"Limited-time discount on gym memberships."}],DD=()=>Math.random().toString(36).toUpperCase().substring(2,10),OD=()=>{const[s,t]=mt.useState(0),[n,r]=mt.useState(0),[o,u]=mt.useState(0),[f,m]=mt.useState([]),[g,_]=mt.useState("");mt.useEffect(()=>{(async()=>{var Q;const C=He(fe,"users",(Q=Qt.currentUser)==null?void 0:Q.uid,"workouts"),q=(await Za(C)).docs.reduce((X,ct)=>{const et=ct.data();return X+(et.points||0)},0);t(q)})()},[]),mt.useEffect(()=>{(async()=>{var X;const C=He(fe,"users",(X=Qt.currentUser)==null?void 0:X.uid,"coupons"),q=(await Za(C)).docs.map(ct=>({id:ct.id,...ct.data()}));m(q);const Q=q.reduce((ct,et)=>ct+et.cost,0);r(Q)})()},[]),mt.useEffect(()=>{u(s-n)},[s,n]);const E=async S=>{var V,q;if(o<S.cost){_("Insufficient points to purchase this coupon.");return}const C=DD();try{await po(He(fe,"users",(V=Qt.currentUser)==null?void 0:V.uid,"coupons"),{couponId:S.id,title:S.title,cost:S.cost,couponCode:C,purchasedAt:go()}),_(`Successfully purchased ${S.title}! Your coupon code is ${C}.`);const Q=He(fe,"users",(q=Qt.currentUser)==null?void 0:q.uid,"coupons"),ct=(await Za(Q)).docs.map(nt=>({id:nt.id,...nt.data()}));m(ct);const et=ct.reduce((nt,Tt)=>nt+Tt.cost,0);r(et)}catch(Q){console.error("Purchase error:",Q),_("Purchase failed. Please try again.")}};return b.jsxs("div",{style:{padding:"1rem"},children:[b.jsx("h2",{className:"section-title",children:"Purchase Coupons"}),b.jsxs("p",{className:"points-display",children:[b.jsx("strong",{children:"Available Points:"})," ",o]}),b.jsx("div",{className:"coupon-container",children:ND.map(S=>b.jsxs("div",{className:"coupon-card",children:[b.jsx("h3",{className:"coupon-title",children:S.title}),b.jsx("p",{className:"coupon-description",children:S.description}),b.jsxs("p",{className:"coupon-cost",children:[b.jsx("strong",{children:"Cost:"})," ",S.cost," pts"]}),b.jsx("button",{className:"purchase-button",onClick:()=>E(S),children:"Purchase"})]},S.id))}),g&&b.jsx("p",{className:"message-text",children:g}),b.jsx("h3",{className:"purchased-title",children:"Purchased Coupons"}),b.jsx("div",{className:"purchased-list",children:f.map(S=>b.jsxs("div",{className:"purchased-card",children:[S.title," - Cost: ",S.cost," pts ",b.jsx("br",{}),"Code: ",b.jsx("strong",{children:S.couponCode})]},S.id))})]})},SE=[{label:"Jackpot! +200 Points",points:200},{label:"Win! +75 Points",points:75},{label:"No Luck - Nothing",points:0},{label:"Lose All - You lose all points!",points:"lose-all"},{label:"Loss! -25 Points",points:-25}],MD=()=>{const[s,t]=mt.useState(!1),[n,r]=mt.useState(null),[o,u]=mt.useState(0),[f,m]=mt.useState(0);mt.useEffect(()=>{if(!Qt.currentUser)return;const _=He(fe,"users",Qt.currentUser.uid,"workouts"),E=au(_,S=>{const C=S.docs.reduce((V,q)=>V+(q.data().points||0),0);m(C)});return()=>E()},[]);const g=()=>{if(s)return;r(null),t(!0);const _=Math.floor(Math.random()*5)+5,E=Math.floor(Math.random()*360),S=_*360+E;u(S);const C=Math.floor(Math.random()*SE.length),V=SE[C];setTimeout(async()=>{if(t(!1),r(V.label),!Qt.currentUser)return;const q=He(fe,"users",Qt.currentUser.uid,"workouts");try{await po(q,{workoutName:"Spin the Wheel",points:V.points==="lose-all"?-f:V.points,durationMinutes:0,caloriesBurned:0,timestamp:go()})}catch(Q){console.error("Error adding workout:",Q)}},2500)};return b.jsxs("div",{className:"spin-wheel-game",children:[b.jsxs("p",{className:"points-display",children:["Current Points: ",f]}),b.jsx("div",{className:"wheel-container",children:b.jsx("div",{className:`wheel ${s?"spinning":""}`,style:{transform:`rotate(${o}deg)`},children:b.jsx("div",{className:"wheel-center",children:"Wheel"})})}),b.jsx("button",{className:"spin-button",onClick:g,disabled:s,children:s?"Spinning...":"Spin"}),n&&b.jsx("p",{className:"result-text",children:n})]})},VD=()=>{const[s,t]=mt.useState(null),[n,r]=mt.useState(null),[o,u]=mt.useState(!1),[f,m]=mt.useState(0);mt.useEffect(()=>{if(!Qt.currentUser)return;const _=He(fe,"users",Qt.currentUser.uid,"workouts"),E=au(_,S=>{const C=S.docs.reduce((V,q)=>V+(q.data().points||0),0);m(C)});return()=>E()},[]);const g=async()=>{!Qt.currentUser||!s||o||(u(!0),r(null),setTimeout(async()=>{const _=Math.random()<.5?"heads":"tails";r(_);try{const E=He(fe,"users",Qt.currentUser.uid,"workouts");await po(E,{workoutName:"Coin Flip Game",points:_===s?f:-f,durationMinutes:0,caloriesBurned:0,timestamp:go()})}catch(E){console.error("Error adding workout:",E)}finally{u(!1)}},1e3))};return b.jsxs("div",{className:"coin-flip-game",children:[b.jsxs("p",{className:"points-display",children:["Current Points: ",f]}),b.jsxs("div",{className:"choice-buttons",children:[b.jsx("button",{className:`choice-btn ${s==="heads"?"selected":""}`,onClick:()=>t("heads"),disabled:o||f===0,children:"Heads"}),b.jsx("button",{className:`choice-btn ${s==="tails"?"selected":""}`,onClick:()=>t("tails"),disabled:o||f===0,children:"Tails"})]}),b.jsx("button",{className:"flip-button",onClick:g,disabled:!s||o||f===0,children:o?"Flipping...":"Flip Coin"}),n&&b.jsx("div",{className:"result-display",children:b.jsxs("p",{className:"result-text",children:["Result: ",n,"!",b.jsx("br",{}),n===s?" You won!":" You lost..."]})})]})},xD=()=>{const[s,t]=mt.useState("waiting"),[n,r]=mt.useState(0),[o,u]=mt.useState(0),[f,m]=mt.useState(0),[g,_]=mt.useState(0);mt.useEffect(()=>{if(!Qt.currentUser)return;const C=He(fe,"users",Qt.currentUser.uid,"workouts"),V=au(C,q=>{const Q=q.docs.reduce((X,ct)=>X+(ct.data().points||0),0);u(Q)});return()=>V()},[]);const E=()=>{t("ready"),setTimeout(()=>{t("active"),m(Date.now())},1e3+Math.random()*2e3)},S=()=>{if(s!=="active")return;const V=Date.now()-f;r(V);const q=Math.max(100-Math.floor(V/10),0);if(_(q),t("finished"),Qt.currentUser&&q>0){const Q=He(fe,"users",Qt.currentUser.uid,"workouts");po(Q,{workoutName:"Reaction Challenge",points:q,durationMinutes:0,caloriesBurned:0,timestamp:go()}).catch(X=>console.error("Error saving reaction score:",X))}};return b.jsxs("div",{className:"reaction-tap-game",children:[b.jsxs("p",{className:"points-display",children:["Current Points: ",o]}),s==="waiting"&&b.jsx("button",{className:"start-button",onClick:E,children:"Start Challenge"}),s==="ready"&&b.jsx("p",{className:"instruction-text",children:"Get ready... Wait for the target!"}),s==="active"&&b.jsx("div",{className:"target-box",onClick:S,children:"TAP NOW!"}),s==="finished"&&b.jsxs("div",{className:"result-display",children:[b.jsxs("p",{className:"result-text",children:["Reaction Time: ",n,"ms",b.jsx("br",{}),"Points Earned: +",g]}),b.jsx("button",{className:"play-again",onClick:()=>t("waiting"),children:"Play Again"})]})]})},kD=()=>{const[s,t]=mt.useState(null),[n,r]=mt.useState(0);return mt.useEffect(()=>{if(!Qt.currentUser)return;const o=He(fe,"users",Qt.currentUser.uid,"workouts"),u=au(o,f=>{const m=f.docs.reduce((g,_)=>g+(_.data().points||0),0);r(m)});return()=>u()},[]),s==="spin"?b.jsxs("div",{className:"games-section",children:[b.jsx("button",{className:"back-button",onClick:()=>t(null),children:" Back to Games"}),b.jsx(MD,{})]}):s==="coin"?b.jsxs("div",{className:"games-section",children:[b.jsx("button",{className:"back-button",onClick:()=>t(null),children:" Back to Games"}),b.jsx(VD,{})]}):s==="tap"?b.jsxs("div",{className:"games-section",children:[b.jsx("button",{className:"back-button",onClick:()=>t(null),children:" Back to Games"}),b.jsx(xD,{})]}):b.jsxs("div",{className:"games-section",children:[b.jsxs("div",{className:"games-header",children:[b.jsx("h2",{className:"section-title",children:"Games"}),b.jsxs("div",{className:"points-badge",children:[" Current Points: ",n]})]}),b.jsxs("div",{className:"games-container",children:[b.jsxs("div",{className:"game-card",children:[b.jsx("h3",{children:"Spin the Wheel"}),b.jsx("p",{children:"Win points, lose them all, or something in between."}),b.jsx("button",{className:"play-button",onClick:()=>t("spin"),children:"Play"})]}),b.jsxs("div",{className:"game-card",children:[b.jsx("h3",{children:"Coin Flip Wager"}),b.jsx("p",{children:"Double your points if you win, else you lose them all."}),b.jsx("button",{className:"play-button",onClick:()=>t("coin"),children:"Play"})]}),b.jsxs("div",{className:"game-card",children:[b.jsx("h3",{children:"Reaction Tap Challenge"}),b.jsx("p",{children:"Tap as fast as you can for a bonus!"}),b.jsx("button",{className:"play-button",onClick:()=>t("tap"),children:"Play"})]})]})]})},PD=()=>{const[s,t]=mt.useState([]),[n,r]=mt.useState([]),[o,u]=mt.useState(!1),[f,m]=mt.useState(0),g=[{id:"1",name:"Dumbbells",description:"A pair of dumbbells ideal for home and gym workouts.",price:49.99},{id:"2",name:"Resistance Bands",description:"Different resistance levels for versatile workouts.",price:29.99},{id:"3",name:"Yoga Mat",description:"Non-slip surface for yoga and other exercises.",price:19.99},{id:"4",name:"Fitness Tracker Pro",description:"Track your heart rate, sleep, and activity levels.",price:199.99},{id:"5",name:"Kettlebell",description:"Multiple weight options in one kettlebell for strength training.",price:89.99}];mt.useEffect(()=>{(async()=>{try{const V=await Za(He(fe,"products"));console.log("Fetched product docs:",V.docs);const q=V.docs.map(Q=>({id:Q.id,...Q.data()}));q.length===0?(console.warn("No products found in the 'products' collection, using sample products."),t(g)):t(q)}catch(V){console.error("Error fetching products: ",V)}})()},[]),mt.useEffect(()=>{(async()=>{if(Qt.currentUser){const V=Kl(fe,"users",Qt.currentUser.uid);try{const q=await HN(V);if(q.exists()){const Q=q.data();Q.purchaseLimit!==void 0&&m(Q.purchaseLimit)}else console.error("User document does not exist.")}catch(q){console.error("Error fetching purchase limit: ",q)}}})()},[]),mt.useEffect(()=>{if(o){const C=au(He(fe,"cart"),V=>{const q=V.docs.map(Q=>({id:Q.id,...Q.data()}));r(q)});return()=>C()}},[o]);const _=async C=>{try{await po(He(fe,"cart"),{...C,quantity:1,createdAt:new Date}),alert(`${C.name} added to cart`)}catch(V){console.error("Error adding product to cart: ",V)}},E=n.reduce((C,V)=>C+V.price*V.quantity,0),S=async()=>{if(E>f){alert("Insufficient funds to complete purchase!");return}try{const C=E*20;if(Qt.currentUser){const q=Kl(fe,"users",Qt.currentUser.uid);await yp(q,{spentPoints:GN(C)},{merge:!0})}const V=await Za(He(fe,"cart"));await Promise.all(V.docs.map(q=>FN(q.ref))),alert("Purchase successful!")}catch(C){console.error("Error during checkout: ",C),alert("Error processing checkout. Please try again.")}};return b.jsxs("div",{className:"store-section",children:[b.jsx("h2",{children:"Our Fitness Store"}),b.jsx("p",{children:"Explore our exclusive range of fitness products!"}),b.jsx("div",{className:"product-grid",children:s.map(C=>b.jsx("div",{className:"product-card",children:b.jsxs("div",{className:"product-details",children:[b.jsx("h3",{children:C.name}),b.jsxs("p",{className:"product-price",children:["$",C.price]}),b.jsx("p",{className:"product-description",children:C.description}),b.jsx("button",{className:"btn primary",onClick:()=>_(C),children:"Add to Cart"})]})},C.id))}),b.jsxs("div",{className:"cart-container",children:[b.jsx("button",{className:"btn secondary cart-toggle-button",onClick:()=>u(!o),children:o?"Hide Cart":`View Cart (${n.length})`}),o&&b.jsxs("div",{className:"cart-section",children:[b.jsx("h3",{children:"Your Cart"}),b.jsxs("div",{className:"cart-summary",children:[b.jsxs("p",{children:[b.jsx("strong",{children:"Purchase Limit:"})," $",f.toFixed(2)]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Total Cost:"})," $",E.toFixed(2)]})]}),n.length===0?b.jsx("p",{children:"No items in cart"}):b.jsx("ul",{className:"cart-items",children:n.map(C=>b.jsxs("li",{children:[b.jsx("span",{className:"item-name",children:C.name}),b.jsxs("span",{className:"item-qty",children:["x ",C.quantity]}),b.jsxs("span",{className:"item-price",children:["$",C.price]})]},C.id))}),b.jsx("button",{className:"btn primary checkout-button",onClick:S,children:"Checkout"})]})]})]})},UD=({navigate:s})=>{const[t,n]=mt.useState("log");return b.jsxs("div",{className:"home-container",children:[b.jsx("aside",{className:"sidebar",children:b.jsx("nav",{children:b.jsxs("ul",{children:[b.jsx("li",{onClick:()=>n("log"),children:" Log Workout"}),b.jsx("li",{onClick:()=>n("dashboard"),children:" Dashboard"}),b.jsx("li",{onClick:()=>n("games"),children:" Games"}),b.jsx("li",{onClick:()=>n("products"),children:" Coupons"}),b.jsx("li",{onClick:()=>n("store"),children:" Store"}),b.jsx("li",{onClick:()=>s("/login"),children:" Sign Out"})]})})}),b.jsxs("main",{className:"main-content",children:[t==="log"&&b.jsx(ID,{}),t==="dashboard"&&b.jsx(CD,{}),t==="games"&&b.jsx(kD,{}),t==="products"&&b.jsx(OD,{}),t==="store"&&b.jsx(PD,{})]})]})},LD=()=>{const[s,t]=mt.useState(window.location.pathname);mt.useEffect(()=>{const r=()=>t(window.location.pathname);return window.addEventListener("popstate",r),()=>window.removeEventListener("popstate",r)},[]);const n=r=>{window.history.pushState({},"",r),t(r)};switch(s){case"/login":return b.jsx(QN,{navigate:n});case"/signup":return b.jsx(YN,{navigate:n});case"/home":return b.jsx(UD,{navigate:n});case"/":return b.jsx(US,{navigate:n});default:return b.jsx("div",{children:"404 - Page not found"})}};PS.createRoot(document.getElementById("root")).render(b.jsx(CS.StrictMode,{children:b.jsx(LD,{})}));
